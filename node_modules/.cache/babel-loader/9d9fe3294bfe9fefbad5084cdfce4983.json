{"ast":null,"code":"var _jsxFileName = \"/Users/hipheckt/codes/sapioclub/react/src/admin/Users.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\"; // import { Link } from \"react-router-dom\";\n\nimport swal from 'sweetalert';\nimport $ from \"jquery\";\nimport NumberFormat from 'react-number-format';\nimport Avatar from \"../assets/img/default-user-avatar.png\";\nimport Header from \"../common/Header\";\nimport Sidebar from \"./Sidebar\";\nimport { Link } from \"react-router-dom\";\n\nvar _home_id;\n\nexport class UsersList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.queryField = e => {\n      e.preventDefault();\n      this.setState({\n        query: e.target.value\n      });\n      axios.get(`${axios.defaults.baseURL}/search-users/${this.state.query}`).then(response => {\n        //console.log(response);\n        return response;\n      }).then(json => {\n        if (json.data.success) {\n          this.setState({\n            users: json.data.users\n          });\n        } else alert(\"Fetching Users Failed!\");\n      }).catch(error => {\n        console.error(`An Error Occured! ${error}`);\n      });\n    };\n\n    this.fetchUsers = e => {\n      axios.get(`${axios.defaults.baseURL}/users/list`, {\n        headers: {\n          Authorization: `Bearer ${this.state.token}`\n        }\n      }).then(response => {\n        //console.log(response);\n        return response;\n      }).then(json => {\n        if (json.data.success) {\n          this.setState({\n            users: json.data.users,\n            isLoading: false\n          });\n        } else alert(\"Fetching Users Failed!\");\n      }).catch(error => {\n        console.error(`An Error Occured! ${error}`);\n      });\n    };\n\n    this.state = {\n      token: localStorage[\"appState\"] ? JSON.parse(localStorage[\"appState\"]).user.token : \"\",\n      users: [],\n      users_total: \"\",\n      currentPage: 1,\n      usersPerPage: 20,\n      query: \"\",\n      isLoading: true\n    };\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick(event) {\n    event.preventDefault();\n    this.setState({\n      currentPage: Number(event.target.id)\n    });\n  }\n\n  componentDidMount() {\n    this.fetchUsers();\n    this.getChartData();\n  }\n\n  getChartData() {\n    axios.get(`${axios.defaults.baseURL}/chart/${JSON.parse(localStorage[\"appState\"]).user.id}`, {\n      headers: {\n        Authorization: `Bearer ${this.state.token}`\n      }\n    }).then(response => {\n      // console.log(response);\n      return response;\n    }).then(json => {\n      if (json.data.success) {\n        this.setState({\n          users_total: json.data.users_total\n        }); // } else alert(\"Cannot Fetch Data!\");\n      } else swal(\"Oops!\", \"Cannot Fetch Data!\", \"error\");\n    }).catch(error => {\n      console.error(`An Error Occured! ${error}`);\n    });\n  }\n\n  render() {\n    const {\n      users,\n      currentPage,\n      usersPerPage,\n      isLoading\n    } = this.state; // Logic for displaying users\n\n    const usersList = this.state.users;\n    const indexOfLastUser = currentPage * usersPerPage;\n    const indexOfFirstUser = indexOfLastUser - usersPerPage;\n    const currentUsers = usersList.slice(indexOfFirstUser, indexOfLastUser); // Logic for displaying page numbers\n\n    const pageNumbers = [];\n\n    for (let i = 1; i <= Math.ceil(users.length / usersPerPage); i++) {\n      pageNumbers.push(i);\n    }\n\n    const renderPageNumbers = pageNumbers.map(number => {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, number == currentPage ? /*#__PURE__*/React.createElement(\"li\", {\n        className: \"pg-link active-link\",\n        key: number,\n        id: number,\n        onClick: this.handleClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 9\n        }\n      }, number) : /*#__PURE__*/React.createElement(\"li\", {\n        className: \"pg-link\",\n        key: number,\n        id: number,\n        onClick: this.handleClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 9\n        }\n      }, number));\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"app\",\n      className: \"bg-gray-200\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dashboard-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"private-layout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"main-app\",\n      className: \"position-relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row text-primary pt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-welcome\",\n      style: {\n        overflow: \"hidden\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrapper d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 29\n      }\n    }, \"All Users (\", this.state.users_total, \")\", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-users\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 96\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"float-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"query\",\n      className: \"form-control\",\n      placeholder: \" Search users by name or email...\",\n      onChange: this.queryField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 29\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-right col-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-4 align-items-stretch\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      class: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      class: \"thead-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 29\n      }\n    }, \"Avatar\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 29\n      }\n    }, \"Firstname\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 29\n      }\n    }, \"Lastname\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 29\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 29\n      }\n    }, \"Telephone\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 29\n      }\n    }, \"Action\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 25\n      }\n    }, isLoading ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"tr\", {\n      className: \"blink_me\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: Avatar,\n      className: \"user-list-avatar\",\n      alt: \"user\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 35\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 31\n      }\n    }, \"Loading...\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 31\n      }\n    }, \"Loading...\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 31\n      }\n    }, \"Loading...\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 31\n      }\n    }, \"Loading...\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: `/admin/user-details/`\n      },\n      className: \"btn mr-2 btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 31\n      }\n    }, \"View Details\"), /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: `/admin/user-plans/`\n      },\n      className: \"btn mr-2 btn-warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 31\n      }\n    }, \"View Plans\")))) : /*#__PURE__*/React.createElement(React.Fragment, null, currentUsers.map((user, index) => /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: user.image || Avatar,\n      className: \"user-list-avatar\",\n      alt: \"user\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 35\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 31\n      }\n    }, user.fname), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 31\n      }\n    }, user.lname), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 31\n      }\n    }, user.email), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 31\n      }\n    }, user.phone), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: `/admin/user-details/${user.id}`\n      },\n      className: \"btn mr-2 btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 31\n      }\n    }, \"View Details\"), /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: `/admin/user-plans/${user.id}`\n      },\n      className: \"btn mr-2 btn-warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 31\n      }\n    }, \"View Plans\"))))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 19\n      }\n    }, renderPageNumbers), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 30\n      }\n    }))))));\n  }\n\n}\nexport default UsersList;","map":{"version":3,"sources":["/Users/hipheckt/codes/sapioclub/react/src/admin/Users.js"],"names":["React","Component","axios","swal","$","NumberFormat","Avatar","Header","Sidebar","Link","_home_id","UsersList","constructor","props","queryField","e","preventDefault","setState","query","target","value","get","defaults","baseURL","state","then","response","json","data","success","users","alert","catch","error","console","fetchUsers","headers","Authorization","token","isLoading","localStorage","JSON","parse","user","users_total","currentPage","usersPerPage","handleClick","bind","event","Number","id","componentDidMount","getChartData","render","usersList","indexOfLastUser","indexOfFirstUser","currentUsers","slice","pageNumbers","i","Math","ceil","length","push","renderPageNumbers","map","number","overflow","pathname","index","image","fname","lname","email","phone"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n// import { Link } from \"react-router-dom\";\nimport swal from 'sweetalert';\nimport $ from \"jquery\";\nimport NumberFormat from 'react-number-format';\nimport Avatar from \"../assets/img/default-user-avatar.png\";\n\n\nimport Header from \"../common/Header\";\nimport Sidebar from \"./Sidebar\";\nimport { Link } from \"react-router-dom\";\n\nvar _home_id;\n\nexport class UsersList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: localStorage[\"appState\"]\n              ? JSON.parse(localStorage[\"appState\"]).user.token\n              : \"\",\n      users: [],\n      users_total: \"\",\n      currentPage: 1,\n      usersPerPage: 20,\n      query: \"\",\n      isLoading: true\n    };\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  queryField = (e) => {\n    e.preventDefault();\n    this.setState({\n      query: e.target.value,\n    });\n    axios\n      .get(`${axios.defaults.baseURL}/search-users/${this.state.query}`)\n      .then((response) => {\n        //console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({ users: json.data.users });\n        } else alert(\"Fetching Users Failed!\");\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n  };\n\n  handleClick(event) {\n    event.preventDefault();\n    this.setState({\n      currentPage: Number(event.target.id),\n    });\n  }\n\n  componentDidMount() {\n    this.fetchUsers();\n    this.getChartData();\n  }\n\n  fetchUsers = (e) => {\n    axios\n    .get(\n        `${axios.defaults.baseURL}/users/list`,\n        {\n          headers: {\n            Authorization: `Bearer ${this.state.token}`,\n          },\n        }\n      )\n      .then((response) => {\n        //console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({ users: json.data.users, isLoading: false });\n        } else alert(\"Fetching Users Failed!\");\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n  };\n\n  getChartData(){\n    axios\n      .get(\n        `${axios.defaults.baseURL}/chart/${\n          JSON.parse(localStorage[\"appState\"]).user.id\n        }`,\n        {\n          headers: {\n            Authorization: `Bearer ${this.state.token}`,\n          },\n        }\n      )\n      .then((response) => {\n        // console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({\n            users_total: json.data.users_total\n          });\n          // } else alert(\"Cannot Fetch Data!\");\n        } else swal(\"Oops!\", \"Cannot Fetch Data!\", \"error\");\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n  };\n\n  render() {\n    const { users, currentPage, usersPerPage, isLoading } = this.state;\n\n    // Logic for displaying users\n    const usersList = this.state.users;\n    const indexOfLastUser = currentPage * usersPerPage;\n    const indexOfFirstUser = indexOfLastUser - usersPerPage;\n    const currentUsers = usersList.slice(indexOfFirstUser, indexOfLastUser);\n\n    // Logic for displaying page numbers\n    const pageNumbers = [];\n    for (let i = 1; i <= Math.ceil(users.length / usersPerPage); i++) {\n      pageNumbers.push(i);\n    }\n\n    const renderPageNumbers = pageNumbers.map((number) => {\n      return (\n        <>\n        { number == currentPage ? (\n        <li\n          className=\"pg-link active-link\"\n          key={number}\n          id={number}\n          onClick={this.handleClick}\n        >\n          {number}\n        </li> \n        ) :\n        <li\n          className=\"pg-link\"\n          key={number}\n          id={number}\n          onClick={this.handleClick}\n        >\n          {number}\n        </li> \n      }\n      </>\n      );\n    });\n\n    return (\n      <div id=\"app\" className=\"bg-gray-200\">\n        <div className=\"dashboard-page\">\n          <div className=\"private-layout\">\n            <div className=\"app-wrapper\">\n              <Sidebar />\n              <Header />\n              <div id=\"main-app\" className=\"position-relative\">\n                <div className=\"container mt-4\">\n                  <div className=\"page-title\">\n                    <div className=\"row text-primary pt-4\">\n                      <div className=\"col-12\">\n                        <div\n                          className=\"user-welcome\"\n                          style={{ overflow: \"hidden\" }}\n                        >\n                          <div className=\"wrapper d-flex\">\n                            <h4 className=\"d-inline-block\">All Users ({this.state.users_total})<i className=\"fa fa-users\"></i></h4>\n                          </div>\n                            <div className=\"float-right\">\n                            <input\n                            type=\"text\"\n                            name=\"query\"\n                            className=\"form-control\"\n                            placeholder=\" Search users by name or email...\"\n                            onChange={this.queryField}\n                            />\n                            </div>\n                        </div>\n                      </div>\n                      <div className=\"text-right col-2\"></div>\n                    </div>\n                  </div>\n                  <div className=\"row mt-4 align-items-stretch\">\n                  <table class=\"table\">\n                        <thead class=\"thead-dark\">\n                            <tr>\n                            <th scope=\"col\">Avatar</th>\n                            <th scope=\"col\">Firstname</th>\n                            <th scope=\"col\">Lastname</th>\n                            <th scope=\"col\">Email</th>\n                            <th scope=\"col\">Telephone</th>\n                            <th scope=\"col\">Action</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                          {isLoading ? (\n                            <>\n                            <tr className=\"blink_me\">\n                              <td><img src={Avatar} className=\"user-list-avatar\" alt=\"user\"/></td>\n                              <td>Loading...</td>\n                              <td>Loading...</td>\n                              <td>Loading...</td>\n                              <td>Loading...</td>\n                              <td>\n                              <Link to={{pathname: `/admin/user-details/`}} className=\"btn mr-2 btn-primary\">\n                                  View Details\n                              </Link>\n                              <Link to={{pathname: `/admin/user-plans/`}} className=\"btn mr-2 btn-warning\">\n                                  View Plans\n                              </Link>\n                              </td>\n                            </tr>\n                            </>\n                          ):(\n                            <>\n                            { currentUsers.map((user, index) => (\n                            <tr>\n                              <td><img src={user.image || Avatar} className=\"user-list-avatar\" alt=\"user\"/></td>\n                              <td>{user.fname}</td>\n                              <td>{user.lname}</td>\n                              <td>{user.email}</td>\n                              <td>{user.phone}</td>\n                              <td>\n                              <Link to={{pathname: `/admin/user-details/${user.id}`}} className=\"btn mr-2 btn-primary\">\n                                  View Details\n                              </Link>\n                              <Link to={{pathname: `/admin/user-plans/${user.id}`}} className=\"btn mr-2 btn-warning\">\n                                  View Plans\n                              </Link>\n                              </td>\n                              </tr>\n                              \n                          ))}\n                            </>\n                          )}\n                        </tbody>\n                        </table>\n                    {/* Product Listing */}\n                      {/* {renderHomes} */}\n                    {/* End Product Listing */}\n                  </div>\n                </div>\n                  <div className=\"text-center\">\n                    {renderPageNumbers}\n                  </div><br/><br/>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default UsersList;\n"]},"metadata":{},"sourceType":"module"}