{"ast":null,"code":"import _classCallCheck from\"/Users/hipheckt/codes/niyiogunwuyi/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hipheckt/codes/niyiogunwuyi/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/hipheckt/codes/niyiogunwuyi/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/hipheckt/codes/niyiogunwuyi/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/hipheckt/codes/niyiogunwuyi/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import axios from\"axios\";// import { Link } from \"react-router-dom\";\n// import Sound from 'react-sound';\nimport swal from'sweetalert';import $ from\"jquery\";import Header from\"./common/Header.js\";import Candle from\"./assets/images/icons/candle_white.png\";import Rose from\"./assets/images/icons/rose_white.png\";import Note from\"./assets/images/icons/note_white.png\";import Candle2 from\"./assets/images/icons/candle_blue.png\";import Rose2 from\"./assets/images/icons/rose_blue.png\";import Note2 from\"./assets/images/icons/note_blue.png\";import Pen from\"./assets/images/icons/pen.png\";var _name,_tribute;var Tribute=/*#__PURE__*/function(_React$Component){_inherits(Tribute,_React$Component);var _super=_createSuper(Tribute);function Tribute(props){var _this;_classCallCheck(this,Tribute);_this=_super.call(this,props);// let { user } = this.props.appstate;\n_this.queryField=function(e){e.preventDefault();_this.setState({query:e.target.value});axios.get(\"\".concat(axios.defaults.baseURL,\"/tributes/\").concat(_this.state.query)).then(function(response){console.log(response);return response;}).then(function(json){if(json.data.success){_this.setState({tributes:json.data.tributes});}else alert(\"Fetching Tributes Failed!\");}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});};_this.fetchTributes=function(e){axios.get(\"\".concat(axios.defaults.baseURL,\"/tributes\")).then(function(response){console.log(response);return response;}).then(function(json){if(json.data.success){_this.setState({tributes:json.data.tributes});}else alert(\"Fetching Tributes Failed!\");}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});};_this.handleTributePost=function(e){e.preventDefault();var formData=new FormData();formData.append(\"type\",_this.state.type);formData.append(\"name\",_name.value);formData.append(\"tribute\",_tribute.value);console.log(formData);axios({method:'post',url:\"\".concat(axios.defaults.baseURL,\"/tribute\"),data:formData}).then(function(response){console.log(response);return response;}).then(function(json){var _json$data$tribute=json.data.tribute,id=_json$data$tribute.id,type=_json$data$tribute.type,name=_json$data$tribute.name,tribute=_json$data$tribute.tribute;var tributeData={id:id,type:type,name:name,tribute:tribute,timestamp:new Date().toString()};var appState={tribute:tributeData};// save app state with user date in local storage\nlocalStorage[\"appState\"]=JSON.stringify(appState);_this.setState({tribute:appState.tribute});if(json.data.success===true){swal(\"Published!\",\"\"+json.data.message,\"success\",{button:false,timer:1500});$(\"#name-input\").val('');$(\"#tribute-input\").val('');_this.fetchTributes();// redirect home\n// this.props.history.push(\"/dashboard\");\n}else{// alert(json.data.message);\nswal(\"Alert!\",\"\"+json.data.message,\"warning\");}}).catch(function(error){// alert(\"An Error Occured!\" + error);\nconsole.log(error.response.data);swal(\"Warning!\",\"Please Select Tribute type\",\"warning\");});};_this.state={tributes:[],currentPage:1,tributesPerPage:20,selectTribute:Candle2,type:\"\",query:\"\"};_this.handleClick=_this.handleClick.bind(_assertThisInitialized(_this));_this.candleSwitch=_this.candleSwitch.bind(_assertThisInitialized(_this));_this.roseSwitch=_this.roseSwitch.bind(_assertThisInitialized(_this));_this.noteSwitch=_this.noteSwitch.bind(_assertThisInitialized(_this));return _this;}_createClass(Tribute,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchTributes();}},{key:\"handleClick\",value:function handleClick(event){event.preventDefault();this.setState({currentPage:Number(event.target.id)});$(\"#\"+\"\".concat(event.target.id)).attr('class','pg-link active-link');}},{key:\"candleSwitch\",value:function candleSwitch(e){e.preventDefault();this.setState({selectTribute:Candle2,type:\"candle\"});}},{key:\"roseSwitch\",value:function roseSwitch(e){e.preventDefault();this.setState({selectTribute:Rose2,type:\"rose\"});}},{key:\"noteSwitch\",value:function noteSwitch(e){e.preventDefault();this.setState({selectTribute:Note2,type:\"note\"});}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,tributes=_this$state.tributes,currentPage=_this$state.currentPage,tributesPerPage=_this$state.tributesPerPage;// Logic for displaying tributes\nvar tributesList=this.state.tributes;var indexOfLastTribute=currentPage*tributesPerPage;var indexOfFirstTribute=indexOfLastTribute-tributesPerPage;var currentTributes=tributesList.slice(indexOfFirstTribute,indexOfLastTribute);var renderTributes=currentTributes.map(function(tribute,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"v-card\",key:tribute.id},/*#__PURE__*/React.createElement(\"div\",{className:\"tribute-card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-icon\"},tribute.type===\"candle\"?/*#__PURE__*/React.createElement(\"img\",{src:Candle2,className:\"tribute-icon\",alt:\"\"}):tribute.type===\"rose\"?/*#__PURE__*/React.createElement(\"img\",{src:Rose2,className:\"tribute-icon\",alt:\"\"}):tribute.type===\"note\"?/*#__PURE__*/React.createElement(\"img\",{src:Note2,className:\"tribute-icon\",alt:\"\"}):null),/*#__PURE__*/React.createElement(\"div\",{className:\"post-content\"},/*#__PURE__*/React.createElement(\"p\",{className:\"poster-name\"},\"Posted by \",tribute.name,\" on \",tribute.date),/*#__PURE__*/React.createElement(\"p\",{className:\"post\"},tribute.tribute))));});// Logic for displaying page numbers\nvar pageNumbers=[];for(var i=1;i<=Math.ceil(tributes.length/tributesPerPage);i++){pageNumbers.push(i);}var renderPageNumbers=pageNumbers.map(function(number){return/*#__PURE__*/React.createElement(\"li\",{className:\"pg-link\",key:number,id:number,onClick:_this2.handleClick},number);});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"div\",{className:\"center-canvas\"},/*#__PURE__*/React.createElement(\"div\",{className:\"center-content\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h4\",null,\"Tributes \",/*#__PURE__*/React.createElement(\"img\",{src:Pen,className:\"pen\",alt:\"\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"query-field\"},\"Filter: \",/*#__PURE__*/React.createElement(\"input\",{name:\"query\",className:\"query-input\",placeholder:\" search tributes by name...\",onChange:this.queryField})),renderTributes,/*#__PURE__*/React.createElement(\"div\",{className:\"center-content\"},/*#__PURE__*/React.createElement(\"br\",null),renderPageNumbers),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"post-tribute-card\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"text-blue\"},\"Leave a Tribute \",/*#__PURE__*/React.createElement(\"img\",{src:Pen,className:\"pen\",alt:\"\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"remove-top-margin center-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"icons-set\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"a\",{onClick:this.candleSwitch},/*#__PURE__*/React.createElement(\"img\",{src:Candle2,className:\"post-tribute-icon\",alt:\"\"}),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"span\",null,\"Light a Candle\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"a\",{onClick:this.roseSwitch},/*#__PURE__*/React.createElement(\"img\",{src:Rose2,className:\"post-tribute-icon\",alt:\"\"}),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"span\",null,\"Lay a Flower\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"a\",{onClick:this.noteSwitch},/*#__PURE__*/React.createElement(\"img\",{src:Note2,className:\"post-tribute-icon\",alt:\"\"}),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"span\",null,\"Leave a Note\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-tribute-section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"select-tribute\"},/*#__PURE__*/React.createElement(\"img\",{src:this.state.selectTribute,className:\"select-tribute-icon\",alt:\"\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"entry-form\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleTributePost,method:\"post\"},/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"textarea\",{ref:function ref(input){return _tribute=input;},placeholder:\"Add your tribute text here...\",name:\"tribute\",type:\"text\",class:\"form-control\",maxlength:\"15000\",cols:\"20\",rows:\"5\",id:\"tribute-input\",required:true})),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _name=input;},name:\"name\",placeholder:\"Please enter your name\",type:\"text\",class:\"form-control\",id:\"name-input\",required:true})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",class:\"btn btn-primary float-right\"},\"Publish Tribute\")))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null))));}}]);return Tribute;}(React.Component);export default Tribute;","map":{"version":3,"sources":["/Users/hipheckt/codes/niyiogunwuyi/react/src/Tribute.js"],"names":["React","axios","swal","$","Header","Candle","Rose","Note","Candle2","Rose2","Note2","Pen","_name","_tribute","Tribute","props","queryField","e","preventDefault","setState","query","target","value","get","defaults","baseURL","state","then","response","console","log","json","data","success","tributes","alert","catch","error","fetchTributes","handleTributePost","formData","FormData","append","type","method","url","tribute","id","name","tributeData","timestamp","Date","toString","appState","localStorage","JSON","stringify","message","button","timer","val","currentPage","tributesPerPage","selectTribute","handleClick","bind","candleSwitch","roseSwitch","noteSwitch","event","Number","attr","tributesList","indexOfLastTribute","indexOfFirstTribute","currentTributes","slice","renderTributes","map","index","date","pageNumbers","i","Math","ceil","length","push","renderPageNumbers","number","input","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\n// import { Link } from \"react-router-dom\";\n// import Sound from 'react-sound';\nimport swal from 'sweetalert';\nimport $ from \"jquery\";\n\nimport Header from \"./common/Header.js\";\n\nimport Candle from \"./assets/images/icons/candle_white.png\";\nimport Rose from \"./assets/images/icons/rose_white.png\";\nimport Note from \"./assets/images/icons/note_white.png\";\nimport Candle2 from \"./assets/images/icons/candle_blue.png\";\nimport Rose2 from \"./assets/images/icons/rose_blue.png\";\nimport Note2 from \"./assets/images/icons/note_blue.png\";\nimport Pen from \"./assets/images/icons/pen.png\";\n\nvar _name, _tribute;\n\nclass Tribute extends React.Component {\n  constructor(props) {\n    super(props);\n    // let { user } = this.props.appstate;\n    this.state = {\n      tributes: [],\n      currentPage: 1,\n      tributesPerPage: 20,\n      selectTribute: Candle2,\n      type: \"\",\n      query: \"\"\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.candleSwitch = this.candleSwitch.bind(this);\n    this.roseSwitch = this.roseSwitch.bind(this);\n    this.noteSwitch = this.noteSwitch.bind(this);\n  }\n\n  queryField = e => {\n    e.preventDefault();\n    this.setState({\n      query: e.target.value\n    });\n    axios\n      .get(`${axios.defaults.baseURL}/tributes/${this.state.query}`)\n      .then(response => {\n        console.log(response);\n        return response;\n      })\n      .then(json => {\n        if (json.data.success) {\n          this.setState({ tributes: json.data.tributes });\n        } else alert(\"Fetching Tributes Failed!\");\n      })\n      .catch(error => {\n        console.error(`An Error Occured! ${error}`);\n      });\n  }\n\n\n  componentDidMount() {\n    this.fetchTributes();\n  }\n\n  handleClick(event) {\n    event.preventDefault();\n    this.setState({\n      currentPage: Number(event.target.id)\n    });\n    $(\"#\"+`${event.target.id}`).attr('class', 'pg-link active-link');\n  }\n\n  candleSwitch(e) {\n    e.preventDefault();\n    this.setState({\n      selectTribute: Candle2,\n      type: \"candle\"\n    });\n  }\n  roseSwitch(e) {\n    e.preventDefault();\n    this.setState({\n      selectTribute: Rose2,\n      type: \"rose\"\n    });\n  }\n  noteSwitch(e) {\n    e.preventDefault();\n    this.setState({\n      selectTribute: Note2,\n      type: \"note\"\n    });\n  }\n  \n  fetchTributes = e => {\n    axios\n      .get(`${axios.defaults.baseURL}/tributes`)\n      .then(response => {\n        console.log(response);\n        return response;\n      })\n      .then(json => {\n        if (json.data.success) {\n          this.setState({ tributes: json.data.tributes });\n        } else alert(\"Fetching Tributes Failed!\");\n      })\n      .catch(error => {\n        console.error(`An Error Occured! ${error}`);\n      });\n  }\n\n  handleTributePost = e => {\n    e.preventDefault();\n\n    var formData = new FormData();\n    formData.append(\"type\", this.state.type);\n    formData.append(\"name\", _name.value);\n    formData.append(\"tribute\", _tribute.value);\n\n    console.log(formData);\n\n  axios({\n      method: 'post',\n      url: `${axios.defaults.baseURL}/tribute`,\n      data: formData\n      })\n    .then(response => {\n      console.log(response);\n      return response;\n    })\n    .then(json => {\n      const { id, type, name, tribute } = json.data.tribute;\n      let tributeData = {\n        id,\n        type,\n        name,\n        tribute,\n        timestamp: new Date().toString()\n      };\n      let appState = {\n        tribute: tributeData\n      };\n      // save app state with user date in local storage\n      localStorage[\"appState\"] = JSON.stringify(appState);\n      this.setState({\n        tribute: appState.tribute,\n      });\n\n      if (json.data.success === true) {\n        swal(\"Published!\", \"\" + json.data.message, \"success\", {\n          button: false,\n          timer: 1500\n        });\n        $(\"#name-input\").val('');\n        $(\"#tribute-input\").val('');\n        this.fetchTributes();\n        // redirect home\n        // this.props.history.push(\"/dashboard\");\n      } else {\n        // alert(json.data.message);\n        swal(\"Alert!\", \"\" + json.data.message, \"warning\");\n      }\n\n    })\n    .catch(error => {\n      // alert(\"An Error Occured!\" + error);\n      console.log(error.response.data);\n      swal(\"Warning!\", \"Please Select Tribute type\", \"warning\");\n    });\n\n  };\n\n\n  render() {\n\n    const { tributes, currentPage, tributesPerPage } = this.state;\n\n    // Logic for displaying tributes\n    const tributesList = this.state.tributes;\n    const indexOfLastTribute = currentPage * tributesPerPage;\n    const indexOfFirstTribute = indexOfLastTribute - tributesPerPage;\n    const currentTributes = tributesList.slice(indexOfFirstTribute, indexOfLastTribute);\n\n    const renderTributes = currentTributes.map((tribute, index) => {\n      return (\n          <div className=\"v-card\" key={tribute.id}>\n            <div className=\"tribute-card\">\n                <div className=\"post-icon\">\n                  {tribute.type === \"candle\" ? (\n                  <img src={Candle2} className=\"tribute-icon\" alt=\"\"/>\n                  ): tribute.type === \"rose\" ? (\n                    <img src={Rose2} className=\"tribute-icon\" alt=\"\"/>\n                    ): tribute.type === \"note\" ? (\n                      <img src={Note2} className=\"tribute-icon\" alt=\"\"/>\n                      ):\n                  null}\n                </div>\n                <div className=\"post-content\">\n                  <p className=\"poster-name\">Posted by {tribute.name} on {tribute.date}</p>\n                  <p className=\"post\">{tribute.tribute}</p>\n                </div>\n            </div>\n          </div>\n      );\n    });\n\n    // Logic for displaying page numbers\n    const pageNumbers = [];\n    for (let i = 1; i <= Math.ceil(tributes.length / tributesPerPage); i++) {\n      pageNumbers.push(i);\n    }\n\n    const renderPageNumbers = pageNumbers.map(number => {\n      return (\n        <li\n          className=\"pg-link\"\n          key={number}\n          id={number}\n          onClick={this.handleClick}\n        >\n          {number}\n        </li>\n      );\n    });\n\n    return (\n      <div>\n        <Header/>\n        \n        <div className=\"center-canvas\">\n          <div className=\"center-content\"><br/>\n            <h4>Tributes <img src={Pen} className=\"pen\" alt=\"\"/></h4>\n          </div>\n            <div className=\"query-field\">\n              Filter: <input name=\"query\" className=\"query-input\" placeholder=\" search tributes by name...\" onChange={this.queryField}/>\n            </div>\n            {renderTributes}\n            <div className=\"center-content\"><br/>\n              {renderPageNumbers}\n            </div><br/><br/>\n          <div className=\"post-tribute-card\">\n            <h4 className=\"text-blue\">Leave a Tribute <img src={Pen} className=\"pen\" alt=\"\"/></h4><br/>\n            <div className=\"remove-top-margin center-content\">\n              <div className=\"icons-set\">\n                <div>\n                    <a  onClick={this.candleSwitch}><img src={Candle2} className=\"post-tribute-icon\" alt=\"\"/><br/></a>\n                    <span>Light a Candle</span>\n                </div>\n                <div>\n                <a  onClick={this.roseSwitch}><img src={Rose2} className=\"post-tribute-icon\" alt=\"\"/><br/></a>\n                    <span>Lay a Flower</span>\n                </div>\n                <div>\n                <a  onClick={this.noteSwitch}><img src={Note2} className=\"post-tribute-icon\" alt=\"\"/><br/></a>\n                    <span>Leave a Note</span>\n                </div>\n              </div>\n            </div>\n            <div className=\"post-tribute-section\">\n              <div className=\"select-tribute\">\n                <img src={this.state.selectTribute} className=\"select-tribute-icon\" alt=\"\"/> \n              </div>\n              <div className=\"entry-form\">\n                <form onSubmit={this.handleTributePost} method=\"post\">\n                  <div class=\"form-group\">\n                    <textarea  ref={input => (_tribute = input)}  placeholder=\"Add your tribute text here...\" name=\"tribute\" type=\"text\" class=\"form-control\" maxlength=\"15000\" cols=\"20\" rows=\"5\" id=\"tribute-input\" required/>\n                  </div>\n                  <div class=\"form-group\">\n                    <input ref={input => (_name = input)} name=\"name\"  placeholder=\"Please enter your name\" type=\"text\" class=\"form-control\" id=\"name-input\" required/>\n                  </div>\n                  <button type=\"submit\" class=\"btn btn-primary float-right\">Publish Tribute</button>\n                </form>\n              </div>\n            </div>\n            <br/>\n            <br/>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Tribute;\n"]},"metadata":{},"sourceType":"module"}