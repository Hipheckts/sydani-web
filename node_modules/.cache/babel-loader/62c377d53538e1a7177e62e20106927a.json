{"ast":null,"code":"import _classCallCheck from\"/Users/hipheckt/codes/niyiogunwuyi/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hipheckt/codes/niyiogunwuyi/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/hipheckt/codes/niyiogunwuyi/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/hipheckt/codes/niyiogunwuyi/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/hipheckt/codes/niyiogunwuyi/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from\"axios\";import{Link}from\"react-router-dom\";// import Sound from 'react-sound';\nimport swal from'sweetalert';import $ from\"jquery\";import Header from'./common/Header';import Pen from\"./assets/images/icons/gallery.png\";import Pen2 from\"./assets/images/icons/video.png\";var _name,_tags;var Galleri=/*#__PURE__*/function(_Component){_inherits(Galleri,_Component);var _super=_createSuper(Galleri);function Galleri(props){var _this;_classCallCheck(this,Galleri);_this=_super.call(this,props);// let { user } = this.props.appstate;\n_this.fetchTributes=function(e){axios.get(\"\".concat(axios.defaults.baseURL,\"/videos\")).then(function(response){console.log(response);return response;}).then(function(json){if(json.data.success){_this.setState({tributes:json.data.tributes});}else alert(\"Fetching Tributes Failed!\");}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});};_this.handleTributePost=function(e){e.preventDefault();$(\"#upload-button\").attr(\"disabled\",\"disabled\").html(\"Uploading Video...\");var formData=new FormData();formData.append(\"name\",_name.value);formData.append(\"video\",_this.state.file);formData.append(\"tags\",_tags.value);console.log(formData);axios({method:'post',url:\"\".concat(axios.defaults.baseURL,\"/video\"),data:formData,headers:{'Content-Type':'multipart/form-data'}}).then(function(response){console.log(response);return response;}).then(function(json){var _json$data$tribute=json.data.tribute,id=_json$data$tribute.id,name=_json$data$tribute.name,video=_json$data$tribute.video,tags=_json$data$tribute.tags;var tributeData={id:id,name:name,video:video,tags:tags,timestamp:new Date().toString()};var appState={tribute:tributeData};// save app state with user date in local storage\nlocalStorage[\"appState\"]=JSON.stringify(appState);_this.setState({tribute:appState.tribute});if(json.data.success===true){swal(\"Published!\",\"\"+json.data.message,\"success\",{button:false,timer:1500});$(\"#name-input\").val('');$(\"#video-input\").val('');$(\"#tag-input\").val('');_this.fetchTributes();// redirect home\n// this.props.history.push(\"/dashboard\");\n}else{// alert(json.data.message);\nswal(\"Alert!\",\"\"+json.data.message,\"warning\",{button:false,timer:1500});$(\"#upload-button\").removeAttr(\"disabled\").html(\"Upload Video(Max. 10MB)\");}}).catch(function(error){// alert(\"An Error Occured!\" + error);\nconsole.log(error.response.data);swal(\"Warning!\",\"Select Video to Upload\",\"warning\",{button:false,timer:1500});$(\"#upload-button\").removeAttr(\"disabled\").html(\"Upload Video(Max. 10MB)\");});};_this.uploadVideo=function(e){_this.photoUpload.click();};_this.onChange=function(event){_this.setState({imageSource:'',imageData:'',file:event.target.files[0]});var file=event.target.files[0];console.log(file);if(file){var reader=new FileReader();reader.readAsDataURL(event.target.files[0]);reader.onload=function(event){_this.setState({imageSource:event.target.result,imageData:file});};}};_this.state={file:null,tributes:[],currentPage:1,tributesPerPage:50};_this.onChange=_this.onChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Galleri,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchTributes();}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,currentPage=_this$state.currentPage,tributesPerPage=_this$state.tributesPerPage;var tributesList=this.state.tributes;var indexOfLastTribute=currentPage*tributesPerPage;var indexOfFirstTribute=indexOfLastTribute-tributesPerPage;var currentTributes=tributesList.slice(indexOfFirstTribute,indexOfLastTribute);var renderTributes=currentTributes.map(function(tribute,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"gallery-videos\"},/*#__PURE__*/React.createElement(\"video\",{src:tribute.video,controls:true}));});// const { currentPage, tributesPerPage } = this.state;\n// Logic for displaying tributes\n// const tributesList = this.state.tributes;\n// const indexOfLastTribute = currentPage * tributesPerPage;\n// const indexOfFirstTribute = indexOfLastTribute - tributesPerPage;\n// const currentTributes = tributesList.slice(indexOfFirstTribute, indexOfLastTribute);\n// const renderTributes = currentTributes.map((tribute, index) => {\n// return (\n//         <img src={tribute.photo} key={tribute.id} className=\"gallery-image\" alt=\"\"/>\n// );\n// });\nreturn/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"div\",{className:\"center-canvas\"},/*#__PURE__*/React.createElement(\"div\",{className:\"gallery-menu\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Link,{to:\"gallery\",className:\"gallery-menu-item\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Photos \",/*#__PURE__*/React.createElement(\"img\",{src:Pen,className:\"pen\",alt:\"\"}))),/*#__PURE__*/React.createElement(Link,{to:\"videos\",className:\"gallery-menu-item\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Videos \",/*#__PURE__*/React.createElement(\"img\",{src:Pen2,className:\"pen\",alt:\"\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"video-grid\"},renderTributes),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"clear\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"post-tribute-card\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"text-blue\"},\"Upload Video \",/*#__PURE__*/React.createElement(\"img\",{src:Pen2,className:\"pen\",alt:\"\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"post-tribute-section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"story-entry-form\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleTributePost,method:\"post\",id:\"upload-form\"},/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _this2.photoUpload=input;},onChange:this.onChange,name:\"photo\",type:\"file\",accept:\"video/*\",class:\"form-control image-input\",id:\"video-input\",required:true})),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _name=input;},name:\"name\",placeholder:\"Please enter your name\",type:\"text\",class:\"form-control\",id:\"name-input\",required:true})),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _tags=input;},name:\"tags\",placeholder:\"Tag friends and family, separate with comma\",type:\"text\",class:\"form-control\",id:\"tag-input\"})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",id:\"upload-button\",class:\"btn btn-primary float-right\"},\"Upload Video(Max. 10MB)\"))))))));}}]);return Galleri;}(Component);export{Galleri as default};","map":{"version":3,"sources":["/Users/hipheckt/codes/niyiogunwuyi/react/src/Videos.js"],"names":["React","Component","axios","Link","swal","$","Header","Pen","Pen2","_name","_tags","Galleri","props","fetchTributes","e","get","defaults","baseURL","then","response","console","log","json","data","success","setState","tributes","alert","catch","error","handleTributePost","preventDefault","attr","html","formData","FormData","append","value","state","file","method","url","headers","tribute","id","name","video","tags","tributeData","timestamp","Date","toString","appState","localStorage","JSON","stringify","message","button","timer","val","removeAttr","uploadVideo","photoUpload","click","onChange","event","imageSource","imageData","target","files","reader","FileReader","readAsDataURL","onload","result","currentPage","tributesPerPage","bind","tributesList","indexOfLastTribute","indexOfFirstTribute","currentTributes","slice","renderTributes","map","index","input"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n// import Sound from 'react-sound';\nimport swal from 'sweetalert';\nimport $ from \"jquery\";\n\nimport Header from './common/Header'\n\nimport Pen from \"./assets/images/icons/gallery.png\";\nimport Pen2 from \"./assets/images/icons/video.png\";\n\nvar _name, _tags;\n\n\nexport default class Galleri extends Component {\n    constructor(props) {\n        super(props);\n        // let { user } = this.props.appstate;\n        this.state = {\n          file: null,\n          tributes: [],\n          currentPage: 1,\n          tributesPerPage: 50\n        };\n        this.onChange = this.onChange.bind(this);\n      }\n\n      componentDidMount() {\n        this.fetchTributes();\n      }\n      \n      fetchTributes = e => {\n        axios\n          .get(`${axios.defaults.baseURL}/videos`)\n          .then(response => {\n            console.log(response);\n            return response;\n          })\n          .then(json => {\n            if (json.data.success) {\n              this.setState({ tributes: json.data.tributes });\n            } else alert(\"Fetching Tributes Failed!\");\n          })\n          .catch(error => {\n            console.error(`An Error Occured! ${error}`);\n          });\n      }\n    \n      handleTributePost = e => {\n        e.preventDefault();\n\n        $(\"#upload-button\")\n        .attr(\"disabled\", \"disabled\")\n        .html(\"Uploading Video...\");\n    \n        var formData = new FormData();\n        formData.append(\"name\", _name.value);\n        formData.append(\"video\", this.state.file);\n        formData.append(\"tags\", _tags.value);\n    \n        console.log(formData);\n    \n      axios({\n          method: 'post',\n          url: `${axios.defaults.baseURL}/video`,\n          data: formData,\n            headers: {'Content-Type': 'multipart/form-data' }\n            })\n        .then(response => {\n          console.log(response);\n          return response;\n        })\n        .then(json => {\n          const { id, name, video, tags } = json.data.tribute;\n          let tributeData = {\n            id,\n            name,\n            video,\n            tags,\n            timestamp: new Date().toString()\n          };\n          let appState = {\n            tribute: tributeData\n          };\n          // save app state with user date in local storage\n          localStorage[\"appState\"] = JSON.stringify(appState);\n          this.setState({\n            tribute: appState.tribute,\n          });\n    \n          if (json.data.success === true) {\n            swal(\"Published!\", \"\" + json.data.message, \"success\", {\n              button: false,\n              timer: 1500\n            });\n            $(\"#name-input\").val('');\n            $(\"#video-input\").val('');\n            $(\"#tag-input\").val('');\n            this.fetchTributes();\n            // redirect home\n            // this.props.history.push(\"/dashboard\");\n          } else {\n            // alert(json.data.message);\n            swal(\"Alert!\", \"\" + json.data.message, \"warning\", {\n              button: false,\n              timer: 1500\n            });\n            $(\"#upload-button\")\n              .removeAttr(\"disabled\")\n              .html(\"Upload Video(Max. 10MB)\");\n          }\n          \n        })\n        .catch(error => {\n          // alert(\"An Error Occured!\" + error);\n          console.log(error.response.data);\n          swal(\"Warning!\", \"Select Video to Upload\", \"warning\", {\n            button: false,\n            timer: 1500\n          });\n          $(\"#upload-button\")\n              .removeAttr(\"disabled\")\n              .html(\"Upload Video(Max. 10MB)\");\n        });\n      };\n\n    uploadVideo = e => {\n    this.photoUpload.click();\n    };\n\n    onChange = event => {\n    this.setState({ imageSource: '', imageData: '', file:event.target.files[0] });\n    const file = event.target.files[0];\n    console.log(file);\n\n    if (file) {\n        let reader = new FileReader();\n        reader.readAsDataURL(event.target.files[0]);\n        reader.onload = event => {\n        this.setState({\n            imageSource: event.target.result,\n            imageData: file\n        });\n        };\n    }\n    };\n    \n    render() {\n        const { currentPage, tributesPerPage } = this.state;\n\n        const tributesList = this.state.tributes;\n        const indexOfLastTribute = currentPage * tributesPerPage;\n        const indexOfFirstTribute = indexOfLastTribute - tributesPerPage;\n        const currentTributes = tributesList.slice(indexOfFirstTribute, indexOfLastTribute);\n        \n        const renderTributes = currentTributes.map((tribute, index) => {\n            return (\n                <div className=\"gallery-videos\">\n                    <video src={tribute.video} controls></video>\n                </div>\n            );\n        });\n        \n    // const { currentPage, tributesPerPage } = this.state;\n\n    // Logic for displaying tributes\n    // const tributesList = this.state.tributes;\n    // const indexOfLastTribute = currentPage * tributesPerPage;\n    // const indexOfFirstTribute = indexOfLastTribute - tributesPerPage;\n    // const currentTributes = tributesList.slice(indexOfFirstTribute, indexOfLastTribute);\n\n    // const renderTributes = currentTributes.map((tribute, index) => {\n    // return (\n    //         <img src={tribute.photo} key={tribute.id} className=\"gallery-image\" alt=\"\"/>\n    // );\n    // });\n        return (\n            <div>\n                <Header/>\n                <div className=\"center-canvas\">\n                <div className=\"gallery-menu\"><br/>\n                    <Link to=\"gallery\" className=\"gallery-menu-item\"><h4>Photos <img src={Pen} className=\"pen\" alt=\"\"/></h4></Link>\n                    <Link to=\"videos\" className=\"gallery-menu-item\"><h4>Videos <img src={Pen2} className=\"pen\" alt=\"\"/></h4></Link>\n                </div>\n                <div className=\"video-grid\">\n                    {renderTributes}\n                </div>\n                <div><br/><br/>\n                <div className=\"clear\"></div>\n                <div className=\"post-tribute-card\">\n                <h4 className=\"text-blue\">Upload Video <img src={Pen2} className=\"pen\" alt=\"\"/></h4><br/>\n                        <div className=\"post-tribute-section\">\n                        <div className=\"story-entry-form\">\n                            <form onSubmit={this.handleTributePost} method=\"post\" id=\"upload-form\">\n                            <div class=\"form-group\">\n                                <input ref={input => (this.photoUpload = input)} onChange= {this.onChange} name=\"photo\" type=\"file\" accept=\"video/*\" class=\"form-control image-input\" id=\"video-input\" required/>\n                            </div>\n                            <div class=\"form-group\">\n                                <input ref={input => (_name = input)} name=\"name\"  placeholder=\"Please enter your name\" type=\"text\" class=\"form-control\" id=\"name-input\" required/>\n                            </div>\n                            <div class=\"form-group\">\n                                <input ref={input => (_tags = input)} name=\"tags\"  placeholder=\"Tag friends and family, separate with comma\" type=\"text\" class=\"form-control\" id=\"tag-input\"/>\n                            </div>\n                            <button type=\"submit\" id=\"upload-button\" class=\"btn btn-primary float-right\">Upload Video(Max. 10MB)</button>\n                            </form>\n                        </div>\n                        </div>\n                    </div>\n                </div>\n                </div>\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}