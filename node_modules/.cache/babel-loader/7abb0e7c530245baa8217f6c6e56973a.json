{"ast":null,"code":"import _classCallCheck from\"/Users/hipheckt/codes/evestng/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hipheckt/codes/evestng/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/hipheckt/codes/evestng/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/hipheckt/codes/evestng/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Header from\"../common/Header\";import Sidebar from\"./Sidebar\";import{format}from\"date-fns\";import{Link}from\"react-router-dom\";import NumberFormat from\"react-number-format\";import axios from\"axios\";import swal from\"sweetalert\";import $ from\"jquery\";export var UserPlans=/*#__PURE__*/function(_Component){_inherits(UserPlans,_Component);var _super=_createSuper(UserPlans);function UserPlans(props){var _this;_classCallCheck(this,UserPlans);_this=_super.call(this,props);_this.state={token:localStorage[\"appState\"]?JSON.parse(localStorage[\"appState\"]).user.token:\"\",user:[],my_homes:[],my_lands:[]};return _this;}_createClass(UserPlans,[{key:\"componentDidMount\",value:function componentDidMount(){this.getUser();this.getMyHomes();this.getMyLands();}},{key:\"getUser\",value:function getUser(){var _this2=this;var id=window.location.href.split('/')[window.location.href.split('/').length-1];axios.get(\"\".concat(axios.defaults.baseURL,\"/user/\").concat(id),{headers:{Authorization:\"Bearer \".concat(this.state.token)}}).then(function(response){//console.log(response);\nreturn response;}).then(function(json){if(json.data.success){_this2.setState({user:json.data.user[0]});// } else alert(\"Cannot Fetch Data!\");\n}else swal(\"Oops!\",\"Cannot Fetch Data!\",\"error\");}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});// alert(id)\n}},{key:\"getMyHomes\",value:function getMyHomes(){var _this3=this;var id=window.location.href.split('/')[window.location.href.split('/').length-1];axios.get(\"\".concat(axios.defaults.baseURL,\"/my-homes/\").concat(id)).then(function(response){console.log(response);return response;}).then(function(json){if(json.data.success){_this3.setState({my_homes:json.data.my_homes});}else{//console.log(`Cannot fetch data!`);\n}}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});}},{key:\"getMyLands\",value:function getMyLands(){var _this4=this;var id=window.location.href.split('/')[window.location.href.split('/').length-1];axios.get(\"\".concat(axios.defaults.baseURL,\"/my-lands/\").concat(id)).then(function(response){//console.log(response);\nreturn response;}).then(function(json){if(json.data.success){_this4.setState({my_lands:json.data.my_homes});}else{//console.log(`Cannot fetch data!`);\n}}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});}},{key:\"updatePayment\",value:function updatePayment(id){axios({method:'get',url:\"\".concat(axios.defaults.baseURL,\"/home-update-payment/\").concat(id)}).then(function(response){//console.log(response);\nreturn response;});this.getMyHomes();this.getMyLands();}},{key:\"render\",value:function render(){var _this5=this;return/*#__PURE__*/React.createElement(\"div\",{id:\"app\",className:\"bg-gray-200\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dashboard-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"private-layout\"},/*#__PURE__*/React.createElement(\"div\",{className:\"app-wrapper\"},/*#__PURE__*/React.createElement(Sidebar,null),/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"div\",{id:\"main-app\",className:\"position-relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"page-title\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row text-primary py-2 pt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-welcome\",style:{overflow:\"hidden\"}},/*#__PURE__*/React.createElement(Link,{to:\"/admin/users-list\"},/*#__PURE__*/React.createElement(\"i\",{className:\"ti-arrow-left\"}),\" Back to Users List\"),/*#__PURE__*/React.createElement(\"div\",{className:\"wrapper d-flex mt-2\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"d-inline-block\"},\"Active Plans for \",this.state.user.fname,\" \",this.state.user.lname)))),/*#__PURE__*/React.createElement(\"div\",{className:\"text-right col-2\"}))),/*#__PURE__*/React.createElement(\"table\",{class:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{class:\"thead-dark\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Evest Plans\")))),this.state.my_homes!=\"\"?/*#__PURE__*/React.createElement(\"div\",null,this.state.my_homes.map(function(my_homes,index){return/*#__PURE__*/React.createElement(\"div\",{\"data-v-22924209\":\"\",class:\"dash-card-plan bg-white mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 text-center\"},/*#__PURE__*/React.createElement(Link,{to:{pathname:\"view-home/\".concat(my_homes.id)}},/*#__PURE__*/React.createElement(\"img\",{src:my_homes.image,className:\"plan-img p-2\",alt:\"\"})),_this5.state.user.type==1?/*#__PURE__*/React.createElement(Link,{onClick:_this5.updatePayment.bind(_this5,my_homes.id),className:\"btn mr-2 btn-warning\"},\"Add Payment (+1)\"):null),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-4\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"text-primary mb-1 titlecase\"},my_homes.name),/*#__PURE__*/React.createElement(\"h6\",{className:\"text-primary mb-0 titlecase\"},/*#__PURE__*/React.createElement(NumberFormat,{value:my_homes.price,displayType:\"text\",thousandSeparator:true,prefix:\"₦\"}),\" \",my_homes.type),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 titlecase\"},/*#__PURE__*/React.createElement(\"b\",null,\"Payments:\"),\" \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(NumberFormat,{value:my_homes.payments*my_homes.price,displayType:\"text\",thousandSeparator:true,prefix:\"₦\"}),\" \",\"(\",my_homes.payments,\")\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 titlecase\"},/*#__PURE__*/React.createElement(\"b\",null,\"Duration:\"),\" \",/*#__PURE__*/React.createElement(\"br\",null),my_homes.duration,\" \",my_homes.type==\"monthly\"?\"Months\":my_homes.type==\"weekly\"?\"Weeks\":null)),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 titlecase\"},/*#__PURE__*/React.createElement(\"b\",null,\"Total:\"),\" \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(NumberFormat,{value:my_homes.total,displayType:\"text\",thousandSeparator:true,prefix:\"₦\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 titlecase\"},/*#__PURE__*/React.createElement(\"span\",{style:{color:\"green\"}},\"LAST PAYMENT:\"),\" \",/*#__PURE__*/React.createElement(\"br\",null),my_homes.payment_date)),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 titlecase\"},/*#__PURE__*/React.createElement(\"span\",{style:{color:\"green\"}},\"START DATE:\"),\" \",/*#__PURE__*/React.createElement(\"br\",null),my_homes.start_date)),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 titlecase\"},/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"END DATE:\"),\" \",/*#__PURE__*/React.createElement(\"br\",null),my_homes.end_date)))))));})):/*#__PURE__*/React.createElement(\"div\",{\"data-v-22924209\":\"\",class:\"empty-placeholder dash-card bg-white\"},this.state.user.fname,\" \",this.state.user.lname,\" has no active evest plans yet.\"),/*#__PURE__*/React.createElement(\"table\",{class:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{class:\"thead-dark\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Landvest Plans\")))),this.state.my_lands!=\"\"?/*#__PURE__*/React.createElement(\"div\",null,this.state.my_lands.map(function(my_lands,index){return/*#__PURE__*/React.createElement(\"div\",{\"data-v-22924209\":\"\",class:\"dash-card-plan bg-white mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 text-center\"},/*#__PURE__*/React.createElement(Link,{to:{pathname:\"view-home/\".concat(my_lands.id)}},/*#__PURE__*/React.createElement(\"img\",{src:my_lands.image,className:\"plan-img p-2\",alt:\"\"})),_this5.state.user.type==1?/*#__PURE__*/React.createElement(Link,{onClick:_this5.updatePayment.bind(_this5,my_lands.id),className:\"btn mr-2 btn-warning\"},\"Add Payment (+1)\"):null),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-4\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"text-primary mb-1 titlecase\"},my_lands.name),/*#__PURE__*/React.createElement(\"h6\",{className:\"text-primary mb-0 titlecase\"},/*#__PURE__*/React.createElement(NumberFormat,{value:my_lands.price,displayType:\"text\",thousandSeparator:true,prefix:\"₦\"}),\" \",my_lands.type),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 titlecase\"},/*#__PURE__*/React.createElement(\"b\",null,\"Payments:\"),\" \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(NumberFormat,{value:my_lands.payments*my_lands.price,displayType:\"text\",thousandSeparator:true,prefix:\"₦\"}),\" \",\"(\",my_lands.payments,\")\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 titlecase\"},/*#__PURE__*/React.createElement(\"b\",null,\"Duration:\"),\" \",/*#__PURE__*/React.createElement(\"br\",null),my_lands.duration,\" \",my_lands.type==\"monthly\"?\"Months\":my_lands.type==\"weekly\"?\"Weeks\":null)),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 titlecase\"},/*#__PURE__*/React.createElement(\"b\",null,\"Total:\"),\" \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(NumberFormat,{value:my_lands.total,displayType:\"text\",thousandSeparator:true,prefix:\"₦\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 titlecase\"},/*#__PURE__*/React.createElement(\"span\",{style:{color:\"green\"}},\"LAST PAYMENT:\"),\" \",/*#__PURE__*/React.createElement(\"br\",null),my_lands.payment_date)),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 titlecase\"},/*#__PURE__*/React.createElement(\"span\",{style:{color:\"green\"}},\"START DATE:\"),\" \",/*#__PURE__*/React.createElement(\"br\",null),my_lands.start_date)),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 titlecase\"},/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"EXPECTED END DATE:\"),\" \",/*#__PURE__*/React.createElement(\"br\",null),my_lands.end_date)))))));})):/*#__PURE__*/React.createElement(\"div\",{\"data-v-22924209\":\"\",class:\"empty-placeholder dash-card bg-white\"},this.state.user.fname,\" \",this.state.user.lname,\" has no active landvest plans yet.\"))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null)))));}}]);return UserPlans;}(Component);export default UserPlans;","map":{"version":3,"sources":["/Users/hipheckt/codes/evestng/react/src/admin/UserPlans.js"],"names":["React","Component","Header","Sidebar","format","Link","NumberFormat","axios","swal","$","UserPlans","props","state","token","localStorage","JSON","parse","user","my_homes","my_lands","getUser","getMyHomes","getMyLands","id","window","location","href","split","length","get","defaults","baseURL","headers","Authorization","then","response","json","data","success","setState","catch","error","console","log","method","url","overflow","fname","lname","map","index","pathname","image","type","updatePayment","bind","name","price","payments","duration","total","color","payment_date","start_date","end_date"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Header from \"../common/Header\";\nimport Sidebar from \"./Sidebar\";\nimport { format } from \"date-fns\";\n\nimport { Link } from \"react-router-dom\";\n\nimport NumberFormat from \"react-number-format\";\n\nimport axios from \"axios\";\nimport swal from \"sweetalert\";\nimport $ from \"jquery\";\n\nexport class UserPlans extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: localStorage[\"appState\"]\n        ? JSON.parse(localStorage[\"appState\"]).user.token\n        : \"\",\n      user: [],\n      my_homes: [],\n      my_lands: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getUser();\n    this.getMyHomes();\n    this.getMyLands();\n  }\n\n  getUser() {\n    let id = window.location.href.split('/')[window.location.href.split('/').length - 1];\n\n    axios\n      .get(\n        `${axios.defaults.baseURL}/user/${id}`,\n        {\n          headers: {\n            Authorization: `Bearer ${this.state.token}`,\n          },\n        }\n      )\n      .then((response) => {\n        //console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({ user: json.data.user[0] });\n          // } else alert(\"Cannot Fetch Data!\");\n        } else swal(\"Oops!\", \"Cannot Fetch Data!\", \"error\");\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n    // alert(id)\n  }\n\n  getMyHomes() {\n\n    let id = window.location.href.split('/')[window.location.href.split('/').length - 1];\n\n    axios\n      .get(\n        `${axios.defaults.baseURL}/my-homes/${id}`\n      )\n      .then((response) => {\n        console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({\n            my_homes: json.data.my_homes,\n          });\n        } else {\n          //console.log(`Cannot fetch data!`);\n        }\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n  }\n\n  getMyLands() {\n    let id = window.location.href.split('/')[window.location.href.split('/').length - 1];\n\n    axios\n      .get(\n        `${axios.defaults.baseURL}/my-lands/${id}`\n      )\n      .then((response) => {\n        //console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({\n            my_lands: json.data.my_homes,\n          });\n        } else {\n          //console.log(`Cannot fetch data!`);\n        }\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n  }\n\n  updatePayment(id) {\n    axios({\n        method: 'get',\n        url: `${axios.defaults.baseURL}/home-update-payment/${id}`\n        })\n      .then((response) => {\n        //console.log(response);\n        return response;\n      });\n\n    this.getMyHomes();\n    this.getMyLands();\n  };\n\n  render() {\n    return (\n      <div id=\"app\" className=\"bg-gray-200\">\n        <div className=\"dashboard-page\">\n          <div className=\"private-layout\">\n            <div className=\"app-wrapper\">\n              <Sidebar />\n              <Header />\n              <div id=\"main-app\" className=\"position-relative\">\n                <div className=\"container mt-4\">\n                  <div className=\"page-title\">\n                    <div className=\"row text-primary py-2 pt-4\">\n                      <div className=\"col-10\">\n                        <div\n                          className=\"user-welcome\"\n                          style={{ overflow: \"hidden\" }}\n                        >\n                            <Link to=\"/admin/users-list\">\n                            <i className=\"ti-arrow-left\"></i> Back to Users List\n                        </Link>\n                          <div className=\"wrapper d-flex mt-2\">\n                            <h4 className=\"d-inline-block\">Active Plans for {this.state.user.fname} {this.state.user.lname}</h4>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"text-right col-2\"></div>\n                    </div>\n                  </div>\n                  <table class=\"table\">\n                  <thead class=\"thead-dark\">\n                    <tr>\n                      <th scope=\"col\">Evest Plans</th>\n                    </tr>\n                  </thead>\n                  </table>\n                  {this.state.my_homes != \"\" ? (\n                    <div>\n                      {this.state.my_homes.map((my_homes, index) => (\n                        <div\n                          data-v-22924209=\"\"\n                          class=\"dash-card-plan bg-white mb-4\"\n                        >\n                          <div className=\"row\">\n                            <div className=\"col-md-4 text-center\">\n                              <Link\n                                to={{ pathname: `view-home/${my_homes.id}` }}\n                              >\n                                <img\n                                  src={my_homes.image}\n                                  className=\"plan-img p-2\"\n                                  alt=\"\"\n                                />\n                              </Link>\n                              {this.state.user.type == 1 ? (\n                                <Link onClick={this.updatePayment.bind(this, my_homes.id)} className=\"btn mr-2 btn-warning\">\n                                    Add Payment (+1)\n                                </Link>\n                              ) : null\n                              }\n                            </div>\n                            <div className=\"col-md-8\">\n                              <div className=\"p-4\">\n                                <h5 className=\"text-primary mb-1 titlecase\">\n                                  {my_homes.name}\n                                </h5>\n                                <h6 className=\"text-primary mb-0 titlecase\">\n                                  <NumberFormat\n                                    value={my_homes.price}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    prefix={\"₦\"}\n                                  />{\" \"}\n                                  {my_homes.type}\n                                </h6>\n                                <br />\n                                <div className=\"row mb-2\">\n                                  <div className=\"col\">\n                                    <p className=\"mb-1 titlecase\">\n                                      <b>Payments:</b> <br />\n                                      <NumberFormat\n                                        value={\n                                          my_homes.payments * my_homes.price\n                                        }\n                                        displayType={\"text\"}\n                                        thousandSeparator={true}\n                                        prefix={\"₦\"}\n                                      />{\" \"}\n                                      ({my_homes.payments})\n                                    </p>\n                                  </div>\n                                  <div className=\"col\">\n                                    <p className=\"mb-1 titlecase\">\n                                      <b>Duration:</b> <br />\n                                      {my_homes.duration}{\" \"}\n                                      {my_homes.type == \"monthly\"\n                                        ? \"Months\"\n                                        : my_homes.type == \"weekly\"\n                                        ? \"Weeks\"\n                                        : null}\n                                    </p>\n                                  </div>\n                                  <div className=\"col\">\n                                    <p className=\"mb-1 titlecase\">\n                                      <b>Total:</b> <br />\n                                      <NumberFormat\n                                        value={my_homes.total}\n                                        displayType={\"text\"}\n                                        thousandSeparator={true}\n                                        prefix={\"₦\"}\n                                      />\n                                    </p>\n                                  </div>\n                                </div>\n                                <div className=\"row\">\n                                  <div className=\"col\">\n                                    <p className=\"mb-1 titlecase\">\n                                      <span style={{ color: \"green\" }}>\n                                        LAST PAYMENT:\n                                      </span>{\" \"}\n                                      <br />\n                                      {my_homes.payment_date}\n                                      {/* {format(Date(my_homes.created_at), \"MMMM Do, YYYY\")} */}\n                                    </p>\n                                  </div>\n                                  <div className=\"col\">\n                                    <p className=\"mb-1 titlecase\">\n                                      <span style={{ color: \"green\" }}>\n                                        START DATE:\n                                      </span>{\" \"}\n                                      <br />\n                                      {my_homes.start_date}\n                                    </p>\n                                  </div>\n                                  <div className=\"col\">\n                                    <p className=\"mb-1 titlecase\">\n                                      <span style={{ color: \"red\" }}>\n                                        END DATE:\n                                      </span>{\" \"}\n                                      <br />\n                                      {my_homes.end_date}\n                                    </p>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div\n                      data-v-22924209=\"\"\n                      class=\"empty-placeholder dash-card bg-white\"\n                    >\n                      {this.state.user.fname} {this.state.user.lname} has no active evest plans yet.\n                    </div>\n                  )}\n                  <table class=\"table\">\n                  <thead class=\"thead-dark\">\n                    <tr>\n                      <th scope=\"col\">Landvest Plans</th>\n                    </tr>\n                  </thead>\n                  </table>\n                  {this.state.my_lands != \"\" ? (\n                    <div>\n                      {this.state.my_lands.map((my_lands, index) => (\n                        <div\n                          data-v-22924209=\"\"\n                          class=\"dash-card-plan bg-white mb-4\"\n                        >\n                          <div className=\"row\">\n                            <div className=\"col-md-4 text-center\">\n                              <Link\n                                to={{ pathname: `view-home/${my_lands.id}` }}\n                              >\n                                <img\n                                  src={my_lands.image}\n                                  className=\"plan-img p-2\"\n                                  alt=\"\"\n                                />\n                              </Link>\n                              {this.state.user.type == 1 ? (\n                                <Link onClick={this.updatePayment.bind(this, my_lands.id)} className=\"btn mr-2 btn-warning\">\n                                    Add Payment (+1)\n                                </Link>\n                              ) : null\n                              }\n                            </div>\n                            <div className=\"col-md-6\">\n                              <div className=\"p-4\">\n                                <h5 className=\"text-primary mb-1 titlecase\">\n                                  {my_lands.name}\n                                </h5>\n                                <h6 className=\"text-primary mb-0 titlecase\">\n                                  <NumberFormat\n                                    value={my_lands.price}\n                                    displayType={\"text\"}\n                                    thousandSeparator={true}\n                                    prefix={\"₦\"}\n                                  />{\" \"}\n                                  {my_lands.type}\n                                </h6>\n                                <br />\n                                <div className=\"row mb-2\">\n                                  <div className=\"col\">\n                                    <p className=\"mb-1 titlecase\">\n                                      <b>Payments:</b> <br />\n                                      <NumberFormat\n                                        value={\n                                          my_lands.payments * my_lands.price\n                                        }\n                                        displayType={\"text\"}\n                                        thousandSeparator={true}\n                                        prefix={\"₦\"}\n                                      />{\" \"}\n                                      ({my_lands.payments})\n                                    </p>\n                                  </div>\n                                  <div className=\"col\">\n                                    <p className=\"mb-1 titlecase\">\n                                      <b>Duration:</b> <br />\n                                      {my_lands.duration}{\" \"}\n                                      {my_lands.type == \"monthly\"\n                                        ? \"Months\"\n                                        : my_lands.type == \"weekly\"\n                                        ? \"Weeks\"\n                                        : null}\n                                    </p>\n                                  </div>\n                                  <div className=\"col\">\n                                    <p className=\"mb-1 titlecase\">\n                                      <b>Total:</b> <br />\n                                      <NumberFormat\n                                        value={my_lands.total}\n                                        displayType={\"text\"}\n                                        thousandSeparator={true}\n                                        prefix={\"₦\"}\n                                      />\n                                    </p>\n                                  </div>\n                                </div>\n                                <div className=\"row\">\n                                  <div className=\"col\">\n                                    <p className=\"mb-1 titlecase\">\n                                      <span style={{ color: \"green\" }}>\n                                        LAST PAYMENT:\n                                      </span>{\" \"}\n                                      <br />\n                                      {my_lands.payment_date}\n                                    </p>\n                                  </div>\n                                  <div className=\"col\">\n                                    <p className=\"mb-1 titlecase\">\n                                      <span style={{ color: \"green\" }}>\n                                        START DATE:\n                                      </span>{\" \"}\n                                      <br />\n                                      {my_lands.start_date}\n                                    </p>\n                                  </div>\n                                  <div className=\"col\">\n                                    <p className=\"mb-1 titlecase\">\n                                      <span style={{ color: \"red\" }}>\n                                        EXPECTED END DATE:\n                                      </span>{\" \"}\n                                      <br />\n                                      {my_lands.end_date}\n                                    </p>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div\n                      data-v-22924209=\"\"\n                      class=\"empty-placeholder dash-card bg-white\"\n                    >\n                      {this.state.user.fname} {this.state.user.lname} has no active landvest plans yet.\n                    </div>\n                  )}\n                </div>\n              </div>\n              <br />\n              <br />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default UserPlans;\n"]},"metadata":{},"sourceType":"module"}