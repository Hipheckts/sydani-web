{"ast":null,"code":"import _classCallCheck from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";// import { Link } from \"react-router-dom\";\nimport swal from'sweetalert';import $ from\"jquery\";import NumberFormat from'react-number-format';import Avatar from\"../assets/img/default-user-avatar.png\";import Header from\"../common/Header\";import Sidebar from\"./Sidebar\";import{Link}from\"react-router-dom\";var _home_id;export var UsersList=/*#__PURE__*/function(_Component){_inherits(UsersList,_Component);var _super=_createSuper(UsersList);function UsersList(props){var _this;_classCallCheck(this,UsersList);_this=_super.call(this,props);_this.queryField=function(e){e.preventDefault();_this.setState({query:e.target.value});axios.get(\"\".concat(axios.defaults.baseURL,\"/search-users/\").concat(_this.state.query)).then(function(response){//console.log(response);\nreturn response;}).then(function(json){if(json.data.success){_this.setState({users:json.data.users});}else alert(\"Fetching Users Failed!\");}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});};_this.fetchUsers=function(e){axios.get(\"\".concat(axios.defaults.baseURL,\"/users/list\"),{headers:{Authorization:\"Bearer \".concat(_this.state.token)}}).then(function(response){//console.log(response);\nreturn response;}).then(function(json){if(json.data.success){_this.setState({users:json.data.users,isLoading:false});}else alert(\"Fetching Users Failed!\");}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});};_this.state={token:localStorage[\"appState\"]?JSON.parse(localStorage[\"appState\"]).user.token:\"\",users:[],users_total:\"\",currentPage:1,usersPerPage:20,query:\"\",isLoading:true};_this.handleClick=_this.handleClick.bind(_assertThisInitialized(_this));return _this;}_createClass(UsersList,[{key:\"handleClick\",value:function handleClick(event){event.preventDefault();this.setState({currentPage:Number(event.target.id)});}},{key:\"componentDidMount\",value:function componentDidMount(){this.fetchUsers();this.getChartData();}},{key:\"getChartData\",value:function getChartData(){var _this2=this;axios.get(\"\".concat(axios.defaults.baseURL,\"/chart/\").concat(JSON.parse(localStorage[\"appState\"]).user.id),{headers:{Authorization:\"Bearer \".concat(this.state.token)}}).then(function(response){// console.log(response);\nreturn response;}).then(function(json){if(json.data.success){_this2.setState({users_total:json.data.users_total});// } else alert(\"Cannot Fetch Data!\");\n}else swal(\"Oops!\",\"Cannot Fetch Data!\",\"error\");}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,users=_this$state.users,currentPage=_this$state.currentPage,usersPerPage=_this$state.usersPerPage,isLoading=_this$state.isLoading;// Logic for displaying users\nvar usersList=this.state.users;var indexOfLastUser=currentPage*usersPerPage;var indexOfFirstUser=indexOfLastUser-usersPerPage;var currentUsers=usersList.slice(indexOfFirstUser,indexOfLastUser);// Logic for displaying page numbers\nvar pageNumbers=[];for(var i=1;i<=Math.ceil(users.length/usersPerPage);i++){pageNumbers.push(i);}var renderPageNumbers=pageNumbers.map(function(number){return/*#__PURE__*/React.createElement(React.Fragment,null,number==currentPage?/*#__PURE__*/React.createElement(\"li\",{className:\"pg-link active-link\",key:number,id:number,onClick:_this3.handleClick},number):/*#__PURE__*/React.createElement(\"li\",{className:\"pg-link\",key:number,id:number,onClick:_this3.handleClick},number));});return/*#__PURE__*/React.createElement(\"div\",{id:\"app\",className:\"bg-gray-200\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dashboard-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"private-layout\"},/*#__PURE__*/React.createElement(\"div\",{className:\"app-wrapper\"},/*#__PURE__*/React.createElement(Sidebar,null),/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"div\",{id:\"main-app\",className:\"position-relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"page-title\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row text-primary pt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-welcome\",style:{overflow:\"hidden\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"wrapper d-flex\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"d-inline-block\"},\"All Users (\",this.state.users_total,\")\",/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-users\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"float-right\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"query\",className:\"form-control\",placeholder:\" Search users by name or email...\",onChange:this.queryField})))),/*#__PURE__*/React.createElement(\"div\",{className:\"text-right col-2\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-4 align-items-stretch\"},/*#__PURE__*/React.createElement(\"table\",{class:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{class:\"thead-dark\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Avatar\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Firstname\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Lastname\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Email\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Telephone\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Action\"))),/*#__PURE__*/React.createElement(\"tbody\",null,isLoading?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"tr\",{className:\"blink_me\"},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"img\",{src:Avatar,className:\"user-list-avatar\",alt:\"user\"})),/*#__PURE__*/React.createElement(\"td\",null,\"Loading...\"),/*#__PURE__*/React.createElement(\"td\",null,\"Loading...\"),/*#__PURE__*/React.createElement(\"td\",null,\"Loading...\"),/*#__PURE__*/React.createElement(\"td\",null,\"Loading...\"),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/admin/user-details/\"},className:\"btn mr-2 btn-primary\"},\"View Details\"),/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/admin/user-plans/\"},className:\"btn mr-2 btn-warning\"},\"View Plans\")))):/*#__PURE__*/React.createElement(React.Fragment,null,currentUsers.map(function(user,index){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"img\",{src:user.image||Avatar,className:\"user-list-avatar\",alt:\"user\"})),/*#__PURE__*/React.createElement(\"td\",null,user.fname),/*#__PURE__*/React.createElement(\"td\",null,user.lname),/*#__PURE__*/React.createElement(\"td\",null,user.email),/*#__PURE__*/React.createElement(\"td\",null,user.phone),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/admin/user-details/\".concat(user.id)},className:\"btn mr-2 btn-primary\"},\"View Details\"),/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/admin/user-plans/\".concat(user.id)},className:\"btn mr-2 btn-warning\"},\"View Plans\")));})))))),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},renderPageNumbers),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null))))));}}]);return UsersList;}(Component);export default UsersList;","map":{"version":3,"sources":["/Users/hipheckt/codes/sapioclub/react/src/admin/Users.js"],"names":["React","Component","axios","swal","$","NumberFormat","Avatar","Header","Sidebar","Link","_home_id","UsersList","props","queryField","e","preventDefault","setState","query","target","value","get","defaults","baseURL","state","then","response","json","data","success","users","alert","catch","error","console","fetchUsers","headers","Authorization","token","isLoading","localStorage","JSON","parse","user","users_total","currentPage","usersPerPage","handleClick","bind","event","Number","id","getChartData","usersList","indexOfLastUser","indexOfFirstUser","currentUsers","slice","pageNumbers","i","Math","ceil","length","push","renderPageNumbers","map","number","overflow","pathname","index","image","fname","lname","email","phone"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n// import { Link } from \"react-router-dom\";\nimport swal from 'sweetalert';\nimport $ from \"jquery\";\nimport NumberFormat from 'react-number-format';\nimport Avatar from \"../assets/img/default-user-avatar.png\";\n\n\nimport Header from \"../common/Header\";\nimport Sidebar from \"./Sidebar\";\nimport { Link } from \"react-router-dom\";\n\nvar _home_id;\n\nexport class UsersList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: localStorage[\"appState\"]\n              ? JSON.parse(localStorage[\"appState\"]).user.token\n              : \"\",\n      users: [],\n      users_total: \"\",\n      currentPage: 1,\n      usersPerPage: 20,\n      query: \"\",\n      isLoading: true\n    };\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  queryField = (e) => {\n    e.preventDefault();\n    this.setState({\n      query: e.target.value,\n    });\n    axios\n      .get(`${axios.defaults.baseURL}/search-users/${this.state.query}`)\n      .then((response) => {\n        //console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({ users: json.data.users });\n        } else alert(\"Fetching Users Failed!\");\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n  };\n\n  handleClick(event) {\n    event.preventDefault();\n    this.setState({\n      currentPage: Number(event.target.id),\n    });\n  }\n\n  componentDidMount() {\n    this.fetchUsers();\n    this.getChartData();\n  }\n\n  fetchUsers = (e) => {\n    axios\n    .get(\n        `${axios.defaults.baseURL}/users/list`,\n        {\n          headers: {\n            Authorization: `Bearer ${this.state.token}`,\n          },\n        }\n      )\n      .then((response) => {\n        //console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({ users: json.data.users, isLoading: false });\n        } else alert(\"Fetching Users Failed!\");\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n  };\n\n  getChartData(){\n    axios\n      .get(\n        `${axios.defaults.baseURL}/chart/${\n          JSON.parse(localStorage[\"appState\"]).user.id\n        }`,\n        {\n          headers: {\n            Authorization: `Bearer ${this.state.token}`,\n          },\n        }\n      )\n      .then((response) => {\n        // console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({\n            users_total: json.data.users_total\n          });\n          // } else alert(\"Cannot Fetch Data!\");\n        } else swal(\"Oops!\", \"Cannot Fetch Data!\", \"error\");\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n  };\n\n  render() {\n    const { users, currentPage, usersPerPage, isLoading } = this.state;\n\n    // Logic for displaying users\n    const usersList = this.state.users;\n    const indexOfLastUser = currentPage * usersPerPage;\n    const indexOfFirstUser = indexOfLastUser - usersPerPage;\n    const currentUsers = usersList.slice(indexOfFirstUser, indexOfLastUser);\n\n    // Logic for displaying page numbers\n    const pageNumbers = [];\n    for (let i = 1; i <= Math.ceil(users.length / usersPerPage); i++) {\n      pageNumbers.push(i);\n    }\n\n    const renderPageNumbers = pageNumbers.map((number) => {\n      return (\n        <>\n        { number == currentPage ? (\n        <li\n          className=\"pg-link active-link\"\n          key={number}\n          id={number}\n          onClick={this.handleClick}\n        >\n          {number}\n        </li> \n        ) :\n        <li\n          className=\"pg-link\"\n          key={number}\n          id={number}\n          onClick={this.handleClick}\n        >\n          {number}\n        </li> \n      }\n      </>\n      );\n    });\n\n    return (\n      <div id=\"app\" className=\"bg-gray-200\">\n        <div className=\"dashboard-page\">\n          <div className=\"private-layout\">\n            <div className=\"app-wrapper\">\n              <Sidebar />\n              <Header />\n              <div id=\"main-app\" className=\"position-relative\">\n                <div className=\"container mt-4\">\n                  <div className=\"page-title\">\n                    <div className=\"row text-primary pt-4\">\n                      <div className=\"col-12\">\n                        <div\n                          className=\"user-welcome\"\n                          style={{ overflow: \"hidden\" }}\n                        >\n                          <div className=\"wrapper d-flex\">\n                            <h4 className=\"d-inline-block\">All Users ({this.state.users_total})<i className=\"fa fa-users\"></i></h4>\n                          </div>\n                            <div className=\"float-right\">\n                            <input\n                            type=\"text\"\n                            name=\"query\"\n                            className=\"form-control\"\n                            placeholder=\" Search users by name or email...\"\n                            onChange={this.queryField}\n                            />\n                            </div>\n                        </div>\n                      </div>\n                      <div className=\"text-right col-2\"></div>\n                    </div>\n                  </div>\n                  <div className=\"row mt-4 align-items-stretch\">\n                  <table class=\"table\">\n                        <thead class=\"thead-dark\">\n                            <tr>\n                            <th scope=\"col\">Avatar</th>\n                            <th scope=\"col\">Firstname</th>\n                            <th scope=\"col\">Lastname</th>\n                            <th scope=\"col\">Email</th>\n                            <th scope=\"col\">Telephone</th>\n                            <th scope=\"col\">Action</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                          {isLoading ? (\n                            <>\n                            <tr className=\"blink_me\">\n                              <td><img src={Avatar} className=\"user-list-avatar\" alt=\"user\"/></td>\n                              <td>Loading...</td>\n                              <td>Loading...</td>\n                              <td>Loading...</td>\n                              <td>Loading...</td>\n                              <td>\n                              <Link to={{pathname: `/admin/user-details/`}} className=\"btn mr-2 btn-primary\">\n                                  View Details\n                              </Link>\n                              <Link to={{pathname: `/admin/user-plans/`}} className=\"btn mr-2 btn-warning\">\n                                  View Plans\n                              </Link>\n                              </td>\n                            </tr>\n                            </>\n                          ):(\n                            <>\n                            { currentUsers.map((user, index) => (\n                            <tr>\n                              <td><img src={user.image || Avatar} className=\"user-list-avatar\" alt=\"user\"/></td>\n                              <td>{user.fname}</td>\n                              <td>{user.lname}</td>\n                              <td>{user.email}</td>\n                              <td>{user.phone}</td>\n                              <td>\n                              <Link to={{pathname: `/admin/user-details/${user.id}`}} className=\"btn mr-2 btn-primary\">\n                                  View Details\n                              </Link>\n                              <Link to={{pathname: `/admin/user-plans/${user.id}`}} className=\"btn mr-2 btn-warning\">\n                                  View Plans\n                              </Link>\n                              </td>\n                              </tr>\n                              \n                          ))}\n                            </>\n                          )}\n                        </tbody>\n                        </table>\n                    {/* Product Listing */}\n                      {/* {renderHomes} */}\n                    {/* End Product Listing */}\n                  </div>\n                </div>\n                  <div className=\"text-center\">\n                    {renderPageNumbers}\n                  </div><br/><br/>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default UsersList;\n"]},"metadata":{},"sourceType":"module"}