{"ast":null,"code":"import _classCallCheck from\"/Users/hipheckt/codes/evestng/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hipheckt/codes/evestng/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/hipheckt/codes/evestng/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/hipheckt/codes/evestng/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/hipheckt/codes/evestng/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";// import { Link } from \"react-router-dom\";\nimport swal from'sweetalert';import $ from\"jquery\";import NumberFormat from'react-number-format';import Header from\"../common/Header\";import Sidebar from\"./Sidebar\";import{Link}from\"react-router-dom\";export var LandvestList=/*#__PURE__*/function(_Component){_inherits(LandvestList,_Component);var _super=_createSuper(LandvestList);function LandvestList(props){var _this;_classCallCheck(this,LandvestList);_this=_super.call(this,props);_this.queryField=function(e){e.preventDefault();_this.setState({query:e.target.value});axios.get(\"\".concat(axios.defaults.baseURL,\"/search-homes/\").concat(_this.state.query)).then(function(response){//console.log(response);\nreturn response;}).then(function(json){if(json.data.success){_this.setState({homes:json.data.homes});}else alert(\"Fetching Homes Failed!\");}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});};_this.fetchHomes=function(e){axios.get(\"\".concat(axios.defaults.baseURL,\"/lands\")).then(function(response){//console.log(response);\nreturn response;}).then(function(json){if(json.data.success){_this.setState({homes:json.data.homes,isLoading:false});}else alert(\"Fetching Homes Failed!\");}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});};_this.state={homes:[],currentPage:1,homesPerPage:9,query:\"\",isLoading:true};_this.handleClick=_this.handleClick.bind(_assertThisInitialized(_this));return _this;}_createClass(LandvestList,[{key:\"handleClick\",value:function handleClick(event){event.preventDefault();this.setState({currentPage:Number(event.target.id)});}},{key:\"componentDidMount\",value:function componentDidMount(){this.fetchHomes();}},{key:\"soldOut\",value:function soldOut(id){axios({method:'get',url:\"\".concat(axios.defaults.baseURL,\"/land-soldout/\").concat(id)}).then(function(response){//console.log(response);\nreturn response;});}},{key:\"reActivate\",value:function reActivate(id){axios({method:'get',url:\"\".concat(axios.defaults.baseURL,\"/land-activate/\").concat(id)}).then(function(response){//console.log(response);\nreturn response;});}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,homes=_this$state.homes,currentPage=_this$state.currentPage,homesPerPage=_this$state.homesPerPage,isLoading=_this$state.isLoading;// Logic for displaying homes\nvar homesList=this.state.homes;var indexOfLastHome=currentPage*homesPerPage;var indexOfFirstHome=indexOfLastHome-homesPerPage;var currentHomes=homesList.slice(indexOfFirstHome,indexOfLastHome);var renderHomes=currentHomes.map(function(home,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"mb-5 col-md-6 col-lg-6 col-xl-4 col-12 order-2\",key:home.id},/*#__PURE__*/React.createElement(\"div\",{className:\"wrap dash-card-main bg-white position-relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wrap px-2 position-absolute w-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dash-card-main thumb bg-dark mt-2 shadow-xl bg-cover\"},/*#__PURE__*/React.createElement(\"img\",{src:home.image,className:\"plan-img\",alt:\"\"}))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"wrap p-4 pt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-1 mb-2 pt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"pt-2 col\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"text-primary mb-0 titlecase\"},home.name,\" @ \",/*#__PURE__*/React.createElement(NumberFormat,{value:home.price,displayType:'text',thousandSeparator:true,prefix:'₦'}),\" \",home.type),/*#__PURE__*/React.createElement(\"span\",{className:\"badge text-light badge-primary\"},\"Duration: \",home.duration,\" \",home.type==\"monthly\"?'Months':home.type==\"weekly\"?'Weeks':home.type==\"daily\"?'Days':null)))),/*#__PURE__*/React.createElement(\"hr\",{className:\"mt-0\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"wrap px-4 pb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row no-gutters\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col mr-2\"},/*#__PURE__*/React.createElement(Link,{to:{pathname:\"edit-land/\".concat(home.name)},className:\"btn w-100 btn-primary\"},\"Edit\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col mr-2\"},home.status==\"active\"?/*#__PURE__*/React.createElement(Link,{onClick:_this2.soldOut.bind(_this2,home.id),className:\"btn w-100 btn-danger\"},\"Sold Out\"):home.status==\"soldout\"?/*#__PURE__*/React.createElement(Link,{onClick:_this2.reActivate.bind(_this2,home.id),className:\"btn w-100 btn-warning\"},\"Re-Activate\"):null)))));});// Logic for displaying page numbers\nvar pageNumbers=[];for(var i=1;i<=Math.ceil(homes.length/homesPerPage);i++){pageNumbers.push(i);}var renderPageNumbers=pageNumbers.map(function(number){return/*#__PURE__*/React.createElement(React.Fragment,null,number==currentPage?/*#__PURE__*/React.createElement(\"li\",{className:\"pg-link active-link\",key:number,id:number,onClick:_this2.handleClick},number):/*#__PURE__*/React.createElement(\"li\",{className:\"pg-link\",key:number,id:number,onClick:_this2.handleClick},number));});return/*#__PURE__*/React.createElement(\"div\",{id:\"app\",className:\"bg-gray-200\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dashboard-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"private-layout\"},/*#__PURE__*/React.createElement(\"div\",{className:\"app-wrapper\"},/*#__PURE__*/React.createElement(Sidebar,null),/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"div\",{id:\"main-app\",className:\"position-relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"page-title\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row text-primary py-2 pt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-welcome\",style:{overflow:\"hidden\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"wrapper d-flex\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"d-inline-block\"},\"Landvest Lands\")),/*#__PURE__*/React.createElement(Link,{to:\"/admin/new-land\",className:\"btn btn-primary\"},\"Add New Land \",/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-plus\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"text-right col-2\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-4 align-items-stretch\"},isLoading?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"mb-5 col-md-6 col-lg-6 col-xl-4 col-12 order-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wrap dash-card-main bg-white position-relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wrap px-2 position-absolute w-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dash-card-main mt-2 bg-cover blink_me\"},\"Loading...\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-5 col-md-6 col-lg-6 col-xl-4 col-12 order-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wrap dash-card-main bg-white position-relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wrap px-2 position-absolute w-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dash-card-main mt-2 bg-cover blink_me\"},\"Loading...\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-5 col-md-6 col-lg-6 col-xl-4 col-12 order-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wrap dash-card-main bg-white position-relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wrap px-2 position-absolute w-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dash-card-main mt-2 bg-cover blink_me\"},\"Loading...\"))))):/*#__PURE__*/React.createElement(React.Fragment,null,renderHomes))),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},renderPageNumbers),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null))))));}}]);return LandvestList;}(Component);export default LandvestList;","map":{"version":3,"sources":["/Users/hipheckt/codes/evestng/react/src/admin/LandvestList.js"],"names":["React","Component","axios","swal","$","NumberFormat","Header","Sidebar","Link","LandvestList","props","queryField","e","preventDefault","setState","query","target","value","get","defaults","baseURL","state","then","response","json","data","success","homes","alert","catch","error","console","fetchHomes","isLoading","currentPage","homesPerPage","handleClick","bind","event","Number","id","method","url","homesList","indexOfLastHome","indexOfFirstHome","currentHomes","slice","renderHomes","map","home","index","image","name","price","type","duration","pathname","status","soldOut","reActivate","pageNumbers","i","Math","ceil","length","push","renderPageNumbers","number","overflow"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n// import { Link } from \"react-router-dom\";\nimport swal from 'sweetalert';\nimport $ from \"jquery\";\nimport NumberFormat from 'react-number-format';\n\n\nimport Header from \"../common/Header\";\nimport Sidebar from \"./Sidebar\";\nimport { Link } from \"react-router-dom\";\n\n\nexport class LandvestList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      homes: [],\n      currentPage: 1,\n      homesPerPage: 9,\n      query: \"\",\n      isLoading: true\n    };\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  queryField = (e) => {\n    e.preventDefault();\n    this.setState({\n      query: e.target.value,\n    });\n    axios\n      .get(`${axios.defaults.baseURL}/search-homes/${this.state.query}`)\n      .then((response) => {\n        //console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({ homes: json.data.homes });\n        } else alert(\"Fetching Homes Failed!\");\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n  };\n\n  handleClick(event) {\n    event.preventDefault();\n    this.setState({\n      currentPage: Number(event.target.id),\n    });\n  }\n\n  componentDidMount() {\n    this.fetchHomes();\n  }\n\n  fetchHomes = (e) => {\n    axios\n      .get(`${axios.defaults.baseURL}/lands`)\n      .then((response) => {\n        //console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({ homes: json.data.homes, isLoading: false });\n        } else alert(\"Fetching Homes Failed!\");\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n  };\n\n  soldOut(id) {\n\n    axios({\n        method: 'get',\n        url: `${axios.defaults.baseURL}/land-soldout/${id}`\n        })\n      .then((response) => {\n        //console.log(response);\n        return response;\n      })\n  };\n\n  reActivate(id) {\n    axios({\n        method: 'get',\n        url: `${axios.defaults.baseURL}/land-activate/${id}`\n        })\n      .then((response) => {\n        //console.log(response);\n        return response;\n      })\n  };\n\n  render() {\n    const { homes, currentPage, homesPerPage, isLoading } = this.state;\n\n    // Logic for displaying homes\n    const homesList = this.state.homes;\n    const indexOfLastHome = currentPage * homesPerPage;\n    const indexOfFirstHome = indexOfLastHome - homesPerPage;\n    const currentHomes = homesList.slice(indexOfFirstHome, indexOfLastHome);\n\n    const renderHomes = currentHomes.map((home, index) => {\n      return (\n        <div\n          className=\"mb-5 col-md-6 col-lg-6 col-xl-4 col-12 order-2\"\n          key={home.id}\n        >\n          <div className=\"wrap dash-card-main bg-white position-relative\">\n            <div className=\"wrap px-2 position-absolute w-100\">\n              <div className=\"dash-card-main thumb bg-dark mt-2 shadow-xl bg-cover\">\n                <img\n                  src={home.image}\n                  className=\"plan-img\"\n                  alt=\"\"\n                />\n              </div>\n            </div>\n            <br />\n            <br />\n            <br />\n            <br />\n            <br />\n            <div className=\"wrap p-4 pt-5\">\n              <div className=\"row mt-1 mb-2 pt-5\">\n                <div className=\"pt-2 col\">\n      <h6 className=\"text-primary mb-0 titlecase\">{home.name} @ <NumberFormat value={home.price} displayType={'text'} thousandSeparator={true} prefix={'₦'} /> {home.type}</h6>\n      <span className=\"badge text-light badge-primary\">Duration: {home.duration} {\n        home.type == \"monthly\" ? ('Months') : home.type == \"weekly\" ? ('Weeks') : home.type == \"daily\" ? ('Days') : null\n      }</span>\n                </div>\n              </div>\n            </div>\n            <hr className=\"mt-0\"></hr>\n            <div className=\"wrap px-4 pb-4\">\n              <div className=\"row no-gutters\">\n                <div className=\"col mr-2\">\n                  <Link to={{pathname: `edit-land/${home.name}`}} className=\"btn w-100 btn-primary\">\n                    Edit\n                  </Link>\n                </div>\n                <div className=\"col mr-2\">\n                    { home.status == \"active\" ? (\n                        <Link onClick={this.soldOut.bind(this, home.id)} className=\"btn w-100 btn-danger\">\n                        Sold Out\n                      </Link>\n                    ) : home.status == \"soldout\"  ? (<Link onClick={this.reActivate.bind(this, home.id)} className=\"btn w-100 btn-warning\">\n                    Re-Activate\n                  </Link>) : null\n                    }\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    });\n\n    // Logic for displaying page numbers\n    const pageNumbers = [];\n    for (let i = 1; i <= Math.ceil(homes.length / homesPerPage); i++) {\n      pageNumbers.push(i);\n    }\n\n    const renderPageNumbers = pageNumbers.map((number) => {\n      return (\n        <>\n        { number == currentPage ? (\n        <li\n          className=\"pg-link active-link\"\n          key={number}\n          id={number}\n          onClick={this.handleClick}\n        >\n          {number}\n        </li> \n        ) :\n        <li\n          className=\"pg-link\"\n          key={number}\n          id={number}\n          onClick={this.handleClick}\n        >\n          {number}\n        </li> \n      }\n      </>\n      );\n    });\n\n    return (\n      <div id=\"app\" className=\"bg-gray-200\">\n        <div className=\"dashboard-page\">\n          <div className=\"private-layout\">\n            <div className=\"app-wrapper\">\n              <Sidebar />\n              <Header />\n              <div id=\"main-app\" className=\"position-relative\">\n                <div className=\"container mt-4\">\n                  <div className=\"page-title\">\n                    <div className=\"row text-primary py-2 pt-4\">\n                      <div className=\"col-10\">\n                        <div\n                          className=\"user-welcome\"\n                          style={{ overflow: \"hidden\" }}\n                        >\n                          <div className=\"wrapper d-flex\">\n                            <h4 className=\"d-inline-block\">Landvest Lands</h4>\n                          </div>\n                          <Link to=\"/admin/new-land\" className=\"btn btn-primary\">\n                            Add New Land <i className=\"fa fa-plus\"></i>\n                          </Link>\n                        </div>\n                      </div>\n                      <div className=\"text-right col-2\"></div>\n                    </div>\n                  </div>\n                  <div className=\"row mt-4 align-items-stretch\">\n                    {/* Product Listing */}\n                    {isLoading ? (\n                      <>\n                        <div className=\"mb-5 col-md-6 col-lg-6 col-xl-4 col-12 order-2\">\n                          <div className=\"wrap dash-card-main bg-white position-relative\">\n                            <div className=\"wrap px-2 position-absolute w-100\">\n                              <div className=\"dash-card-main mt-2 bg-cover blink_me\">\n                                Loading...\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"mb-5 col-md-6 col-lg-6 col-xl-4 col-12 order-2\">\n                          <div className=\"wrap dash-card-main bg-white position-relative\">\n                            <div className=\"wrap px-2 position-absolute w-100\">\n                              <div className=\"dash-card-main mt-2 bg-cover blink_me\">\n                                Loading...\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"mb-5 col-md-6 col-lg-6 col-xl-4 col-12 order-2\">\n                          <div className=\"wrap dash-card-main bg-white position-relative\">\n                            <div className=\"wrap px-2 position-absolute w-100\">\n                              <div className=\"dash-card-main mt-2 bg-cover blink_me\">\n                                Loading...\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </>\n                    ) : (\n                      <>{renderHomes}</>\n                    )}\n                    {/* End Product Listing */}\n                  </div>\n                </div>\n                  <div className=\"text-center\">\n                    {renderPageNumbers}\n                  </div><br/><br/>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LandvestList;\n"]},"metadata":{},"sourceType":"module"}