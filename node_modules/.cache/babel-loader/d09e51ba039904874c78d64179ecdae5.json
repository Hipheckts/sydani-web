{"ast":null,"code":"import _classCallCheck from\"/Users/hipheckt/codes/sydani-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hipheckt/codes/sydani-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/hipheckt/codes/sydani-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/hipheckt/codes/sydani-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import axios from\"axios\";import{Link}from\"react-router-dom\";import\"./assets/css/style.css\";import Header from\"./partials/Header\";import swal from'sweetalert';var ViewPost=/*#__PURE__*/function(_React$Component){_inherits(ViewPost,_React$Component);var _super=_createSuper(ViewPost);function ViewPost(props){var _this;_classCallCheck(this,ViewPost);_this=_super.call(this,props);// let { user } = this.props.appstate;\n_this.likePost=function(){var id=window.location.href.split('/')[window.location.href.split('/').length-1];axios.get(\"http://localhost:8000/api/v1/like/\".concat(id),{headers:{'Authorization':\"Bearer \".concat(_this.state.token)}}).then(function(response){console.log(response);return response;}).then(function(json){if(json.data.success){_this.setState({likes:json.data.like[0]});}else alert(\"Error liking post!\");}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});swal(\"\",\"You liked this post\",\"success\",{button:false,timer:1500});};_this.state={token:localStorage[\"appState\"]?JSON.parse(localStorage[\"appState\"]).user.token:\"\",post:[],likes:0};return _this;}_createClass(ViewPost,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var id=window.location.href.split('/')[window.location.href.split('/').length-1];// console.log(id);\naxios.get(\"http://localhost:8000/api/v1/post/\".concat(id),{headers:{'Authorization':\"Bearer \".concat(this.state.token)}}).then(function(response){console.log(response);return response;}).then(function(json){if(json.data.success){_this2.setState({post:json.data.post,likes:json.data.post[0].likes});}else alert(\"Cannot Fetch Data!\");}).catch(function(error){console.error(\"An Error Occuredd! \".concat(error));});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"span\",{className:\"back\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"back-button\",xmlns:\"http://www.w3.org/2000/svg\",width:\"21.544\",height:\"19.267\",viewBox:\"0 0 21.544 19.267\"},/*#__PURE__*/React.createElement(\"g\",{id:\"Group_73\",\"data-name\":\"Group 73\",transform:\"translate(-317.057 -53.551)\"},/*#__PURE__*/React.createElement(\"path\",{id:\"Path_21\",\"data-name\":\"Path 21\",d:\"M-4149.31,54.965l-8.22,8.22,8.22,8.22\",transform:\"translate(4476)\",fill:\"none\",stroke:\"#000\",\"stroke-linecap\":\"round\",\"stroke-width\":\"2\"}),/*#__PURE__*/React.createElement(\"path\",{id:\"Path_22\",\"data-name\":\"Path 22\",d:\"M-4157.529,61.315h19.13\",transform:\"translate(4476 1.87)\",fill:\"none\",stroke:\"#000\",\"stroke-linecap\":\"round\",\"stroke-width\":\"2\"}))),\" back\")),this.state.post.map(function(post){return/*#__PURE__*/React.createElement(\"div\",{className:\"p-card\",key:post.id},/*#__PURE__*/React.createElement(\"img\",{src:post.image,alt:\"\",onClick:_this3.likePost,className:\"p-card-img\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"post-action\"},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(Link,{onClick:_this3.likePost},/*#__PURE__*/React.createElement(\"span\",{className:\"action\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"action-icon\",xmlns:\"http://www.w3.org/2000/svg\",width:\"21.581\",height:\"18.76\",viewBox:\"0 0 21.581 18.76\"},/*#__PURE__*/React.createElement(\"g\",{id:\"_17\",\"data-name\":\"17\",transform:\"translate(0 0)\"},/*#__PURE__*/React.createElement(\"g\",{id:\"Group_17\",\"data-name\":\"Group 17\",transform:\"translate(0)\"},/*#__PURE__*/React.createElement(\"path\",{id:\"Path_4\",\"data-name\":\"Path 4\",d:\"M35.965,32.1l-1.16,1.16-1.16-1.16a5.632,5.632,0,0,0-7.983,0h0a5.681,5.681,0,0,0,0,7.983L34.806,49.2l9.142-9.142a5.632,5.632,0,0,0,0-7.983h0A5.656,5.656,0,0,0,35.965,32.1Z\",transform:\"translate(-24.025 -30.437)\",fill:\"#7a8fa6\"}))))),\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"action-text\"},_this3.state.likes))),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(Link,{onClick:_this3.likePost},/*#__PURE__*/React.createElement(\"span\",{className:\"action\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"action-icon\",id:\"Group_16\",\"data-name\":\"Group 16\",xmlns:\"http://www.w3.org/2000/svg\",width:\"19.376\",height:\"18.913\",viewBox:\"0 0 19.376 18.913\"},/*#__PURE__*/React.createElement(\"g\",{id:\"Group_15\",\"data-name\":\"Group 15\"},/*#__PURE__*/React.createElement(\"path\",{id:\"Path_3\",\"data-name\":\"Path 3\",d:\"M9.688,0C4.319,0,0,3.807,0,8.492A8.205,8.205,0,0,0,3.593,15.13L3.743,18.3c.028.592.436.785.909.432l2.613-1.947a9.8,9.8,0,0,0,2.422.244c5.369,0,9.688-3.807,9.688-8.492S15.057,0,9.688,0Z\",fill:\"#7a8fa6\"})))),\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"action-text\"},_this3.state.likes)))));}));}}]);return ViewPost;}(React.Component);export default ViewPost;","map":{"version":3,"sources":["/Users/hipheckt/codes/sydani-web/src/ViewPost.js"],"names":["React","axios","Link","Header","swal","ViewPost","props","likePost","id","window","location","href","split","length","get","headers","state","token","then","response","console","log","json","data","success","setState","likes","like","alert","catch","error","button","timer","localStorage","JSON","parse","user","post","map","image","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport \"./assets/css/style.css\";\nimport Header from \"./partials/Header\";\n\nimport swal from 'sweetalert';\n\nclass ViewPost extends React.Component {\n  constructor(props) {\n    super(props);\n    // let { user } = this.props.appstate;\n    this.state = {\n      token: localStorage[\"appState\"]\n        ? JSON.parse(localStorage[\"appState\"]).user.token\n        : \"\",\n      post: [],\n      likes: 0\n    };\n  }\n\n  componentDidMount() {\n    var id = window.location.href.split('/')[window.location.href.split('/').length - 1];\n    // console.log(id);\n    axios\n      .get(`http://localhost:8000/api/v1/post/${id}`,\n      {\n        headers: {\n          'Authorization': `Bearer ${this.state.token}`\n        }\n      }\n      )\n      .then(response => {\n        console.log(response);\n        return response;\n      })\n      .then(json => {\n        if (json.data.success) {\n          this.setState({ \n              post: json.data.post,\n              likes: json.data.post[0].likes,\n            });\n        } else alert(\"Cannot Fetch Data!\");\n      })\n      .catch(error => {\n        console.error(`An Error Occuredd! ${error}`);\n      });\n  }\n\n  likePost = () => {\n\n    var id = window.location.href.split('/')[window.location.href.split('/').length - 1];\n\n    axios\n    .get(`http://localhost:8000/api/v1/like/${id}`,\n    {\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      }\n    }\n    )\n    .then(response => {\n      console.log(response);\n      return response;\n    })\n    .then(json => {\n      if (json.data.success) {\n        this.setState({ likes: json.data.like[0] });\n      } else alert(\"Error liking post!\");\n    })\n    .catch(error => {\n      console.error(`An Error Occured! ${error}`);\n    });\n    swal(\"\", \"You liked this post\", \"success\", {\n        button: false,\n        timer: 1500,\n      });\n    }\n\n  render() {\n    return (\n      <div>\n        <Header/>\n        <Link to=\"/\">\n          <span className=\"back\">\n            <svg className=\"back-button\" xmlns=\"http://www.w3.org/2000/svg\" width=\"21.544\" height=\"19.267\" viewBox=\"0 0 21.544 19.267\">\n              <g id=\"Group_73\" data-name=\"Group 73\" transform=\"translate(-317.057 -53.551)\">\n                <path id=\"Path_21\" data-name=\"Path 21\" d=\"M-4149.31,54.965l-8.22,8.22,8.22,8.22\" transform=\"translate(4476)\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-width=\"2\"/>\n                <path id=\"Path_22\" data-name=\"Path 22\" d=\"M-4157.529,61.315h19.13\" transform=\"translate(4476 1.87)\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-width=\"2\"/>\n              </g> \n            </svg> back\n          </span>\n        </Link>\n        {this.state.post.map(post => (\n        <div className=\"p-card\" key={post.id}>\n            {/* <span className=\"v-card-name\"><span className=\"v-user-avatar\"><img src={post.avatar} alt=\"\"/></span><span className=\"v-card-u-name\">{post.fname} {post.lname}</span><span className=\"v-card-title\">{post.post}</span></span> */}\n              <img src={post.image} alt=\"\" onClick={this.likePost} className=\"p-card-img\"/>\n            <div className=\"post-action\">\n                <span>\n                    <Link onClick={this.likePost}>\n                      <span  className=\"action\">\n                        <svg className=\"action-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"21.581\" height=\"18.76\" viewBox=\"0 0 21.581 18.76\">\n                            <g id=\"_17\" data-name=\"17\" transform=\"translate(0 0)\">\n                                <g id=\"Group_17\" data-name=\"Group 17\" transform=\"translate(0)\">\n                                <path id=\"Path_4\" data-name=\"Path 4\" d=\"M35.965,32.1l-1.16,1.16-1.16-1.16a5.632,5.632,0,0,0-7.983,0h0a5.681,5.681,0,0,0,0,7.983L34.806,49.2l9.142-9.142a5.632,5.632,0,0,0,0-7.983h0A5.656,5.656,0,0,0,35.965,32.1Z\" transform=\"translate(-24.025 -30.437)\" fill=\"#7a8fa6\"/>\n                                </g>\n                            </g>\n                        </svg>\n                    </span> <span  className=\"action-text\">{this.state.likes}</span>\n                    </Link>\n                </span>\n                <span>\n                    <Link onClick={this.likePost}>\n                      <span  className=\"action\">\n                        <svg className=\"action-icon\" id=\"Group_16\" data-name=\"Group 16\" xmlns=\"http://www.w3.org/2000/svg\" width=\"19.376\" height=\"18.913\" viewBox=\"0 0 19.376 18.913\">\n                        <g id=\"Group_15\" data-name=\"Group 15\">\n                            <path id=\"Path_3\" data-name=\"Path 3\" d=\"M9.688,0C4.319,0,0,3.807,0,8.492A8.205,8.205,0,0,0,3.593,15.13L3.743,18.3c.028.592.436.785.909.432l2.613-1.947a9.8,9.8,0,0,0,2.422.244c5.369,0,9.688-3.807,9.688-8.492S15.057,0,9.688,0Z\" fill=\"#7a8fa6\"/>\n                        </g>\n                        </svg>\n                    </span> <span  className=\"action-text\">{this.state.likes}</span>\n                    </Link>\n                </span>\n            </div>\n          </div>\n          ))}\n      </div>\n    );\n  }\n}\n\nexport default ViewPost;\n"]},"metadata":{},"sourceType":"module"}