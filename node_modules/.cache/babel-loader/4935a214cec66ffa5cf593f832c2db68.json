{"ast":null,"code":"var _jsxFileName = \"/Users/hipheckt/codes/sapioclub/react/src/Spend.js\";\nimport React, { Component } from \"react\";\nimport Header from \"./common/Header\";\nimport { Link } from \"react-router-dom\";\nimport Footer from \"./common/Footer\";\nimport NumberFormat from \"react-number-format\";\nimport { PaystackConsumer } from \"react-paystack\";\nimport $ from \"jquery\";\nimport ScriptTag from \"react-script-tag\";\nimport AOS from \"aos\";\nimport QRCode from \"qrcode.react\";\nimport axios from \"axios\";\nimport swal from \"sweetalert\";\nimport CardIcon from \"./assets/images/gold-card-image.png\";\nimport Avatar from \"./assets/img/default-user-avatar.png\";\n\nvar _membership;\n\nexport class Dashboard extends Component {\n  constructor(props) {\n    super(props);\n\n    this.selectMembership = () => {\n      this.setState({\n        planAmount: document.querySelector(\"#membership-select\").value\n      }); // console.log(this.state.planAmount);\n    };\n\n    this.state = {\n      token: localStorage[\"appState\"] ? JSON.parse(localStorage[\"appState\"]).user.token : \"\",\n      user: [],\n      isLoading: true,\n      planAmount: \"0\"\n    };\n    AOS.init();\n  }\n\n  componentDidMount() {\n    axios.get(`${axios.defaults.baseURL}/user/${JSON.parse(localStorage[\"appState\"]).user.id}`, {\n      headers: {\n        Authorization: `Bearer ${this.state.token}`\n      }\n    }).then(response => {\n      //console.log(response);\n      return response;\n    }).then(json => {\n      if (json.data.success) {\n        this.setState({\n          user: json.data.user[0],\n          isLoading: false\n        }); // } else alert(\"Cannot Fetch Data!\");\n      } else swal(\"Oops!\", \"Cannot Fetch Data!\", \"error\");\n    }).catch(error => {\n      console.error(`An Error Occured! ${error}`);\n    }); // alert(id)\n  }\n\n  render() {\n    // const configNGN = {\n    //   // reference: (new Date()).getTime(),\n    //   // email: \"hipheckt@gmail.com\",\n    //   email: this.state.user.email,\n    //   // plan: this.state.plan,\n    //   amount: this.state.planAmount+\"00\",\n    //   currency: \"NGN\",\n    //   // publicKey: 'pk_live_68d2b6e9edacd11392f5548db9047ffb4911b39d',\n    //   publicKey: \"pk_test_a842c66ae323671a5e629e8970958560b65d3ad6\",\n    // };\n    // const componentPropsNGN = {\n    //   ...configNGN,\n    //   text: \"Sapio Sibling Membership Fee\",\n    //   onSuccess: (response) => {\n    //     // console.log(response);\n    //     $(\"#reg-button\")\n    //       .attr(\"disabled\", \"disabled\")\n    //       .html(\n    //         '<i class=\"fa fa-spinner fa-spin fa-1x fa-fw\"></i><span class=\"sr-only\">Initiating Payment...</span>'\n    //       );\n    //     this.setState({\n    //       payment_ref: response.trxref,\n    //     });\n    //     axios({\n    //       method: \"get\",\n    //       url: `https://api.paystack.co/transaction/verify/${this.state.payment_ref}`,\n    //       // headers: {'Authorization': `Bearer sk_live_5299c2d2e25663425657490251d1cec7d8c206aa`, 'Content-Type': 'application/json' }\n    //       headers: {\n    //         Authorization: `Bearer sk_test_b921c5ae7960bc5df7b895cad6b1f37ce0b29b73`,\n    //         \"Content-Type\": \"application/json\",\n    //       },\n    //     })\n    //       .then((response) => {\n    //         console.log(response);\n    //         return response;\n    //       })\n    //       .then((json) => {\n    //         this.setState({\n    //           auth_code: json.data.data.authorization.authorization_code,\n    //         });\n    //         // swal(\n    //         //   \"Success!\",\n    //         //   this.state.auth_code,\n    //         //   \"success\",\n    //         //   {\n    //         //     button: false,\n    //         //     // timer: 1500,\n    //         //   }\n    //         // );\n    //         var formData = new FormData();\n    //         formData.append(\"email\", this.state.user.email);\n    //         formData.append(\"auth_code\", this.state.auth_code);\n    //         formData.append(\"membership\", _membership.value);\n    //         axios\n    //           .post(`${axios.defaults.baseURL}/register`, formData)\n    //           .then((response) => {\n    //             //console.log(response);\n    //             return response;\n    //           })\n    //           .then((json) => {\n    //             if (json.data.success) {\n    //               // alert(`Registration Successful!`);\n    //               swal(\"Success!\", json.data.message, \"success\", {\n    //                 button: false,\n    //                 timer: 1500,\n    //               });\n    //               // redirect home\n    //               this.props.history.push(\"/dashboard\");\n    //             } else {\n    //               // alert(`Registration Failed!`);\n    //               swal(\"Failed\", \"Payment Failed\", \"error\");\n    //             }\n    //           })\n    //           .catch((error) => {\n    //               swal(\"Error!\", \"An Error Occured!\", \"error\", {\n    //               button: false,\n    //               // timer: 1500\n    //             });\n    //           });\n    //       });\n    //   },\n    //   onClose: () => null,\n    // };\n    return this.state.isLoading ? null : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"body\", {\n      className: \"page-overview  ac-gn-current-music\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      id: \"ac-ln-curtain\",\n      for: \"ac-ln-menustate\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      id: \"main\",\n      className: \"main\",\n      role: \"main\",\n      \"data-page-type\": \"overview\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"scroll-sequence\",\n      \"data-component-list\": \"ScrollSequence\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sequence-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"image-sequence\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"canvas-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(\"section\", {\n      id: \"section-hero\",\n      className: \"section section-hero theme-dark\",\n      \"data-anim-scroll-group\": \"section-hero\",\n      \"data-analytics-fallback-section-engagement\": \"name:hero\",\n      \"data-analytics-activitymap-region-id\": \"hero\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex-copy-lockup align-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"copy-block col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 15\n      }\n    }, \"Hi \", this.state.user.fname, \" \", this.state.user.lname, \" \\uD83D\\uDE01,\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 71\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 76\n      }\n    }), \" Select any of the following services at a discounted price and pay for voucher.\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 20\n      }\n    }), /*#__PURE__*/React.createElement(\"select\", {\n      ref: input => _membership = input,\n      name: \"membership\",\n      id: \"membership-select\",\n      className: \"form-control input-field\",\n      style: {\n        height: \"50px\"\n      },\n      onChange: this.selectMembership,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }\n    }, \"Select A Service\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"20000\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }\n    }, \"Four Point Hotel (Standard Room - \\u20A620,000)\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"5000\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    }, \"Medplus (\\u20A65,000 Voucher)\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"200000\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }\n    }, \"Flight (\\u20A6200,000 Voucher)\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 24\n      }\n    }), /*#__PURE__*/React.createElement(PaystackConsumer, Object.assign({}, componentPropsNGN, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 15\n      }\n    }), ({\n      initializePayment\n    }) => /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => swal(\"You are about to make payment for your Sapio Club Service\", {\n        buttons: {\n          cancel: \"No, Cancel\",\n          catch: {\n            text: \"Yes, Continue\",\n            value: \"catch\"\n          }\n        }\n      }).then(value => {\n        switch (value) {\n          case \"catch\":\n            initializePayment();\n            break;\n\n          default:\n        }\n      }),\n      id: \"reg-button\",\n      name: \"register-button\",\n      className: \"submit-button\",\n      style: {\n        marginTop: \"32px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 23\n      }\n    }, \"Pay for Voucher - \\u20A6\", this.state.planAmount))))))));\n  }\n\n}\nexport default Dashboard;","map":{"version":3,"sources":["/Users/hipheckt/codes/sapioclub/react/src/Spend.js"],"names":["React","Component","Header","Link","Footer","NumberFormat","PaystackConsumer","$","ScriptTag","AOS","QRCode","axios","swal","CardIcon","Avatar","_membership","Dashboard","constructor","props","selectMembership","setState","planAmount","document","querySelector","value","state","token","localStorage","JSON","parse","user","isLoading","init","componentDidMount","get","defaults","baseURL","id","headers","Authorization","then","response","json","data","success","catch","error","console","render","fname","lname","input","height","componentPropsNGN","initializePayment","buttons","cancel","text","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport Header from \"./common/Header\";\nimport { Link } from \"react-router-dom\";\nimport Footer from \"./common/Footer\";\n\nimport NumberFormat from \"react-number-format\";\nimport { PaystackConsumer } from \"react-paystack\";\nimport $ from \"jquery\";\n\nimport ScriptTag from \"react-script-tag\";\nimport AOS from \"aos\";\n\nimport QRCode from \"qrcode.react\";\n\nimport axios from \"axios\";\nimport swal from \"sweetalert\";\n\nimport CardIcon from \"./assets/images/gold-card-image.png\";\nimport Avatar from \"./assets/img/default-user-avatar.png\";\n\nvar _membership;\n\nexport class Dashboard extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: localStorage[\"appState\"]\n        ? JSON.parse(localStorage[\"appState\"]).user.token\n        : \"\",\n      user: [],\n      isLoading: true,\n      planAmount: \"0\",\n    };\n    AOS.init();\n  }\n\n  componentDidMount() {\n    axios\n      .get(\n        `${axios.defaults.baseURL}/user/${\n          JSON.parse(localStorage[\"appState\"]).user.id\n        }`,\n        {\n          headers: {\n            Authorization: `Bearer ${this.state.token}`,\n          },\n        }\n      )\n      .then((response) => {\n        //console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({\n            user: json.data.user[0],\n            isLoading: false\n          });\n          // } else alert(\"Cannot Fetch Data!\");\n        } else swal(\"Oops!\", \"Cannot Fetch Data!\", \"error\");\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n    // alert(id)\n  }\n\n  selectMembership = () => {\n    this.setState({\n      planAmount: document.querySelector(\"#membership-select\").value\n    });\n    // console.log(this.state.planAmount);\n  };\n\n  render() {\n\n    // const configNGN = {\n    //   // reference: (new Date()).getTime(),\n    //   // email: \"hipheckt@gmail.com\",\n    //   email: this.state.user.email,\n    //   // plan: this.state.plan,\n    //   amount: this.state.planAmount+\"00\",\n    //   currency: \"NGN\",\n    //   // publicKey: 'pk_live_68d2b6e9edacd11392f5548db9047ffb4911b39d',\n    //   publicKey: \"pk_test_a842c66ae323671a5e629e8970958560b65d3ad6\",\n    // };\n\n    // const componentPropsNGN = {\n    //   ...configNGN,\n    //   text: \"Sapio Sibling Membership Fee\",\n    //   onSuccess: (response) => {\n    //     // console.log(response);\n\n    //     $(\"#reg-button\")\n    //       .attr(\"disabled\", \"disabled\")\n    //       .html(\n    //         '<i class=\"fa fa-spinner fa-spin fa-1x fa-fw\"></i><span class=\"sr-only\">Initiating Payment...</span>'\n    //       );\n\n    //     this.setState({\n    //       payment_ref: response.trxref,\n    //     });\n\n    //     axios({\n    //       method: \"get\",\n    //       url: `https://api.paystack.co/transaction/verify/${this.state.payment_ref}`,\n    //       // headers: {'Authorization': `Bearer sk_live_5299c2d2e25663425657490251d1cec7d8c206aa`, 'Content-Type': 'application/json' }\n    //       headers: {\n    //         Authorization: `Bearer sk_test_b921c5ae7960bc5df7b895cad6b1f37ce0b29b73`,\n    //         \"Content-Type\": \"application/json\",\n    //       },\n    //     })\n    //       .then((response) => {\n    //         console.log(response);\n    //         return response;\n    //       })\n    //       .then((json) => {\n\n    //         this.setState({\n    //           auth_code: json.data.data.authorization.authorization_code,\n    //         });\n\n    //         // swal(\n    //         //   \"Success!\",\n    //         //   this.state.auth_code,\n    //         //   \"success\",\n    //         //   {\n    //         //     button: false,\n    //         //     // timer: 1500,\n    //         //   }\n    //         // );\n\n    //         var formData = new FormData();\n    //         formData.append(\"email\", this.state.user.email);\n    //         formData.append(\"auth_code\", this.state.auth_code);\n    //         formData.append(\"membership\", _membership.value);\n\n    //         axios\n    //           .post(`${axios.defaults.baseURL}/register`, formData)\n    //           .then((response) => {\n    //             //console.log(response);\n    //             return response;\n    //           })\n    //           .then((json) => {\n    //             if (json.data.success) {\n    //               // alert(`Registration Successful!`);\n    //               swal(\"Success!\", json.data.message, \"success\", {\n    //                 button: false,\n    //                 timer: 1500,\n    //               });\n    //               // redirect home\n    //               this.props.history.push(\"/dashboard\");\n    //             } else {\n    //               // alert(`Registration Failed!`);\n    //               swal(\"Failed\", \"Payment Failed\", \"error\");\n    //             }\n    //           })\n    //           .catch((error) => {\n    //               swal(\"Error!\", \"An Error Occured!\", \"error\", {\n    //               button: false,\n    //               // timer: 1500\n    //             });\n    //           });\n    //       });\n    //   },\n    //   onClose: () => null,\n    // };\n\n    return (\n      this.state.isLoading ? null : (\n        <>\n        <body className=\"page-overview  ac-gn-current-music\">\n      <Header />\n      <label id=\"ac-ln-curtain\" for=\"ac-ln-menustate\"></label>\n      <main id=\"main\" className=\"main\" role=\"main\" data-page-type=\"overview\">\n        <div className=\"scroll-sequence\" data-component-list=\"ScrollSequence\">\n          <div className=\"sequence-container\">\n            <div className=\"image-sequence\">\n              <div className=\"canvas-container\"></div>\n            </div>\n          </div>\n        </div>\n        <section\n          id=\"section-hero\"\n          className=\"section section-hero theme-dark\"\n          data-anim-scroll-group=\"section-hero\"\n          data-analytics-fallback-section-engagement=\"name:hero\"\n          data-analytics-activitymap-region-id=\"hero\"\n        >\n          <br />\n          <br />\n          <br />\n          <div className=\"flex-copy-lockup align-text\">\n            <div className=\"copy-block col\">\n              <h4>\n                Hi {this.state.user.fname} {this.state.user.lname} 😁,<br/><br/> Select any of the following services at a discounted price and pay for voucher.\n              </h4><br/>\n              <select\n                      ref={(input) => (_membership = input)}\n                      name=\"membership\"\n                      id=\"membership-select\"\n                      className=\"form-control input-field\" style={{height:\"50px\"}}\n                      onChange={this.selectMembership}\n                      >\n                <option value=\"\">Select A Service</option>\n                <option value=\"20000\">Four Point Hotel (Standard Room - ₦20,000)</option>\n                <option value=\"5000\">Medplus (₦5,000 Voucher)</option>\n                <option value=\"200000\">Flight (₦200,000 Voucher)</option>\n              </select><br/>\n              <PaystackConsumer {...componentPropsNGN}>\n                    {({ initializePayment }) => (\n                      <button\n                        type=\"button\"\n                        onClick={() =>\n                          swal(\n                            \"You are about to make payment for your Sapio Club Service\",\n                            {\n                              buttons: {\n                                cancel: \"No, Cancel\",\n                                catch: {\n                                  text: \"Yes, Continue\",\n                                  value: \"catch\",\n                                },\n                              },\n                            }\n                          ).then((value) => {\n                            switch (value) {\n                              case \"catch\":\n                                initializePayment();\n                                break;\n\n                              default:\n                            }\n                          })\n                        }\n                        id=\"reg-button\"\n                        name=\"register-button\"\n                        className=\"submit-button\"\n                        style={{ marginTop: \"32px\" }}\n                      >\n                        Pay for Voucher - ₦{this.state.planAmount}\n                      </button>\n                    )}\n                  </PaystackConsumer>\n            </div>\n            </div></section></main></body>\n        </>\n      ));\n  }\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}