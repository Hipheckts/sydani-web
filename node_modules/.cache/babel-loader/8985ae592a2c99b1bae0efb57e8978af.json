{"ast":null,"code":"var _jsxFileName = \"/Users/hipheckt/codes/sapio/src/index.js\";\nimport React from \"react\";\nimport { render } from \"react-dom\";\nimport { BrowserRouter, Route, Switch, withRouter } from \"react-router-dom\";\nimport Home from \"./Home\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport View from \"./View\";\nimport Edit from \"./Edit\";\nimport swal from 'sweetalert';\nimport axios from \"axios\";\nimport $ from \"jquery\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this._loginUser = (email, password) => {\n      $(\"#login-form button\").attr(\"disabled\", \"disabled\").html('<i class=\"fa fa-spinner fa-spin fa-1x fa-fw\"></i><span class=\"sr-only\">Loading...</span>');\n      var formData = new FormData();\n      formData.append(\"email\", email);\n      formData.append(\"password\", password);\n      axios.post(\"http://localhost:8000/api/v1/login/\", formData).then(response => {\n        console.log(response);\n        return response;\n      }).then(json => {\n        if (json.data.success) {\n          // alert(json.data.message);\n          swal(\"Oops!\", json.data.message, \"success\");\n          const {\n            id,\n            fname,\n            lname,\n            email,\n            phone\n          } = json.data.user;\n          const {\n            token\n          } = json.data.token;\n          let userData = {\n            id,\n            fname,\n            lname,\n            email,\n            phone,\n            token,\n            timestamp: new Date().toString()\n          };\n          let appState = {\n            isLoggedIn: true,\n            user: userData\n          }; // save app state with user date in local storage\n\n          localStorage[\"appState\"] = JSON.stringify(appState);\n          this.setState({\n            isLoggedIn: appState.isLoggedIn,\n            user: appState.user,\n            token: appState.token\n          }); // redirect home\n\n          this.props.history.push(\"/\");\n        } else swal(\"Error!\", json.data.message, \"error\");\n\n        ;\n        $(\"#login-form button\").removeAttr(\"disabled\").html(\"Login\");\n      }).catch(error => {\n        alert(`An Error Occured! ${error}`);\n        $(\"#login-form button\").removeAttr(\"disabled\").html(\"Login\");\n      });\n    };\n\n    this._registerUser = (fname, lname, email, phone, password) => {\n      $(\"#email-login-btn\").attr(\"disabled\", \"disabled\").html('<i class=\"fa fa-spinner fa-spin fa-1x fa-fw\"></i><span class=\"sr-only\">Loading...</span>');\n      var formData = new FormData();\n      formData.append(\"fname\", fname);\n      formData.append(\"lname\", lname);\n      formData.append(\"email\", email);\n      formData.append(\"phone\", phone);\n      formData.append(\"password\", password);\n      axios.post(\"http://localhost:8000/api/v1/register\", formData).then(response => {\n        console.log(response);\n        return response;\n      }).then(json => {\n        if (json.data.success) {\n          // alert(`Registration Successful!`);\n          const {\n            id,\n            fname,\n            lname,\n            email,\n            phone\n          } = json.data.user;\n          const {\n            token\n          } = json.data.token;\n          let userData = {\n            id,\n            fname,\n            lname,\n            email,\n            phone,\n            token,\n            timestamp: new Date().toString()\n          };\n          let appState = {\n            isLoggedIn: true,\n            user: userData\n          }; // save app state with user date in local storage\n\n          localStorage[\"appState\"] = JSON.stringify(appState);\n          this.setState({\n            isLoggedIn: appState.isLoggedIn,\n            user: appState.user,\n            token: appState.token\n          }); // redirect home\n\n          this.props.history.push(\"/\");\n        } else {\n          alert(`Registration Failed!`);\n          $(\"#email-login-btn\").removeAttr(\"disabled\").html(\"Register\");\n        }\n      }).catch(error => {\n        alert(\"An Error Occured!\" + error);\n        console.log(`${formData} ${error}`);\n        $(\"#email-login-btn\").removeAttr(\"disabled\").html(\"Register\");\n      });\n    };\n\n    this._logoutUser = () => {\n      let appState = {\n        isLoggedIn: false,\n        user: {}\n      }; // save app state with user date in local storage\n\n      localStorage[\"appState\"] = JSON.stringify(appState);\n      this.setState(appState);\n    };\n\n    this.state = {\n      isLoggedIn: false,\n      user: {}\n    };\n  }\n\n  componentDidMount() {\n    let state = localStorage[\"appState\"];\n\n    if (state) {\n      let AppState = JSON.parse(state); // console.log(AppState);\n\n      this.setState({\n        isLoggedIn: AppState.isLoggedIn,\n        user: AppState\n      });\n    }\n  }\n\n  render() {\n    // console.log(this.state.isLoggedIn);\n    // console.log(\"path name: \" + this.props.location.pathname);\n    // if (\n    //   !this.state.isLoggedIn &&\n    //   this.props.location.pathname !== \"/login\" &&\n    //   this.props.location.pathname !== \"/register\"\n    // ) {\n    //   this.props.history.push(\"/login\");\n    // }\n    // if (\n    //   this.state.isLoggedIn &&\n    //   (this.props.location.pathname === \"/login\" ||\n    //     this.props.location.pathname === \"/register\")\n    // ) {\n    //   this.props.history.push(\"/\");\n    // }\n    return /*#__PURE__*/React.createElement(Switch, {\n      data: \"data\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: props => /*#__PURE__*/React.createElement(Home, Object.assign({}, props, {\n        logoutUser: this._logoutUser,\n        user: this.state.user,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 15\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/view\",\n      render: props => /*#__PURE__*/React.createElement(View, Object.assign({}, props, {\n        logoutUser: this._logoutUser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 15\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/login\",\n      render: props => /*#__PURE__*/React.createElement(Login, Object.assign({}, props, {\n        loginUser: this._loginUser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 30\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/register\",\n      render: props => /*#__PURE__*/React.createElement(Register, Object.assign({}, props, {\n        registerUser: this._registerUser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 15\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/edit\",\n      render: props => /*#__PURE__*/React.createElement(Edit, Object.assign({}, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 15\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nconst AppContainer = withRouter(props => /*#__PURE__*/React.createElement(App, Object.assign({}, props, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 230,\n    columnNumber: 42\n  }\n}))); // console.log(store.getState())\n\nrender( /*#__PURE__*/React.createElement(BrowserRouter, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(AppContainer, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 234,\n    columnNumber: 5\n  }\n})), document.getElementById(\"root\"));","map":{"version":3,"sources":["/Users/hipheckt/codes/sapio/src/index.js"],"names":["React","render","BrowserRouter","Route","Switch","withRouter","Home","Login","Register","View","Edit","swal","axios","$","App","Component","constructor","props","_loginUser","email","password","attr","html","formData","FormData","append","post","then","response","console","log","json","data","success","message","id","fname","lname","phone","user","token","userData","timestamp","Date","toString","appState","isLoggedIn","localStorage","JSON","stringify","setState","history","push","removeAttr","catch","error","alert","_registerUser","_logoutUser","state","componentDidMount","AppState","parse","AppContainer","document","getElementById"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { render } from \"react-dom\";\nimport { BrowserRouter, Route, Switch, withRouter } from \"react-router-dom\";\nimport Home from \"./Home\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport View from \"./View\";\nimport Edit from \"./Edit\";\n\nimport swal from 'sweetalert';\n\nimport axios from \"axios\";\nimport $ from \"jquery\";\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoggedIn: false,\n      user: {}\n    };\n  }\n  _loginUser = (email, password) => {\n    $(\"#login-form button\")\n      .attr(\"disabled\", \"disabled\")\n      .html(\n        '<i class=\"fa fa-spinner fa-spin fa-1x fa-fw\"></i><span class=\"sr-only\">Loading...</span>'\n      );\n    var formData = new FormData();\n    formData.append(\"email\", email);\n    formData.append(\"password\", password);\n\n    axios\n      .post(\"http://localhost:8000/api/v1/login/\", formData)\n      .then(response => {\n        console.log(response);\n        return response;\n      })\n      .then(json => {\n        if (json.data.success) {\n          // alert(json.data.message);\n          swal(\"Oops!\", json.data.message, \"success\");\n          const { id, fname, lname, email, phone } = json.data.user;\n          const { token } = json.data.token;\n\n          let userData = {\n            id,\n            fname,\n            lname,\n            email,\n            phone,\n            token,\n            timestamp: new Date().toString()\n          };\n          let appState = {\n            isLoggedIn: true,\n            user: userData\n          };\n          // save app state with user date in local storage\n          localStorage[\"appState\"] = JSON.stringify(appState);\n          this.setState({\n            isLoggedIn: appState.isLoggedIn,\n            user: appState.user,\n            token: appState.token\n          });\n          // redirect home\n          this.props.history.push(\"/\");\n        } else swal(\"Error!\", json.data.message, \"error\");\n        ;\n\n        $(\"#login-form button\")\n          .removeAttr(\"disabled\")\n          .html(\"Login\");\n      })\n      .catch(error => {\n        alert(`An Error Occured! ${error}`);\n        $(\"#login-form button\")\n          .removeAttr(\"disabled\")\n          .html(\"Login\");\n      });\n  };\n\n  _registerUser = (fname, lname, email, phone, password) => {\n    $(\"#email-login-btn\")\n      .attr(\"disabled\", \"disabled\")\n      .html(\n        '<i class=\"fa fa-spinner fa-spin fa-1x fa-fw\"></i><span class=\"sr-only\">Loading...</span>'\n      );\n\n    var formData = new FormData();\n    formData.append(\"fname\", fname);\n    formData.append(\"lname\", lname);\n    formData.append(\"email\", email);\n    formData.append(\"phone\", phone);\n    formData.append(\"password\", password);\n\n    axios\n      .post(\"http://localhost:8000/api/v1/register\", formData)\n      .then(response => {\n        console.log(response);\n        return response;\n      })\n      .then(json => {\n        if (json.data.success) {\n          // alert(`Registration Successful!`);\n          const { id, fname, lname, email, phone } = json.data.user;\n          const { token } = json.data.token;\n          let userData = {\n            id,\n            fname,\n            lname,\n            email,\n            phone,\n            token,\n            timestamp: new Date().toString()\n          };\n          let appState = {\n            isLoggedIn: true,\n            user: userData\n          };\n          // save app state with user date in local storage\n          localStorage[\"appState\"] = JSON.stringify(appState);\n          this.setState({\n            isLoggedIn: appState.isLoggedIn,\n            user: appState.user,\n            token: appState.token\n          });\n          // redirect home\n          this.props.history.push(\"/\");\n        } else {\n          alert(`Registration Failed!`);\n          $(\"#email-login-btn\")\n            .removeAttr(\"disabled\")\n            .html(\"Register\");\n        }\n      })\n      .catch(error => {\n        alert(\"An Error Occured!\" + error);\n        console.log(`${formData} ${error}`);\n        $(\"#email-login-btn\")\n          .removeAttr(\"disabled\")\n          .html(\"Register\");\n      });\n  };\n\n\n  _logoutUser = () => {\n    let appState = {\n      isLoggedIn: false,\n      user: {}\n    };\n    // save app state with user date in local storage\n    localStorage[\"appState\"] = JSON.stringify(appState);\n    this.setState(appState);\n  };\n\n  componentDidMount() {\n    let state = localStorage[\"appState\"];\n    if (state) {\n      let AppState = JSON.parse(state);\n      // console.log(AppState);\n      this.setState({ isLoggedIn: AppState.isLoggedIn, user: AppState });\n    }\n  }\n\n  render() {\n    // console.log(this.state.isLoggedIn);\n    // console.log(\"path name: \" + this.props.location.pathname);\n      // if (\n      //   !this.state.isLoggedIn &&\n      //   this.props.location.pathname !== \"/login\" &&\n      //   this.props.location.pathname !== \"/register\"\n      // ) {\n      //   this.props.history.push(\"/login\");\n      // }\n      // if (\n      //   this.state.isLoggedIn &&\n      //   (this.props.location.pathname === \"/login\" ||\n      //     this.props.location.pathname === \"/register\")\n      // ) {\n      //   this.props.history.push(\"/\");\n      // }\n    return (\n      <Switch data=\"data\">\n        <div id=\"main\">\n          <Route\n            exact\n            path=\"/\"\n            render={props => (\n              <Home\n                {...props}\n                logoutUser={this._logoutUser}\n                user={this.state.user}\n              />\n            )}\n          />\n          <Route\n            path=\"/view\"\n            render={props => (\n              <View\n                {...props}\n                logoutUser={this._logoutUser}\n              />\n            )}\n          />\n\n          <Route\n            path=\"/login\"\n            render={props => <Login {...props} loginUser={this._loginUser} />}\n          />\n\n          <Route\n            path=\"/register\"\n            render={props => (\n              <Register {...props} registerUser={this._registerUser} />\n            )}\n          />\n\n          <Route\n            path=\"/edit\"\n            render={props => (\n              <Edit {...props}/>\n            )}\n          />\n        </div>\n      </Switch>\n    );\n  }\n}\n\nconst AppContainer = withRouter(props => <App {...props} />);\n// console.log(store.getState())\nrender(\n  <BrowserRouter>\n    <AppContainer />\n  </BrowserRouter>,\n\n  document.getElementById(\"root\")\n);\n"]},"metadata":{},"sourceType":"module"}