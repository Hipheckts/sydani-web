{"ast":null,"code":"import _objectSpread from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link,Redirect,Route}from\"react-router-dom\";import Header from\"../common/Header\";import Footer from\"../common/Footer\";import ScriptTag from\"react-script-tag\";import NumberFormat from\"react-number-format\";import{PaystackConsumer}from\"react-paystack\";import AOS from\"aos\";import axios from\"axios\";import swal from\"sweetalert\";import $ from\"jquery\";var _fname,_lname,_email,_phone,_password;export var Register=/*#__PURE__*/function(_Component){_inherits(Register,_Component);var _super=_createSuper(Register);function Register(props){var _this;_classCallCheck(this,Register);_this=_super.call(this,props);_this.state={auth_code:\"\"};return _this;}_createClass(Register,[{key:\"render\",value:function render(){var _this2=this;var isLoggedIn=localStorage[\"appState\"]?JSON.parse(localStorage[\"appState\"]).isLoggedIn:\"\";var configNGN={// reference: (new Date()).getTime(),\nemail:\"hipheckt@gmail.com\",// plan: this.state.plan,\namount:\"100000\"+\"00\",currency:\"NGN\",// publicKey: 'pk_live_68d2b6e9edacd11392f5548db9047ffb4911b39d',\npublicKey:\"pk_test_a842c66ae323671a5e629e8970958560b65d3ad6\"};var componentPropsNGN=_objectSpread(_objectSpread({},configNGN),{},{text:\"Sapio Sibling Registration\",onSuccess:function onSuccess(response){// console.log(response);\n$(\"#reg-button\").attr(\"disabled\",\"disabled\").html('<i class=\"fa fa-spinner fa-spin fa-1x fa-fw\"></i><span class=\"sr-only\">Creating Account...</span>');_this2.setState({payment_ref:response.trxref});axios({method:\"get\",url:\"https://api.paystack.co/transaction/verify/\".concat(_this2.state.payment_ref),// headers: {'Authorization': `Bearer sk_live_5299c2d2e25663425657490251d1cec7d8c206aa`, 'Content-Type': 'application/json' }\nheaders:{Authorization:\"Bearer sk_test_b921c5ae7960bc5df7b895cad6b1f37ce0b29b73\",\"Content-Type\":\"application/json\"}}).then(function(response){console.log(response);return response;}).then(function(json){_this2.setState({auth_code:json.data.data.authorization.authorization_code});// swal(\n//   \"Success!\",\n//   this.state.auth_code,\n//   \"success\",\n//   {\n//     button: false,\n//     // timer: 1500,\n//   }\n// );\nvar formData=new FormData();formData.append(\"fname\",_fname.value);formData.append(\"lname\",_lname.value);formData.append(\"email\",_email.value);formData.append(\"phone\",_phone.value);formData.append(\"password\",_password.value);formData.append(\"auth_code\",_this2.state.auth_code);axios.post(\"\".concat(axios.defaults.baseURL,\"/register\"),formData).then(function(response){//console.log(response);\nreturn response;}).then(function(json){if(json.data.success){// alert(`Registration Successful!`);\nswal(\"Success!\",json.data.message,\"success\",{button:false,timer:1500});var _json$data$user=json.data.user,id=_json$data$user.id,fname=_json$data$user.fname,lname=_json$data$user.lname,email=_json$data$user.email,phone=_json$data$user.phone;var token=json.data.token.token;var userData={id:id,fname:fname,lname:lname,email:email,phone:phone,token:token,timestamp:new Date().toString()};var appState={isLoggedIn:true,user:userData};// save app state with user date in local storage\nlocalStorage[\"appState\"]=JSON.stringify(appState);_this2.setState({isLoggedIn:appState.isLoggedIn,user:appState.user,token:appState.token});// redirect home\n_this2.props.history.push(\"/dashboard\");}else{// alert(`Registration Failed!`);\nswal(\"Failed\",\"Registration Failed\",\"error\");$(\"#reg-button\").removeAttr(\"disabled\").html(\"Register\");}}).catch(function(error){// alert(\"An Error Occured!\" + error);\nvar res=(error.response.data.message.fname||\"\")+(error.response.data.message.lname||\"\")+(error.response.data.message.email||\"\")+(error.response.data.message.phone||\"\")+(error.response.data.message.password||\"\");swal(\"Error!\",\"\"+res,\"error\",{button:false// timer: 1500\n});//console.log(error);\n$(\"#reg-button\").removeAttr(\"disabled\").html(\"Register\");});});},onClose:function onClose(){return null;}});return isLoggedIn?/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/dashboard\",state:{from:\"/register\"}}}):/*#__PURE__*/React.createElement(\"body\",{className:\"page-overview  ac-gn-current-music\"},/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"section\",{id:\"section-battery\",className:\"section section-battery theme-dark\",\"data-anim-scroll-group\":\"section-battery\",\"data-analytics-fallback-section-engagement\":\"name:battery\"},/*#__PURE__*/React.createElement(\"div\",{className:\"copy-scroll-container\",\"data-component-list\":\"CopyMagic\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sticky-copy-lockup flex-copy-lockup intro\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\",\"data-copy\":\"0\"},/*#__PURE__*/React.createElement(\"p\",{className:\"typography-section-eyebrow align-text default-text\"},\"Become a Sapio Sibling!\"),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col\"},/*#__PURE__*/React.createElement(\"label\",{for:\"firstname\",className:\"sr-only\"},\"Firstname\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _fname=input;},type:\"firstname\",name:\"firstname\",id:\"firstname\",className:\"form-control input-field\",placeholder:\"Firstname\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col\"},/*#__PURE__*/React.createElement(\"label\",{for:\"lastname\",className:\"sr-only\"},\"Lastname\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _lname=input;},type:\"lastname\",name:\"lastname\",id:\"lastname\",className:\"form-control input-field\",placeholder:\"Lastname\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col\"},/*#__PURE__*/React.createElement(\"label\",{for:\"email\",className:\"sr-only\"},\"Email\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _email=input;},type:\"email\",name:\"email\",id:\"email\",className:\"form-control input-field\",placeholder:\"Email Address\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col\"},/*#__PURE__*/React.createElement(\"label\",{for:\"telephone\",className:\"sr-only\"},\"Telephone\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _phone=input;},type:\"telephone\",name:\"telephone\",id:\"telephone\",className:\"form-control input-field\",placeholder:\"Telephone\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col\"},/*#__PURE__*/React.createElement(\"label\",{for:\"password\",className:\"sr-only\"},\"Password\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _password=input;},type:\"password\",name:\"password\",id:\"password\",className:\"form-control input-field\",placeholder:\"Password\"})),/*#__PURE__*/React.createElement(PaystackConsumer,componentPropsNGN,function(_ref){var initializePayment=_ref.initializePayment;return/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return swal(\"You will be required to pay a membership fee of â‚¦100,000\",{buttons:{cancel:\"No, Cancel\",catch:{text:\"Yes, Continue\",value:\"catch\"}}}).then(function(value){switch(value){case\"catch\":initializePayment();break;default:}});},id:\"reg-button\",name:\"register-button\",className:\"submit-button\",style:{marginTop:\"32px\"}},\"Register Account\");}))))))),/*#__PURE__*/React.createElement(Footer,null),/*#__PURE__*/React.createElement(ScriptTag,{type:\"text/javascript\",src:\"../assets/js/built.js\"}));}}]);return Register;}(Component);export default Register;","map":{"version":3,"sources":["/Users/hipheckt/codes/sapioclub/react/src/auth/Register.js"],"names":["React","Component","Link","Redirect","Route","Header","Footer","ScriptTag","NumberFormat","PaystackConsumer","AOS","axios","swal","$","_fname","_lname","_email","_phone","_password","Register","props","state","auth_code","isLoggedIn","localStorage","JSON","parse","configNGN","email","amount","currency","publicKey","componentPropsNGN","text","onSuccess","response","attr","html","setState","payment_ref","trxref","method","url","headers","Authorization","then","console","log","json","data","authorization","authorization_code","formData","FormData","append","value","post","defaults","baseURL","success","message","button","timer","user","id","fname","lname","phone","token","userData","timestamp","Date","toString","appState","stringify","history","push","removeAttr","catch","error","res","password","onClose","pathname","from","input","initializePayment","buttons","cancel","marginTop"],"mappings":"2vBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,CAAeC,QAAf,CAAyBC,KAAzB,KAAsC,kBAAtC,CAEA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,CAEA,MAAOC,CAAAA,SAAP,KAAsB,kBAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,qBAAzB,CACA,OAASC,gBAAT,KAAiC,gBAAjC,CAEA,MAAOC,CAAAA,GAAP,KAAgB,KAAhB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CAEA,GAAIC,CAAAA,MAAJ,CAAYC,MAAZ,CAAoBC,MAApB,CAA4BC,MAA5B,CAAoCC,SAApC,CAEA,UAAaC,CAAAA,QAAb,oGACE,kBAAYC,KAAZ,CAAmB,0CACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,SAAS,CAAE,EADA,CAAb,CAFiB,aAKlB,CANH,4DAQW,iBACP,GAAMC,CAAAA,UAAU,CAAGC,YAAY,CAAC,UAAD,CAAZ,CACfC,IAAI,CAACC,KAAL,CAAWF,YAAY,CAAC,UAAD,CAAvB,EAAqCD,UADtB,CAEf,EAFJ,CAIA,GAAMI,CAAAA,SAAS,CAAG,CAChB;AACAC,KAAK,CAAE,oBAFS,CAGhB;AACAC,MAAM,CAAE,SAAW,IAJH,CAKhBC,QAAQ,CAAE,KALM,CAMhB;AACAC,SAAS,CAAE,kDAPK,CAAlB,CAUA,GAAMC,CAAAA,iBAAiB,gCAClBL,SADkB,MAErBM,IAAI,CAAE,4BAFe,CAGrBC,SAAS,CAAE,mBAACC,QAAD,CAAc,CACvB;AAEAtB,CAAC,CAAC,aAAD,CAAD,CACGuB,IADH,CACQ,UADR,CACoB,UADpB,EAEGC,IAFH,CAGI,mGAHJ,EAMA,MAAI,CAACC,QAAL,CAAc,CACZC,WAAW,CAAEJ,QAAQ,CAACK,MADV,CAAd,EAIA7B,KAAK,CAAC,CACJ8B,MAAM,CAAE,KADJ,CAEJC,GAAG,sDAAgD,MAAI,CAACrB,KAAL,CAAWkB,WAA3D,CAFC,CAGJ;AACAI,OAAO,CAAE,CACPC,aAAa,0DADN,CAEP,eAAgB,kBAFT,CAJL,CAAD,CAAL,CASGC,IATH,CASQ,SAACV,QAAD,CAAc,CAClBW,OAAO,CAACC,GAAR,CAAYZ,QAAZ,EACA,MAAOA,CAAAA,QAAP,CACD,CAZH,EAaGU,IAbH,CAaQ,SAACG,IAAD,CAAU,CAEd,MAAI,CAACV,QAAL,CAAc,CACZhB,SAAS,CAAE0B,IAAI,CAACC,IAAL,CAAUA,IAAV,CAAeC,aAAf,CAA6BC,kBAD5B,CAAd,EAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,GAAIC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAf,CACAD,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBxC,MAAM,CAACyC,KAAhC,EACAH,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBvC,MAAM,CAACwC,KAAhC,EACAH,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBtC,MAAM,CAACuC,KAAhC,EACAH,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBrC,MAAM,CAACsC,KAAhC,EACAH,QAAQ,CAACE,MAAT,CAAgB,UAAhB,CAA4BpC,SAAS,CAACqC,KAAtC,EACAH,QAAQ,CAACE,MAAT,CAAgB,WAAhB,CAA6B,MAAI,CAACjC,KAAL,CAAWC,SAAxC,EAEAX,KAAK,CACF6C,IADH,WACW7C,KAAK,CAAC8C,QAAN,CAAeC,OAD1B,cAC8CN,QAD9C,EAEGP,IAFH,CAEQ,SAACV,QAAD,CAAc,CAClB;AACA,MAAOA,CAAAA,QAAP,CACD,CALH,EAMGU,IANH,CAMQ,SAACG,IAAD,CAAU,CACd,GAAIA,IAAI,CAACC,IAAL,CAAUU,OAAd,CAAuB,CACrB;AACA/C,IAAI,CAAC,UAAD,CAAaoC,IAAI,CAACC,IAAL,CAAUW,OAAvB,CAAgC,SAAhC,CAA2C,CAC7CC,MAAM,CAAE,KADqC,CAE7CC,KAAK,CAAE,IAFsC,CAA3C,CAAJ,CAFqB,oBAMsBd,IAAI,CAACC,IAAL,CAAUc,IANhC,CAMbC,EANa,iBAMbA,EANa,CAMTC,KANS,iBAMTA,KANS,CAMFC,KANE,iBAMFA,KANE,CAMKtC,KANL,iBAMKA,KANL,CAMYuC,KANZ,iBAMYA,KANZ,IAObC,CAAAA,KAPa,CAOHpB,IAAI,CAACC,IAAL,CAAUmB,KAPP,CAObA,KAPa,CAQrB,GAAIC,CAAAA,QAAQ,CAAG,CACbL,EAAE,CAAFA,EADa,CAEbC,KAAK,CAALA,KAFa,CAGbC,KAAK,CAALA,KAHa,CAIbtC,KAAK,CAALA,KAJa,CAKbuC,KAAK,CAALA,KALa,CAMbC,KAAK,CAALA,KANa,CAObE,SAAS,CAAE,GAAIC,CAAAA,IAAJ,GAAWC,QAAX,EAPE,CAAf,CASA,GAAIC,CAAAA,QAAQ,CAAG,CACblD,UAAU,CAAE,IADC,CAEbwC,IAAI,CAAEM,QAFO,CAAf,CAIA;AACA7C,YAAY,CAAC,UAAD,CAAZ,CAA2BC,IAAI,CAACiD,SAAL,CAAeD,QAAf,CAA3B,CACA,MAAI,CAACnC,QAAL,CAAc,CACZf,UAAU,CAAEkD,QAAQ,CAAClD,UADT,CAEZwC,IAAI,CAAEU,QAAQ,CAACV,IAFH,CAGZK,KAAK,CAAEK,QAAQ,CAACL,KAHJ,CAAd,EAKA;AACA,MAAI,CAAChD,KAAL,CAAWuD,OAAX,CAAmBC,IAAnB,CAAwB,YAAxB,EACD,CA9BD,IA8BO,CACL;AACAhE,IAAI,CAAC,QAAD,CAAW,qBAAX,CAAkC,OAAlC,CAAJ,CACAC,CAAC,CAAC,aAAD,CAAD,CAAiBgE,UAAjB,CAA4B,UAA5B,EAAwCxC,IAAxC,CAA6C,UAA7C,EACD,CACF,CA1CH,EA2CGyC,KA3CH,CA2CS,SAACC,KAAD,CAAW,CAChB;AACA,GAAIC,CAAAA,GAAG,CACL,CAACD,KAAK,CAAC5C,QAAN,CAAec,IAAf,CAAoBW,OAApB,CAA4BK,KAA5B,EAAqC,EAAtC,GACCc,KAAK,CAAC5C,QAAN,CAAec,IAAf,CAAoBW,OAApB,CAA4BM,KAA5B,EAAqC,EADtC,GAECa,KAAK,CAAC5C,QAAN,CAAec,IAAf,CAAoBW,OAApB,CAA4BhC,KAA5B,EAAqC,EAFtC,GAGCmD,KAAK,CAAC5C,QAAN,CAAec,IAAf,CAAoBW,OAApB,CAA4BO,KAA5B,EAAqC,EAHtC,GAICY,KAAK,CAAC5C,QAAN,CAAec,IAAf,CAAoBW,OAApB,CAA4BqB,QAA5B,EAAwC,EAJzC,CADF,CAMArE,IAAI,CAAC,QAAD,CAAW,GAAKoE,GAAhB,CAAqB,OAArB,CAA8B,CAChCnB,MAAM,CAAE,KACR;AAFgC,CAA9B,CAAJ,CAIA;AACAhD,CAAC,CAAC,aAAD,CAAD,CAAiBgE,UAAjB,CAA4B,UAA5B,EAAwCxC,IAAxC,CAA6C,UAA7C,EACD,CAzDH,EA0DD,CA/FH,EAgGD,CAhHoB,CAiHrB6C,OAAO,CAAE,yBAAM,KAAN,EAjHY,EAAvB,CAmHA,MAAO3D,CAAAA,UAAU,cACf,oBAAC,QAAD,EAAU,EAAE,CAAE,CAAE4D,QAAQ,CAAE,YAAZ,CAA0B9D,KAAK,CAAE,CAAE+D,IAAI,CAAE,WAAR,CAAjC,CAAd,EADe,cAGf,4BAAM,SAAS,CAAC,oCAAhB,eACE,oBAAC,MAAD,MADF,cAEE,+BACE,EAAE,CAAC,iBADL,CAEE,SAAS,CAAC,oCAFZ,CAGE,yBAAuB,iBAHzB,CAIE,6CAA2C,cAJ7C,eAME,2BACE,SAAS,CAAC,uBADZ,CAEE,sBAAoB,WAFtB,eAIE,2BAAK,SAAS,CAAC,2CAAf,eACE,2BAAK,SAAS,CAAC,EAAf,CAAkB,YAAU,GAA5B,eACE,yBAAG,SAAS,CAAC,oDAAb,4BADF,cAKE,6CACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,6BAAO,GAAG,CAAC,WAAX,CAAuB,SAAS,CAAC,SAAjC,cADF,cAIE,8BAJF,cAKE,6BACE,GAAG,CAAE,aAACC,KAAD,QAAYvE,CAAAA,MAAM,CAAGuE,KAArB,EADP,CAEE,IAAI,CAAC,WAFP,CAGE,IAAI,CAAC,WAHP,CAIE,EAAE,CAAC,WAJL,CAKE,SAAS,CAAC,0BALZ,CAME,WAAW,CAAC,WANd,EALF,CADF,cAeE,2BAAK,SAAS,CAAC,gBAAf,eACE,6BAAO,GAAG,CAAC,UAAX,CAAsB,SAAS,CAAC,SAAhC,aADF,cAIE,8BAJF,cAKE,6BACE,GAAG,CAAE,aAACA,KAAD,QAAYtE,CAAAA,MAAM,CAAGsE,KAArB,EADP,CAEE,IAAI,CAAC,UAFP,CAGE,IAAI,CAAC,UAHP,CAIE,EAAE,CAAC,UAJL,CAKE,SAAS,CAAC,0BALZ,CAME,WAAW,CAAC,UANd,EALF,CAfF,CADF,cA+BE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,6BAAO,GAAG,CAAC,OAAX,CAAmB,SAAS,CAAC,SAA7B,UADF,cAIE,8BAJF,cAKE,6BACE,GAAG,CAAE,aAACA,KAAD,QAAYrE,CAAAA,MAAM,CAAGqE,KAArB,EADP,CAEE,IAAI,CAAC,OAFP,CAGE,IAAI,CAAC,OAHP,CAIE,EAAE,CAAC,OAJL,CAKE,SAAS,CAAC,0BALZ,CAME,WAAW,CAAC,eANd,EALF,CADF,cAeE,2BAAK,SAAS,CAAC,gBAAf,eACE,6BAAO,GAAG,CAAC,WAAX,CAAuB,SAAS,CAAC,SAAjC,cADF,cAIE,8BAJF,cAKE,6BACE,GAAG,CAAE,aAACA,KAAD,QAAYpE,CAAAA,MAAM,CAAGoE,KAArB,EADP,CAEE,IAAI,CAAC,WAFP,CAGE,IAAI,CAAC,WAHP,CAIE,EAAE,CAAC,WAJL,CAKE,SAAS,CAAC,0BALZ,CAME,WAAW,CAAC,WANd,EALF,CAfF,CA/BF,cA6DE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,6BAAO,GAAG,CAAC,UAAX,CAAsB,SAAS,CAAC,SAAhC,aADF,cAIE,8BAJF,cAKE,6BACE,GAAG,CAAE,aAACA,KAAD,QAAYnE,CAAAA,SAAS,CAAGmE,KAAxB,EADP,CAEE,IAAI,CAAC,UAFP,CAGE,IAAI,CAAC,UAHP,CAIE,EAAE,CAAC,UAJL,CAKE,SAAS,CAAC,0BALZ,CAME,WAAW,CAAC,UANd,EALF,CADF,cAeE,oBAAC,gBAAD,CAAsBrD,iBAAtB,CACG,kBAAGsD,CAAAA,iBAAH,MAAGA,iBAAH,oBACC,8BACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAE,yBACP1E,CAAAA,IAAI,CACF,0DADE,CAEF,CACE2E,OAAO,CAAE,CACPC,MAAM,CAAE,YADD,CAEPV,KAAK,CAAE,CACL7C,IAAI,CAAE,eADD,CAELsB,KAAK,CAAE,OAFF,CAFA,CADX,CAFE,CAAJ,CAWEV,IAXF,CAWO,SAACU,KAAD,CAAW,CAChB,OAAQA,KAAR,EACE,IAAK,OAAL,CACE+B,iBAAiB,GACjB,MAEF,QALF,CAOD,CAnBD,CADO,EAFX,CAwBE,EAAE,CAAC,YAxBL,CAyBE,IAAI,CAAC,iBAzBP,CA0BE,SAAS,CAAC,eA1BZ,CA2BE,KAAK,CAAE,CAAEG,SAAS,CAAE,MAAb,CA3BT,qBADD,EADH,CAfF,CA7DF,CALF,CADF,CAJF,CANF,CAFF,cAwIE,oBAAC,MAAD,MAxIF,cA0IE,oBAAC,SAAD,EACE,IAAI,CAAC,iBADP,CAEE,GAAG,CAAC,uBAFN,EA1IF,CAHF,CAmJD,CA7RH,sBAA8BxF,SAA9B,EA+RA,cAAekB,CAAAA,QAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, Redirect, Route } from \"react-router-dom\";\n\nimport Header from \"../common/Header\";\nimport Footer from \"../common/Footer\";\n\nimport ScriptTag from \"react-script-tag\";\nimport NumberFormat from \"react-number-format\";\nimport { PaystackConsumer } from \"react-paystack\";\n\nimport AOS from \"aos\";\nimport axios from \"axios\";\nimport swal from \"sweetalert\";\nimport $ from \"jquery\";\n\nvar _fname, _lname, _email, _phone, _password;\n\nexport class Register extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      auth_code: \"\",\n    };\n  }\n\n  render() {\n    const isLoggedIn = localStorage[\"appState\"]\n      ? JSON.parse(localStorage[\"appState\"]).isLoggedIn\n      : \"\";\n\n    const configNGN = {\n      // reference: (new Date()).getTime(),\n      email: \"hipheckt@gmail.com\",\n      // plan: this.state.plan,\n      amount: \"100000\" + \"00\",\n      currency: \"NGN\",\n      // publicKey: 'pk_live_68d2b6e9edacd11392f5548db9047ffb4911b39d',\n      publicKey: \"pk_test_a842c66ae323671a5e629e8970958560b65d3ad6\",\n    };\n\n    const componentPropsNGN = {\n      ...configNGN,\n      text: \"Sapio Sibling Registration\",\n      onSuccess: (response) => {\n        // console.log(response);\n\n        $(\"#reg-button\")\n          .attr(\"disabled\", \"disabled\")\n          .html(\n            '<i class=\"fa fa-spinner fa-spin fa-1x fa-fw\"></i><span class=\"sr-only\">Creating Account...</span>'\n          );\n\n        this.setState({\n          payment_ref: response.trxref,\n        });\n\n        axios({\n          method: \"get\",\n          url: `https://api.paystack.co/transaction/verify/${this.state.payment_ref}`,\n          // headers: {'Authorization': `Bearer sk_live_5299c2d2e25663425657490251d1cec7d8c206aa`, 'Content-Type': 'application/json' }\n          headers: {\n            Authorization: `Bearer sk_test_b921c5ae7960bc5df7b895cad6b1f37ce0b29b73`,\n            \"Content-Type\": \"application/json\",\n          },\n        })\n          .then((response) => {\n            console.log(response);\n            return response;\n          })\n          .then((json) => {\n\n            this.setState({\n              auth_code: json.data.data.authorization.authorization_code,\n            });\n\n            // swal(\n            //   \"Success!\",\n            //   this.state.auth_code,\n            //   \"success\",\n            //   {\n            //     button: false,\n            //     // timer: 1500,\n            //   }\n            // );\n\n            var formData = new FormData();\n            formData.append(\"fname\", _fname.value);\n            formData.append(\"lname\", _lname.value);\n            formData.append(\"email\", _email.value);\n            formData.append(\"phone\", _phone.value);\n            formData.append(\"password\", _password.value);\n            formData.append(\"auth_code\", this.state.auth_code);\n\n            axios\n              .post(`${axios.defaults.baseURL}/register`, formData)\n              .then((response) => {\n                //console.log(response);\n                return response;\n              })\n              .then((json) => {\n                if (json.data.success) {\n                  // alert(`Registration Successful!`);\n                  swal(\"Success!\", json.data.message, \"success\", {\n                    button: false,\n                    timer: 1500,\n                  });\n                  const { id, fname, lname, email, phone } = json.data.user;\n                  const { token } = json.data.token;\n                  let userData = {\n                    id,\n                    fname,\n                    lname,\n                    email,\n                    phone,\n                    token,\n                    timestamp: new Date().toString(),\n                  };\n                  let appState = {\n                    isLoggedIn: true,\n                    user: userData,\n                  };\n                  // save app state with user date in local storage\n                  localStorage[\"appState\"] = JSON.stringify(appState);\n                  this.setState({\n                    isLoggedIn: appState.isLoggedIn,\n                    user: appState.user,\n                    token: appState.token,\n                  });\n                  // redirect home\n                  this.props.history.push(\"/dashboard\");\n                } else {\n                  // alert(`Registration Failed!`);\n                  swal(\"Failed\", \"Registration Failed\", \"error\");\n                  $(\"#reg-button\").removeAttr(\"disabled\").html(\"Register\");\n                }\n              })\n              .catch((error) => {\n                // alert(\"An Error Occured!\" + error);\n                let res =\n                  (error.response.data.message.fname || \"\") +\n                  (error.response.data.message.lname || \"\") +\n                  (error.response.data.message.email || \"\") +\n                  (error.response.data.message.phone || \"\") +\n                  (error.response.data.message.password || \"\");\n                swal(\"Error!\", \"\" + res, \"error\", {\n                  button: false,\n                  // timer: 1500\n                });\n                //console.log(error);\n                $(\"#reg-button\").removeAttr(\"disabled\").html(\"Register\");\n              });\n          });\n      },\n      onClose: () => null,\n    };\n    return isLoggedIn ? (\n      <Redirect to={{ pathname: \"/dashboard\", state: { from: \"/register\" } }} />\n    ) : (\n      <body className=\"page-overview  ac-gn-current-music\">\n        <Header />\n        <section\n          id=\"section-battery\"\n          className=\"section section-battery theme-dark\"\n          data-anim-scroll-group=\"section-battery\"\n          data-analytics-fallback-section-engagement=\"name:battery\"\n        >\n          <div\n            className=\"copy-scroll-container\"\n            data-component-list=\"CopyMagic\"\n          >\n            <div className=\"sticky-copy-lockup flex-copy-lockup intro\">\n              <div className=\"\" data-copy=\"0\">\n                <p className=\"typography-section-eyebrow align-text default-text\">\n                  Become a Sapio Sibling!\n                </p>\n                {/* <form id=\"reg\" onSubmit={handleRegistration} method=\"post\"> */}\n                <form>\n                  <div className=\"row\">\n                    <div className=\"form-group col\">\n                      <label for=\"firstname\" className=\"sr-only\">\n                        Firstname\n                      </label>\n                      <br />\n                      <input\n                        ref={(input) => (_fname = input)}\n                        type=\"firstname\"\n                        name=\"firstname\"\n                        id=\"firstname\"\n                        className=\"form-control input-field\"\n                        placeholder=\"Firstname\"\n                      />\n                    </div>\n                    <div className=\"form-group col\">\n                      <label for=\"lastname\" className=\"sr-only\">\n                        Lastname\n                      </label>\n                      <br />\n                      <input\n                        ref={(input) => (_lname = input)}\n                        type=\"lastname\"\n                        name=\"lastname\"\n                        id=\"lastname\"\n                        className=\"form-control input-field\"\n                        placeholder=\"Lastname\"\n                      />\n                    </div>\n                  </div>\n                  <div className=\"row\">\n                    <div className=\"form-group col\">\n                      <label for=\"email\" className=\"sr-only\">\n                        Email\n                      </label>\n                      <br />\n                      <input\n                        ref={(input) => (_email = input)}\n                        type=\"email\"\n                        name=\"email\"\n                        id=\"email\"\n                        className=\"form-control input-field\"\n                        placeholder=\"Email Address\"\n                      />\n                    </div>\n                    <div className=\"form-group col\">\n                      <label for=\"telephone\" className=\"sr-only\">\n                        Telephone\n                      </label>\n                      <br />\n                      <input\n                        ref={(input) => (_phone = input)}\n                        type=\"telephone\"\n                        name=\"telephone\"\n                        id=\"telephone\"\n                        className=\"form-control input-field\"\n                        placeholder=\"Telephone\"\n                      />\n                    </div>\n                  </div>\n                  <div className=\"row\">\n                    <div className=\"form-group col\">\n                      <label for=\"password\" className=\"sr-only\">\n                        Password\n                      </label>\n                      <br />\n                      <input\n                        ref={(input) => (_password = input)}\n                        type=\"password\"\n                        name=\"password\"\n                        id=\"password\"\n                        className=\"form-control input-field\"\n                        placeholder=\"Password\"\n                      />\n                    </div>\n                    <PaystackConsumer {...componentPropsNGN}>\n                      {({ initializePayment }) => (\n                        <button\n                          type=\"button\"\n                          onClick={() =>\n                            swal(\n                              \"You will be required to pay a membership fee of â‚¦100,000\",\n                              {\n                                buttons: {\n                                  cancel: \"No, Cancel\",\n                                  catch: {\n                                    text: \"Yes, Continue\",\n                                    value: \"catch\",\n                                  },\n                                },\n                              }\n                            ).then((value) => {\n                              switch (value) {\n                                case \"catch\":\n                                  initializePayment();\n                                  break;\n\n                                default:\n                              }\n                            })\n                          }\n                          id=\"reg-button\"\n                          name=\"register-button\"\n                          className=\"submit-button\"\n                          style={{ marginTop: \"32px\" }}\n                        >\n                          Register Account\n                        </button>\n                      )}\n                    </PaystackConsumer>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        </section>\n        {/*/main*/}\n        <Footer />\n        {/* Template Main JS File */}\n        <ScriptTag\n          type=\"text/javascript\"\n          src=\"../assets/js/built.js\"\n        />\n      </body>\n    );\n  }\n}\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}