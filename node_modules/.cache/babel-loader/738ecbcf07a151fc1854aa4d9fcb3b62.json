{"ast":null,"code":"import _classCallCheck from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Page from\"react-page-loading\";import{Pie,Line,Bar,Chart,Doughnut}from\"react-chartjs-2\";import Header from\"./common/Header\";import Sidebar from\"./common/Sidebar\";import{Link}from\"react-router-dom\";import axios from\"axios\";import swal from\"sweetalert\";export var Dashboard=/*#__PURE__*/function(_Component){_inherits(Dashboard,_Component);var _super=_createSuper(Dashboard);function Dashboard(props){var _this;_classCallCheck(this,Dashboard);_this=_super.call(this,props);_this.logoutUser=function(){localStorage.clear();window.location.href=\"/auth\";};_this.state={token:localStorage[\"appState\"]?JSON.parse(localStorage[\"appState\"]).user.token:\"\",user:[],plan_count:\"\",plan_current:\"\",plan_total:\"\"};return _this;}_createClass(Dashboard,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(\"\".concat(axios.defaults.baseURL,\"/user/\").concat(JSON.parse(localStorage[\"appState\"]).user.id),{headers:{Authorization:\"Bearer \".concat(this.state.token)}}).then(function(response){//console.log(response);\nreturn response;}).then(function(json){if(json.data.success){_this2.setState({user:json.data.user[0],plan_count:json.data.plans_count,plan_current:json.data.plans_current,plan_total:json.data.plans_total});// } else alert(\"Cannot Fetch Data!\");\n}else swal(\"Oops!\",\"Cannot Fetch Data!\",\"error\");}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});// alert(id)\n}},{key:\"render\",value:function render(){var r_balance=this.state.plan_total-this.state.plan_current;var doudata={labels:[\"Payments\",\"Balance\"],datasets:[{data:[this.state.plan_current,r_balance],backgroundColor:[\"#449400\",\"#FD5B00\"]}]};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Page,{loader:\"spin\",color:\"#449400\",duration:1,size:10},/*#__PURE__*/React.createElement(\"div\",{id:\"app\"},/*#__PURE__*/React.createElement(\"span\",null,\"Welcome \",this.state.user.lname||\"\"))));}}]);return Dashboard;}(Component);export default Dashboard;","map":{"version":3,"sources":["/Users/hipheckt/codes/sapioclub/react/src/Dashboard.js"],"names":["React","Component","Page","Pie","Line","Bar","Chart","Doughnut","Header","Sidebar","Link","axios","swal","Dashboard","props","logoutUser","localStorage","clear","window","location","href","state","token","JSON","parse","user","plan_count","plan_current","plan_total","get","defaults","baseURL","id","headers","Authorization","then","response","json","data","success","setState","plans_count","plans_current","plans_total","catch","error","console","r_balance","doudata","labels","datasets","backgroundColor","lname"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Page from \"react-page-loading\";\nimport { Pie, Line, Bar, Chart, Doughnut } from \"react-chartjs-2\";\n\nimport Header from \"./common/Header\";\nimport Sidebar from \"./common/Sidebar\";\nimport { Link } from \"react-router-dom\";\n\nimport axios from \"axios\";\nimport swal from \"sweetalert\";\n\nexport class Dashboard extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: localStorage[\"appState\"]\n        ? JSON.parse(localStorage[\"appState\"]).user.token\n        : \"\",\n      user: [],\n      plan_count: \"\",\n      plan_current: \"\",\n      plan_total: \"\",\n    };\n  }\n  componentDidMount() {\n    axios\n      .get(\n        `${axios.defaults.baseURL}/user/${\n          JSON.parse(localStorage[\"appState\"]).user.id\n        }`,\n        {\n          headers: {\n            Authorization: `Bearer ${this.state.token}`,\n          },\n        }\n      )\n      .then((response) => {\n        //console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({\n            user: json.data.user[0],\n            plan_count: json.data.plans_count,\n            plan_current: json.data.plans_current,\n            plan_total: json.data.plans_total,\n          });\n          // } else alert(\"Cannot Fetch Data!\");\n        } else swal(\"Oops!\", \"Cannot Fetch Data!\", \"error\");\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n    // alert(id)\n  }\n  logoutUser = () => {\n    localStorage.clear();\n    window.location.href = \"/auth\";\n  };\n  render() {\n    var r_balance = this.state.plan_total - this.state.plan_current;\n    const doudata = {\n      labels: [\"Payments\", \"Balance\"],\n      datasets: [\n        {\n          data: [this.state.plan_current, r_balance],\n          backgroundColor: [\"#449400\", \"#FD5B00\"],\n        },\n      ],\n    };\n\n    return (\n      <>\n        <Header />\n        <Page loader={\"spin\"} color={\"#449400\"} duration={1} size={10}>\n          <div id=\"app\">\n            {/* <Sidebar /> */}\n            <span>Welcome {this.state.user.lname || \"\"}</span>\n          </div>\n        </Page>\n      </>\n    );\n  }\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}