{"ast":null,"code":"import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Avatar from \"../assets/img/default-user-avatar.png\";\nimport Logo from \"../assets/img/favicon.png\";\nimport swal from \"sweetalert\";\nimport $ from \"jquery\";\nexport default class Header extends Component {\n  constructor(props) {\n    super(props);\n\n    this.logoutUser = () => {\n      localStorage.clear();\n      window.location.href = \"/login\";\n    };\n\n    this.state = {\n      token: localStorage[\"appState\"] ? JSON.parse(localStorage[\"appState\"]).user.token : \"\",\n      user: [],\n      isLoggedIn: localStorage[\"appState\"] ? JSON.parse(localStorage[\"appState\"]).isLoggedIn : \"\"\n    };\n  }\n\n  componentDidMount() {\n    if (this.state.isLoggedIn) {\n      axios.get(`${axios.defaults.baseURL}/user/${JSON.parse(localStorage[\"appState\"]).user.id}`, {\n        headers: {\n          Authorization: `Bearer ${this.state.token}`\n        }\n      }).then(response => {\n        //console.log(response);\n        return response;\n      }).then(json => {\n        if (json.data.success) {\n          this.setState({\n            user: json.data.user[0]\n          }); // } else alert(\"Cannot Fetch Data!\");\n        } else swal(\"Oops!\", \"Cannot Fetch Data!\", \"error\");\n      }).catch(error => {\n        console.error(`An Error Occured! ${error}`);\n      });\n    } // alert(id)\n\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null);\n  }\n\n}","map":{"version":3,"sources":["/Users/hipheckt/codes/sydani-web/src/common/Header.js"],"names":["React","Component","Link","axios","Avatar","Logo","swal","$","Header","constructor","props","logoutUser","localStorage","clear","window","location","href","state","token","JSON","parse","user","isLoggedIn","componentDidMount","get","defaults","baseURL","id","headers","Authorization","then","response","json","data","success","setState","catch","error","console","render"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,kBAArB;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,uCAAnB;AACA,OAAOC,IAAP,MAAiB,2BAAjB;AAEA,OAAOC,IAAP,MAAiB,YAAjB;AACA,OAAOC,CAAP,MAAc,QAAd;AAEA,eAAe,MAAMC,MAAN,SAAqBP,SAArB,CAA+B;AAC5CQ,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SA0CnBC,UA1CmB,GA0CN,MAAM;AACjBC,MAAAA,YAAY,CAACC,KAAb;AACAC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,QAAvB;AACD,KA7CkB;;AAEjB,SAAKC,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAEN,YAAY,CAAC,UAAD,CAAZ,GACHO,IAAI,CAACC,KAAL,CAAWR,YAAY,CAAC,UAAD,CAAvB,EAAqCS,IAArC,CAA0CH,KADvC,GAEH,EAHO;AAIXG,MAAAA,IAAI,EAAE,EAJK;AAKXC,MAAAA,UAAU,EAAEV,YAAY,CAAC,UAAD,CAAZ,GACRO,IAAI,CAACC,KAAL,CAAWR,YAAY,CAAC,UAAD,CAAvB,EAAqCU,UAD7B,GAER;AAPO,KAAb;AASD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,QAAG,KAAKN,KAAL,CAAWK,UAAd,EAAyB;AACzBnB,MAAAA,KAAK,CACFqB,GADH,CAEK,GAAErB,KAAK,CAACsB,QAAN,CAAeC,OAAQ,SACxBP,IAAI,CAACC,KAAL,CAAWR,YAAY,CAAC,UAAD,CAAvB,EAAqCS,IAArC,CAA0CM,EAC3C,EAJL,EAKI;AACEC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAAS,KAAKZ,KAAL,CAAWC,KAAM;AADnC;AADX,OALJ,EAWGY,IAXH,CAWSC,QAAD,IAAc;AAClB;AACA,eAAOA,QAAP;AACD,OAdH,EAeGD,IAfH,CAeSE,IAAD,IAAU;AACd,YAAIA,IAAI,CAACC,IAAL,CAAUC,OAAd,EAAuB;AACrB,eAAKC,QAAL,CAAc;AAAEd,YAAAA,IAAI,EAAEW,IAAI,CAACC,IAAL,CAAUZ,IAAV,CAAe,CAAf;AAAR,WAAd,EADqB,CAErB;AACD,SAHD,MAGOf,IAAI,CAAC,OAAD,EAAU,oBAAV,EAAgC,OAAhC,CAAJ;AACR,OApBH,EAqBG8B,KArBH,CAqBUC,KAAD,IAAW;AAChBC,QAAAA,OAAO,CAACD,KAAR,CAAe,qBAAoBA,KAAM,EAAzC;AACD,OAvBH;AAwBC,KA1BiB,CA2BlB;;AACD;;AAMDE,EAAAA,MAAM,GAAG;AACP,wBACE,yCADF;AAKD;;AAtD2C","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport axios from \"axios\";\nimport Avatar from \"../assets/img/default-user-avatar.png\";\nimport Logo from \"../assets/img/favicon.png\";\n\nimport swal from \"sweetalert\";\nimport $ from \"jquery\";\n\nexport default class Header extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: localStorage[\"appState\"]\n        ? JSON.parse(localStorage[\"appState\"]).user.token\n        : \"\",\n      user: [],\n      isLoggedIn: localStorage[\"appState\"]\n        ? JSON.parse(localStorage[\"appState\"]).isLoggedIn\n        : \"\",\n    };\n  }\n  \n  componentDidMount() {\n    if(this.state.isLoggedIn){\n    axios\n      .get(\n        `${axios.defaults.baseURL}/user/${\n          JSON.parse(localStorage[\"appState\"]).user.id\n        }`,\n        {\n          headers: {\n            Authorization: `Bearer ${this.state.token}`,\n          },\n        }\n      )\n      .then((response) => {\n        //console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({ user: json.data.user[0] });\n          // } else alert(\"Cannot Fetch Data!\");\n        } else swal(\"Oops!\", \"Cannot Fetch Data!\", \"error\");\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n    }\n    // alert(id)\n  }\n  logoutUser = () => {\n    localStorage.clear();\n    window.location.href = \"/login\";\n  };\n\n  render() {\n    return (\n      <>\n        \n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}