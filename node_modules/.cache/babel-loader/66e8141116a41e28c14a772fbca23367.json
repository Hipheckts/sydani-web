{"ast":null,"code":"import _objectSpread from\"/Users/hipheckt/codes/evestng/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/hipheckt/codes/evestng/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hipheckt/codes/evestng/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/hipheckt/codes/evestng/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/hipheckt/codes/evestng/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import NumberFormat from'react-number-format';import axios from\"axios\";import swal from\"sweetalert\";import $ from\"jquery\";import{PaystackConsumer}from\"react-paystack\";import Header from\"./common/Header\";import Sidebar from\"./common/Sidebar\";var _name_on_doc;export var SingleLand=/*#__PURE__*/function(_Component){_inherits(SingleLand,_Component);var _super=_createSuper(SingleLand);function SingleLand(props){var _this;_classCallCheck(this,SingleLand);_this=_super.call(this,props);_this.state={token:localStorage[\"appState\"]?JSON.parse(localStorage[\"appState\"]).user.token:\"\",user:[],home:[],plan:\"\",home_id:\"\"};return _this;}_createClass(SingleLand,[{key:\"componentDidMount\",value:function componentDidMount(){this.getUser();this.getHome();}},{key:\"getUser\",value:function getUser(){var _this2=this;axios.get(\"\".concat(axios.defaults.baseURL,\"/user/\").concat(JSON.parse(localStorage[\"appState\"]).user.id),{headers:{'Authorization':\"Bearer \".concat(this.state.token)}}).then(function(response){console.log(response);return response;}).then(function(json){if(json.data.success){_this2.setState({user:json.data.user[0]});// } else alert(\"Cannot Fetch Data!\");\n}else swal(\"Oops!\",\"Cannot Fetch Data!\",\"error\");;}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});// alert(id)\n}},{key:\"getHome\",value:function getHome(){var _this3=this;var id=window.location.href.split(\"/\")[window.location.href.split(\"/\").length-1];axios.get(\"\".concat(axios.defaults.baseURL,\"/view-land/\").concat(id)).then(function(response){console.log(response);return response;}).then(function(json){if(json.data.success){_this3.setState({home:json.data.home,plan:json.data.home[0].plan_code,home_id:json.data.home[0].id});}else{console.log(\"Cannot fetch data!\");}}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});}},{key:\"tAndC\",value:function tAndC(event){swal(\"Terms & Conditions!\",\"Once you subscribe for any plan, you will be required to activate your bank card for automatic debit of plan amount based on your type of plan. Your subscription shall be for a maximum period of Five (5) years commencing from the date we receive the first installment. You are at liberty to subscribe at different times within the payment window. Each subscription shall be treated separately and the delivery date calculated from the date we receive the first installment.\");}},{key:\"render\",value:function render(){var _this4=this;var configNGN={// reference: (new Date()).getTime(),\nemail:this.state.user.email,// plan: \"PLN_qpulb1qct1r0hlo\",\nplan:this.state.plan,currency:\"NGN\",// publicKey: 'pk_live_68d2b6e9edacd11392f5548db9047ffb4911b39d',\npublicKey:\"pk_test_3a1c9194d014f2629abda6e0c3f22cb931141cf4\"};var componentPropsNGN=_objectSpread(_objectSpread({},configNGN),{},{text:\"Plan Payment Activation\",onSuccess:function onSuccess(){swal(\"Success!\",\"Payment Plan Activation was Successful!\",\"success\",{button:false,timer:1500});var formData=new FormData();formData.append(\"name_on_doc\",_name_on_doc.value);formData.append(\"home_id\",_this4.state.home_id);formData.append(\"user_id\",JSON.parse(localStorage[\"appState\"]).user.id);axios({method:'post',url:\"\".concat(axios.defaults.baseURL,\"/subscribe-land\"),data:formData,headers:{'Authorization':\"Bearer \".concat(JSON.parse(localStorage[\"appState\"]).user.token),'Content-Type':'multipart/form-data'}}).then(function(response){console.log(response);return response;}).then(function(json){if(json.data.success){// swal(\"Success!\", \"\" + json.data.message, \"success\", {\n//   button: false,\n//   timer: 1500,\n// });\n// redirect to plans\n_this4.props.history.push(\"/my-plans\");}else{swal(\"Failed\",\"\"+json.data.message,\"error\");}}).catch(function(error){// alert(\"An Error Occured!\" + error);\nvar res=\"An Error Occured\";swal(\"Error!\",\"\"+res,\"error\",{button:false// timer: 1500\n});console.log(\"\".concat(formData,\" \").concat(error));});},onClose:function onClose(){return null;}});$(\"#name_on_doc-input\").attr(\"value\",this.state.user.fname+\" \"+this.state.user.lname);return/*#__PURE__*/React.createElement(\"div\",{id:\"app\",className:\"bg-gray-200\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dashboard-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"private-layout\"},/*#__PURE__*/React.createElement(\"div\",{className:\"app-wrapper\"},/*#__PURE__*/React.createElement(Sidebar,null),/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"div\",{id:\"main-app\",className:\"position-relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container mt-4\"},/*#__PURE__*/React.createElement(Link,{to:\"/landvest\"},/*#__PURE__*/React.createElement(\"i\",{className:\"ti-arrow-left\"}),\" Back to Lands Listing\"),this.state.home.map(function(home){return/*#__PURE__*/React.createElement(\"div\",{key:home.id},/*#__PURE__*/React.createElement(\"div\",{className:\"page-title\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row text-primary py-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-welcome\",style:{overflow:\"hidden\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"wrapper d-flex\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"d-inline-block titlecase\"},home.name,\" - \",/*#__PURE__*/React.createElement(NumberFormat,{value:home.price,displayType:'text',thousandSeparator:true,prefix:'â‚¦'}),\" \",home.type,\" Installment Plan\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 mt-4\"},/*#__PURE__*/React.createElement(\"img\",{src:home.image,className:\"plan-img-view\",alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-4 mb-4\"},/*#__PURE__*/React.createElement(\"h5\",null,\"Description:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"text-secondary\"},home.description))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 mt-4\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"text-primary\"},\"Start Plan \\uD83D\\uDE80\"),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"fieldset\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"legend\",{tabindex:\"-1\",className:\"bv-no-focus-ring col-form-label\"},\"Preferred Name on Document\"),/*#__PURE__*/React.createElement(\"div\",{tabindex:\"-1\",role:\"group\",className:\"bv-no-focus-ring col\"},/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _name_on_doc=input;},id:\"name_on_doc-input\",name:\"name_on_doc\",type:\"text\",required:\"required\",\"aria-required\":\"true\",className:\"form-control\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(PaystackConsumer,componentPropsNGN,function(_ref){var initializePayment=_ref.initializePayment;return home.status==\"active\"?/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return swal(\"You are about to activate a \"+\"â‚¦\"+\"\".concat(home.price)+\" \"+\"\".concat(home.type)+\" payment plan for \"+\"\".concat(home.name),{buttons:{cancel:\"No, Cancel\",catch:{text:\"Yes, Continue\",value:\"catch\"}}}).then(function(value){switch(value){case\"catch\":initializePayment();break;default:}});},id:\"submit\",name:\"subscribe-button\",className:\"btn btn-primary my-4\"},\"Start Payment of \",home.type,\" Installment\"):home.status==\"soldout\"?/*#__PURE__*/React.createElement(\"input\",{type:\"button\",className:\"btn w-100 btn-warning\",value:\"Sold Out\",disabled:true}):null;}),/*#__PURE__*/React.createElement(Link,{className:\"btn btn-dark my-4\",onClick:_this4.tAndC,download:true},\"Read Terms & Conditions\")))))));})))))));}}]);return SingleLand;}(Component);export default SingleLand;","map":{"version":3,"sources":["/Users/hipheckt/codes/evestng/react/src/SingleLand.js"],"names":["React","Component","Link","NumberFormat","axios","swal","$","PaystackConsumer","Header","Sidebar","_name_on_doc","SingleLand","props","state","token","localStorage","JSON","parse","user","home","plan","home_id","getUser","getHome","get","defaults","baseURL","id","headers","then","response","console","log","json","data","success","setState","catch","error","window","location","href","split","length","plan_code","event","configNGN","email","currency","publicKey","componentPropsNGN","text","onSuccess","button","timer","formData","FormData","append","value","method","url","history","push","message","res","onClose","attr","fname","lname","map","overflow","name","price","type","image","description","input","initializePayment","status","buttons","cancel","tAndC"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport NumberFormat from 'react-number-format';\n\nimport axios from \"axios\";\nimport swal from \"sweetalert\";\nimport $ from \"jquery\";\n\nimport { PaystackConsumer } from \"react-paystack\";\n\nimport Header from \"./common/Header\";\nimport Sidebar from \"./common/Sidebar\";\n\nvar _name_on_doc;\n\nexport class SingleLand extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: localStorage[\"appState\"]\n              ? JSON.parse(localStorage[\"appState\"]).user.token\n              : \"\",\n            user: [],\n      home: [],\n      plan: \"\",\n      home_id: \"\",\n    };\n  }\n\n  componentDidMount() {\n    this.getUser();\n    this.getHome();\n    \n  }\n\n  getUser(){\n    axios\n            .get(`${axios.defaults.baseURL}/user/${JSON.parse(localStorage[\"appState\"]).user.id}`,\n            {\n              headers: {\n                'Authorization': `Bearer ${this.state.token}`\n              }\n            }\n            )\n            .then(response => {\n              console.log(response);\n              return response;\n            })\n            .then(json => {\n              if (json.data.success) {\n                this.setState({ user: json.data.user[0] });\n              // } else alert(\"Cannot Fetch Data!\");\n              } else swal(\"Oops!\", \"Cannot Fetch Data!\", \"error\");;\n            })\n            .catch(error => {\n              console.error(`An Error Occured! ${error}`);\n            });\n            // alert(id)\n  }\n\n  getHome(){\n\n    var id = window.location.href.split(\"/\")[\n      window.location.href.split(\"/\").length - 1\n    ];\n    axios\n      .get(`${axios.defaults.baseURL}/view-land/${id}`)\n      .then((response) => {\n        console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({\n            home: json.data.home,\n            plan: json.data.home[0].plan_code,\n            home_id: json.data.home[0].id,\n          });\n        } else {\n          console.log(`Cannot fetch data!`);\n        }\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n  }\n\n  tAndC(event) {\n    swal(\n      \"Terms & Conditions!\",\n      \"Once you subscribe for any plan, you will be required to activate your bank card for automatic debit of plan amount based on your type of plan. Your subscription shall be for a maximum period of Five (5) years commencing from the date we receive the first installment. You are at liberty to subscribe at different times within the payment window. Each subscription shall be treated separately and the delivery date calculated from the date we receive the first installment.\"\n    );\n  }\n\n  render() {\n    const configNGN = {\n      // reference: (new Date()).getTime(),\n      email: this.state.user.email,\n      // plan: \"PLN_qpulb1qct1r0hlo\",\n      plan: this.state.plan,\n      currency: \"NGN\",\n      // publicKey: 'pk_live_68d2b6e9edacd11392f5548db9047ffb4911b39d',\n      publicKey: \"pk_test_3a1c9194d014f2629abda6e0c3f22cb931141cf4\",\n    };\n\n    const componentPropsNGN = {\n      ...configNGN,\n      text: \"Plan Payment Activation\",\n      onSuccess: () => {\n        swal(\"Success!\", \"Payment Plan Activation was Successful!\", \"success\", {\n          button: false,\n          timer: 1500,\n        });\n\n        var formData = new FormData();\n        formData.append(\"name_on_doc\", _name_on_doc.value);\n        formData.append(\"home_id\", this.state.home_id);\n        formData.append(\"user_id\", JSON.parse(localStorage[\"appState\"]).user.id);\n\n        axios({\n            method: 'post',\n            url: `${axios.defaults.baseURL}/subscribe-land`,\n            data: formData,\n            headers: {'Authorization': `Bearer ${JSON.parse(localStorage[\"appState\"]).user.token}`, 'Content-Type': 'multipart/form-data' }\n            })\n            .then(response => {\n                console.log(response);\n                return response;\n            })\n            .then(json => {\n                if (json.data.success) {\n                  // swal(\"Success!\", \"\" + json.data.message, \"success\", {\n                  //   button: false,\n                  //   timer: 1500,\n                  // });\n                // redirect to plans\n                this.props.history.push(\"/my-plans\");\n                } else {\n                swal(\"Failed\", \"\"+ json.data.message, \"error\");\n                }\n            })\n            .catch(error => {\n                // alert(\"An Error Occured!\" + error);\n                let res = (\"An Error Occured\");\n                swal(\"Error!\", \"\" + res, \"error\", {\n                button: false,\n                // timer: 1500\n                });\n                console.log(`${formData} ${error}`);\n            });\n      },\n      onClose: () => null,\n    };\n\n    $(\"#name_on_doc-input\").attr(\"value\", this.state.user.fname + \" \" + this.state.user.lname);\n\n    return (\n      <div id=\"app\" className=\"bg-gray-200\">\n        <div className=\"dashboard-page\">\n          <div className=\"private-layout\">\n            <div className=\"app-wrapper\">\n              <Sidebar />\n              <Header />\n              <div id=\"main-app\" className=\"position-relative\">\n                <div className=\"container mt-4\">\n                  <Link to=\"/landvest\">\n                    <i className=\"ti-arrow-left\"></i> Back to Lands Listing\n                  </Link>\n                  {this.state.home.map((home) => (\n                    <div key={home.id}>\n                      <div className=\"page-title\">\n                        <div className=\"row text-primary py-2\">\n                          <div className=\"col-12\">\n                            <div\n                              className=\"user-welcome\"\n                              style={{ overflow: \"hidden\" }}\n                            >\n                              <div className=\"wrapper d-flex\">\n                                <h4 className=\"d-inline-block titlecase\">\n                                  {home.name} - <NumberFormat value={home.price} displayType={'text'} thousandSeparator={true} prefix={'â‚¦'} /> {home.type} Installment Plan\n                                </h4>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"row\">\n                        <div className=\"col-md-8 mt-4\">\n                          <img\n                            src={home.image}\n                            className=\"plan-img-view\"\n                            alt=\"\"\n                          />\n                            <div className=\"mt-4 mb-4\">\n                              <h5>Description:</h5>\n                              <p className=\"text-secondary\">\n                                {home.description}\n                              </p>\n                            </div>\n                        </div>\n                        \n                        <div className=\"col-md-4 mt-4\">\n                              <h5 className=\"text-primary\">Start Plan ðŸš€</h5>\n                          <form>\n                            <div>\n                              {/* <fieldset className=\"form-group\">\n                                <div className=\"form-row\">\n                                  <div\n                                    tabindex=\"-1\"\n                                    role=\"group\"\n                                    className=\"bv-no-focus-ring col\"\n                                  >\n                                    <select\n                                      id=\"type\"\n                                      type=\"text\"\n                                      required=\"required\"\n                                      aria-required=\"true\"\n                                      className=\"form-control\"\n                                    >\n                                      <option value=\"\">How many Rooms?</option>\n                                      <option value=\"1 Bedroom Apartment\">\n                                        1 Bedroom Apartment\n                                      </option>\n                                      <option value=\"2 Bedroom Apartment\">\n                                        2 Bedroom Apartment\n                                      </option>\n                                      <option value=\"3 Bedroom Apartment\">\n                                        3 Bedroom Apartment\n                                      </option>\n                                    </select>\n                                  </div>\n                                </div>\n                              </fieldset> */}\n                              <fieldset className=\"form-group\">\n                                <div className=\"form-row\">\n                                  <legend\n                                    tabindex=\"-1\"\n                                    className=\"bv-no-focus-ring col-form-label\"\n                                  >\n                                    Preferred Name on Document\n                                  </legend>\n                                  <div\n                                    tabindex=\"-1\"\n                                    role=\"group\"\n                                    className=\"bv-no-focus-ring col\"\n                                  >\n                                    <input\n                                      ref={(input) => (_name_on_doc = input)}\n                                      id=\"name_on_doc-input\"\n                                      name=\"name_on_doc\"\n                                      type=\"text\"\n                                      required=\"required\"\n                                      aria-required=\"true\"\n                                      className=\"form-control\"\n                                    />\n                                  </div>\n                                </div>\n                              </fieldset>\n                              {/* <fieldset className=\"form-group\">\n                                <div className=\"form-row\">\n                                  <legend\n                                    tabindex=\"-1\"\n                                    className=\"bv-no-focus-ring col-form-label\"\n                                  >\n                                    Number of Units\n                                  </legend>\n                                  <div\n                                    tabindex=\"-1\"\n                                    role=\"group\"\n                                    className=\"bv-no-focus-ring col\"\n                                  >\n                                    <select\n                                      id=\"type\"\n                                      type=\"text\"\n                                      required=\"required\"\n                                      aria-required=\"true\"\n                                      className=\"form-control\"\n                                    >\n                                      <option value=\"1\">1</option>\n                                      <option value=\"2\">2</option>\n                                      <option value=\"3\">3</option>\n                                      <option value=\"4\">4</option>\n                                      <option value=\"5\">5</option>\n                                      <option value=\"6\">6</option>\n                                      <option value=\"7\">7</option>\n                                      <option value=\"8\">8</option>\n                                      <option value=\"9\">9</option>\n                                      <option value=\"10\">10</option>\n                                    </select>\n                                  </div>\n                                </div>\n                              </fieldset> */}\n                              <div className=\"text-center\">\n                                {/* <button\n                                  id=\"stateful-button\"\n                                  type=\"submit\"\n                                  className=\"btn btn-primary my-4\"\n                                >\n                                  <span\n                                    aria-hidden=\"true\"\n                                    className=\"spinner-border spinner-border-sm\"\n                                    style={{ display: \"none\" }}\n                                  ></span>{\" \"}\n                                  Start Payment of {home.type} Installment\n                                </button> */}\n                                <PaystackConsumer {...componentPropsNGN}>\n                                  {({ initializePayment }) => (\n                                    home.status == \"active\" ? (\n                                      <button\n                                    type=\"button\"\n                                      onClick={() =>\n                                        swal(\n                                          \"You are about to activate a \"+ \"â‚¦\" + `${home.price}` + \" \" +\n                                            `${home.type}` +\n                                            \" payment plan for \" +\n                                            `${home.name}`,\n                                          {\n                                            buttons: {\n                                              cancel: \"No, Cancel\",\n                                              catch: {\n                                                text: \"Yes, Continue\",\n                                                value: \"catch\",\n                                              },\n                                            },\n                                          }\n                                        ).then((value) => {\n                                          switch (value) {\n                                            case \"catch\":\n                                              initializePayment();\n                                              break;\n\n                                            default:\n                                          }\n                                        })\n                                      }\n                                      id=\"submit\"\n                                      name=\"subscribe-button\"\n                                      className=\"btn btn-primary my-4\"\n                                    >\n                                      Start Payment of {home.type} Installment\n                                    </button>\n                                  ) : home.status == \"soldout\"  ? (<input type=\"button\" className=\"btn w-100 btn-warning\" value=\"Sold Out\" disabled/>) : null\n                                  )}\n                                </PaystackConsumer>\n                                <Link\n                                  className=\"btn btn-dark my-4\"\n                                  onClick={this.tAndC}\n                                  download\n                                >\n                                  Read Terms & Conditions\n                                </Link>\n                              </div>\n                            </div>\n                          </form>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SingleLand;\n"]},"metadata":{},"sourceType":"module"}