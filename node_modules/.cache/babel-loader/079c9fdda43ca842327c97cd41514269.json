{"ast":null,"code":"import _objectSpread from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/hipheckt/codes/sapioclub/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link,Redirect,Route}from\"react-router-dom\";import Header from\"./common/Header\";import Footer from\"./common/Footer\";import ScriptTag from\"react-script-tag\";import NumberFormat from\"react-number-format\";import{PaystackConsumer}from\"react-paystack\";import AOS from\"aos\";import axios from\"axios\";import swal from\"sweetalert\";import $ from\"jquery\";import Avatar from\"./assets/img/default-user-avatar.png\";var _fname,_lname,_phone,_mstatus,_address,_dob,_password;export var Profile=/*#__PURE__*/function(_Component){_inherits(Profile,_Component);var _super=_createSuper(Profile);function Profile(props){var _this;_classCallCheck(this,Profile);_this=_super.call(this,props);// let { user } = this.props.appstate;\n_this.handleUpdate=function(e){e.preventDefault();$(\"#update-profile\").attr(\"disabled\",\"disabled\").html('<i class=\"fa fa-spinner fa-spin fa-1x fa-fw\"></i><span class=\"sr-only\">Loading...</span>');var formData=new FormData();formData.append(\"fname\",_fname.value);formData.append(\"lname\",_lname.value);formData.append(\"phone\",_phone.value);formData.append(\"image\",_this.state.file);formData.append(\"password\",_password.value);formData.append(\"mstatus\",_mstatus.value);formData.append(\"address\",_address.value);formData.append(\"dob\",_dob.value);//console.log(formData);\naxios({method:\"post\",url:\"\".concat(axios.defaults.baseURL,\"/user/\").concat(JSON.parse(localStorage[\"appState\"]).user.id),data:formData,headers:{Authorization:\"Bearer \".concat(_this.state.token),\"Content-Type\":\"multipart/form-data\"}}).then(function(response){//console.log(response);\nreturn response;}).then(function(json){var _json$data$user=json.data.user,id=_json$data$user.id,fname=_json$data$user.fname,lname=_json$data$user.lname,email=_json$data$user.email,phone=_json$data$user.phone,mstatus=_json$data$user.mstatus,address=_json$data$user.address,dob=_json$data$user.dob;var token=json.data.token.token;var userData={id:id,fname:fname,lname:lname,email:email,phone:phone,mstatus:mstatus,address:address,dob:dob,token:token,timestamp:new Date().toString()};var appState={isLoggedIn:true,user:userData};// save app state with user date in local storage\nlocalStorage[\"appState\"]=JSON.stringify(appState);_this.setState({isLoggedIn:appState.isLoggedIn,user:appState.user,token:appState.token});if(json.data.success===true){_this.getUser();swal(\"Updated!\",\"\"+json.data.message,\"success\",{button:false,timer:1500});$(\"#update-profile\").removeAttr(\"disabled\").html(\"Update Profile\");// redirect home\n// this.props.history.push(\"/my-account\");\n}else{// alert(json.data.message);\nswal(\"Alert!\",\"\"+json.data.message,\"warning\");$(\"#update-profile\").removeAttr(\"disabled\").html(\"Update Profile\");}}).catch(function(error){// alert(\"An Error Occured!\" + error);\n//console.log(error.response.data);\nif(error.response.data.message.fname===\"\"){swal(\"Warning!\",\"\"+error.response.data.message.fname,\"warning\");}else{swal(\"Warning!\",\"Please fill all fields\",\"warning\");}$(\"#update-profile\").removeAttr(\"disabled\").html(\"Update Profile\");});};_this.uploadPhoto=function(e){_this.photoUpload.click();};_this.onChange=function(event){_this.setState({imageSource:\"\",imageData:\"\",file:event.target.files[0]});var file=event.target.files[0];//console.log(file);\nif(file){var reader=new FileReader();reader.readAsDataURL(event.target.files[0]);reader.onload=function(event){_this.setState({imageSource:event.target.result,imageData:file});};}};_this.state={token:localStorage[\"appState\"]?JSON.parse(localStorage[\"appState\"]).user.token:\"\",user:[],imageSource:\"\",file:null,payment_ref:\"\",auth_code:\"\"};_this.onChange=_this.onChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Profile,[{key:\"componentDidMount\",value:function componentDidMount(){// //console.log(id);\nthis.getUser();}},{key:\"getUser\",value:function getUser(){var _this2=this;axios.get(\"\".concat(axios.defaults.baseURL,\"/user/\").concat(JSON.parse(localStorage[\"appState\"]).user.id),{headers:{Authorization:\"Bearer \".concat(this.state.token)}}).then(function(response){//console.log(response);\nreturn response;}).then(function(json){if(json.data.success){_this2.setState({user:json.data.user[0]});// } else alert(\"Cannot Fetch Data!\");\n}else swal(\"Oops!\",\"Cannot Fetch Data!\",\"error\");}).catch(function(error){console.error(\"An Error Occured! \".concat(error));});}},{key:\"render\",value:function render(){var _this3=this;$(\"#fname-input\").attr(\"value\",this.state.user.fname);$(\"#lname-input\").attr(\"value\",this.state.user.lname);$(\"#email-input\").attr(\"value\",this.state.user.email);$(\"#phone-input\").attr(\"value\",this.state.user.phone);$(\"#mstatus-input\").attr(\"value\",this.state.user.mstatus);$(\"#address-input\").attr(\"value\",this.state.user.address);$(\"#dob-input\").attr(\"value\",this.state.user.dob);var configNGN={// reference: (new Date()).getTime(),\nemail:this.state.user.email,// plan: this.state.plan,\namount:\"10000\",currency:\"NGN\",publicKey:\"pk_live_68d2b6e9edacd11392f5548db9047ffb4911b39d\"// publicKey: \"pk_test_3a1c9194d014f2629abda6e0c3f22cb931141cf4\",\n};var componentPropsNGN=_objectSpread(_objectSpread({},configNGN),{},{text:\"Bank Card Update\",onSuccess:function onSuccess(response){// console.log(response);\n_this3.setState({payment_ref:response.trxref});axios({method:\"get\",url:\"https://api.paystack.co/transaction/verify/\".concat(_this3.state.payment_ref),headers:{Authorization:\"Bearer sk_live_5299c2d2e25663425657490251d1cec7d8c206aa\",\"Content-Type\":\"application/json\"}// headers: {'Authorization': `Bearer sk_test_2e3a16e2c572cbcfd59cbc761105f58b7a34e90d`, 'Content-Type': 'application/json' }\n}).then(function(response){//console.log(response);\nreturn response;}).then(function(json){_this3.setState({auth_code:json.data.data.authorization.authorization_code});swal(\"Success!\",\"Card Update was Successful!\",\"success\",{button:false,timer:1500});var formData=new FormData();formData.append(\"auth_code\",_this3.state.auth_code);formData.append(\"user_id\",JSON.parse(localStorage[\"appState\"]).user.id);axios({method:\"post\",url:\"\".concat(axios.defaults.baseURL,\"/update-user-card\"),data:formData,headers:{Authorization:\"Bearer \".concat(JSON.parse(localStorage[\"appState\"]).user.token),\"Content-Type\":\"multipart/form-data\"}}).then(function(response){//console.log(response);\nreturn response;}).then(function(json){if(json.data.success){// swal(\"Success!\", \"\" + json.data.message, \"success\", {\n//   button: false,\n//   timer: 1500,\n// });\n// redirect to plans\n_this3.props.history.push(\"/my-account\");}else{swal(\"Failed\",\"\"+json.data.message,\"error\");}}).catch(function(error){// alert(\"An Error Occured!\" + error);\nvar res=\"An Error Occured\";swal(\"Error!\",\"\"+res,\"error\",{button:false// timer: 1500\n});//console.log(`${formData} ${error}`);\n});});},onClose:function onClose(){return null;}});return/*#__PURE__*/React.createElement(\"body\",{className:\"page-overview  ac-gn-current-music\"},/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"section\",{id:\"section-battery\",className:\"section section-battery theme-dark\",\"data-anim-scroll-group\":\"section-battery\",\"data-analytics-fallback-section-engagement\":\"name:battery\"},/*#__PURE__*/React.createElement(\"div\",{className:\"copy-scroll-container\",\"data-component-list\":\"CopyMagic\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sticky-copy-lockup flex-copy-lockup intro\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\",\"data-copy\":\"0\"},/*#__PURE__*/React.createElement(\"p\",{className:\"typography-section-eyebrow align-text default-text\"},\"Your Sapio Profile!\"),/*#__PURE__*/React.createElement(\"div\",{className:\"avatar-center\"},/*#__PURE__*/React.createElement(\"img\",{src:this.state.imageSource?this.state.imageSource:this.state.user.image?this.state.user.image:Avatar,id:\"user-logo\",className:\"user-avatar\"}),/*#__PURE__*/React.createElement(\"p\",{role:\"button\",onClick:this.uploadPhoto,style:{cursor:\"pointer\"}},\"Change Photo\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"form\",{id:\"reg\",action:\"\",onSubmit:this.handleUpdate,method:\"post\"},/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _this3.photoUpload=input;},onChange:this.onChange,autoComplete:\"off\",id:\"image-input\",name:\"image\",type:\"file\",hidden:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col\"},/*#__PURE__*/React.createElement(\"label\",{for:\"firstname\",className:\"sr-only\"},\"Firstname\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _fname=input;},type:\"firstname\",name:\"firstname\",id:\"fname-input\",className:\"form-control input-field\",placeholder:\"Firstname\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col\"},/*#__PURE__*/React.createElement(\"label\",{for:\"lastname\",className:\"sr-only\"},\"Lastname\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _lname=input;},type:\"lastname\",name:\"lastname\",id:\"lname-input\",className:\"form-control input-field\",placeholder:\"Lastname\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col\"},/*#__PURE__*/React.createElement(\"label\",{for:\"address\",className:\"sr-only\"},\"Address\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _address=input;},type:\"address\",name:\"address\",id:\"address-input\",className:\"form-control input-field\",placeholder:\"Address\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col\"},/*#__PURE__*/React.createElement(\"label\",{for:\"telephone\",className:\"sr-only\"},\"Telephone\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _phone=input;},type:\"telephone\",name:\"telephone\",id:\"phone-input\",className:\"form-control input-field\",placeholder:\"Telephone\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col\"},/*#__PURE__*/React.createElement(\"label\",{for:\"dob\",className:\"sr-only\"},\"Birthday\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _dob=input;},type:\"date\",name:\"dob\",id:\"dob-input\",className:\"form-control input-field\",placeholder:\"Birthday\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col\"},/*#__PURE__*/React.createElement(\"label\",{for:\"mstatus\",className:\"sr-only\"},\"Status\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"select\",{ref:function ref(input){return _mstatus=input;},name:\"telephone\",id:\"mstatus-input\",className:\"form-control input-field\"},/*#__PURE__*/React.createElement(\"option\",{value:\"Single\"},\"Single\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Engaged\"},\"Engaged\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Married\"},\"Married\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Divorced\"},\"Divorced\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col\"},/*#__PURE__*/React.createElement(\"label\",{for:\"email\",className:\"sr-only\"},\"Email\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",name:\"email\",id:\"email-input\",className:\"form-control input-field\",placeholder:\"Email Address\",disabled:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col\"},/*#__PURE__*/React.createElement(\"label\",{for:\"password\",className:\"sr-only\"},\"Password\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{ref:function ref(input){return _password=input;},type:\"password\",name:\"password\",id:\"password\",className:\"form-control input-field\",placeholder:\"*********\"}))),/*#__PURE__*/React.createElement(\"button\",{id:\"update-profile\",type:\"submit\",className:\"submit-button\",style:{marginTop:\"32px\"}},\"Update Profile\")))))),/*#__PURE__*/React.createElement(Footer,null),/*#__PURE__*/React.createElement(ScriptTag,{type:\"text/javascript\",src:\"../assets/js/built.js\"}));}}]);return Profile;}(Component);export default Profile;","map":{"version":3,"sources":["/Users/hipheckt/codes/sapioclub/react/src/Profile.js"],"names":["React","Component","Link","Redirect","Route","Header","Footer","ScriptTag","NumberFormat","PaystackConsumer","AOS","axios","swal","$","Avatar","_fname","_lname","_phone","_mstatus","_address","_dob","_password","Profile","props","handleUpdate","e","preventDefault","attr","html","formData","FormData","append","value","state","file","method","url","defaults","baseURL","JSON","parse","localStorage","user","id","data","headers","Authorization","token","then","response","json","fname","lname","email","phone","mstatus","address","dob","userData","timestamp","Date","toString","appState","isLoggedIn","stringify","setState","success","getUser","message","button","timer","removeAttr","catch","error","uploadPhoto","photoUpload","click","onChange","event","imageSource","imageData","target","files","reader","FileReader","readAsDataURL","onload","result","payment_ref","auth_code","bind","get","console","configNGN","amount","currency","publicKey","componentPropsNGN","text","onSuccess","trxref","authorization","authorization_code","history","push","res","onClose","image","cursor","input","marginTop"],"mappings":"u6BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,CAAeC,QAAf,CAAyBC,KAAzB,KAAsC,kBAAtC,CAEA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CAEA,MAAOC,CAAAA,SAAP,KAAsB,kBAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,qBAAzB,CACA,OAASC,gBAAT,KAAiC,gBAAjC,CAEA,MAAOC,CAAAA,GAAP,KAAgB,KAAhB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CAEA,MAAOC,CAAAA,MAAP,KAAmB,sCAAnB,CAEA,GAAIC,CAAAA,MAAJ,CAAYC,MAAZ,CAAoBC,MAApB,CAA4BC,QAA5B,CAAsCC,QAAtC,CAAgDC,IAAhD,CAAsDC,SAAtD,CAEA,UAAaC,CAAAA,OAAb,kGACE,iBAAYC,KAAZ,CAAmB,yCACjB,uBAAMA,KAAN,EACA;AAFiB,MAgDnBC,YAhDmB,CAgDJ,SAACC,CAAD,CAAO,CACpBA,CAAC,CAACC,cAAF,GAEAb,CAAC,CAAC,iBAAD,CAAD,CACGc,IADH,CACQ,UADR,CACoB,UADpB,EAEGC,IAFH,CAGI,0FAHJ,EAMA,GAAIC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAf,CACAD,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBhB,MAAM,CAACiB,KAAhC,EACAH,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBf,MAAM,CAACgB,KAAhC,EACAH,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBd,MAAM,CAACe,KAAhC,EACAH,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyB,MAAKE,KAAL,CAAWC,IAApC,EACAL,QAAQ,CAACE,MAAT,CAAgB,UAAhB,CAA4BV,SAAS,CAACW,KAAtC,EACAH,QAAQ,CAACE,MAAT,CAAgB,SAAhB,CAA2Bb,QAAQ,CAACc,KAApC,EACAH,QAAQ,CAACE,MAAT,CAAgB,SAAhB,CAA2BZ,QAAQ,CAACa,KAApC,EACAH,QAAQ,CAACE,MAAT,CAAgB,KAAhB,CAAuBX,IAAI,CAACY,KAA5B,EAEA;AAEArB,KAAK,CAAC,CACJwB,MAAM,CAAE,MADJ,CAEJC,GAAG,WAAKzB,KAAK,CAAC0B,QAAN,CAAeC,OAApB,kBACDC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAAC,UAAD,CAAvB,EAAqCC,IAArC,CAA0CC,EADzC,CAFC,CAKJC,IAAI,CAAEf,QALF,CAMJgB,OAAO,CAAE,CACPC,aAAa,kBAAY,MAAKb,KAAL,CAAWc,KAAvB,CADN,CAEP,eAAgB,qBAFT,CANL,CAAD,CAAL,CAWGC,IAXH,CAWQ,SAACC,QAAD,CAAc,CAClB;AACA,MAAOA,CAAAA,QAAP,CACD,CAdH,EAeGD,IAfH,CAeQ,SAACE,IAAD,CAAU,qBAUVA,IAAI,CAACN,IAAL,CAAUF,IAVA,CAEZC,EAFY,iBAEZA,EAFY,CAGZQ,KAHY,iBAGZA,KAHY,CAIZC,KAJY,iBAIZA,KAJY,CAKZC,KALY,iBAKZA,KALY,CAMZC,KANY,iBAMZA,KANY,CAOZC,OAPY,iBAOZA,OAPY,CAQZC,OARY,iBAQZA,OARY,CASZC,GATY,iBASZA,GATY,IAWNV,CAAAA,KAXM,CAWIG,IAAI,CAACN,IAAL,CAAUG,KAXd,CAWNA,KAXM,CAYd,GAAIW,CAAAA,QAAQ,CAAG,CACbf,EAAE,CAAFA,EADa,CAEbQ,KAAK,CAALA,KAFa,CAGbC,KAAK,CAALA,KAHa,CAIbC,KAAK,CAALA,KAJa,CAKbC,KAAK,CAALA,KALa,CAMbC,OAAO,CAAPA,OANa,CAObC,OAAO,CAAPA,OAPa,CAQbC,GAAG,CAAHA,GARa,CASbV,KAAK,CAALA,KATa,CAUbY,SAAS,CAAE,GAAIC,CAAAA,IAAJ,GAAWC,QAAX,EAVE,CAAf,CAYA,GAAIC,CAAAA,QAAQ,CAAG,CACbC,UAAU,CAAE,IADC,CAEbrB,IAAI,CAAEgB,QAFO,CAAf,CAIA;AACAjB,YAAY,CAAC,UAAD,CAAZ,CAA2BF,IAAI,CAACyB,SAAL,CAAeF,QAAf,CAA3B,CACA,MAAKG,QAAL,CAAc,CACZF,UAAU,CAAED,QAAQ,CAACC,UADT,CAEZrB,IAAI,CAAEoB,QAAQ,CAACpB,IAFH,CAGZK,KAAK,CAAEe,QAAQ,CAACf,KAHJ,CAAd,EAMA,GAAIG,IAAI,CAACN,IAAL,CAAUsB,OAAV,GAAsB,IAA1B,CAAgC,CAE9B,MAAKC,OAAL,GAEAvD,IAAI,CAAC,UAAD,CAAa,GAAKsC,IAAI,CAACN,IAAL,CAAUwB,OAA5B,CAAqC,SAArC,CAAgD,CAClDC,MAAM,CAAE,KAD0C,CAElDC,KAAK,CAAE,IAF2C,CAAhD,CAAJ,CAKAzD,CAAC,CAAC,iBAAD,CAAD,CAAqB0D,UAArB,CAAgC,UAAhC,EAA4C3C,IAA5C,CAAiD,gBAAjD,EACA;AACA;AACD,CAZD,IAYO,CACL;AACAhB,IAAI,CAAC,QAAD,CAAW,GAAKsC,IAAI,CAACN,IAAL,CAAUwB,OAA1B,CAAmC,SAAnC,CAAJ,CACAvD,CAAC,CAAC,iBAAD,CAAD,CAAqB0D,UAArB,CAAgC,UAAhC,EAA4C3C,IAA5C,CAAiD,gBAAjD,EACD,CACF,CApEH,EAqEG4C,KArEH,CAqES,SAACC,KAAD,CAAW,CAChB;AACA;AACA,GAAIA,KAAK,CAACxB,QAAN,CAAeL,IAAf,CAAoBwB,OAApB,CAA4BjB,KAA5B,GAAsC,EAA1C,CAA8C,CAC5CvC,IAAI,CAAC,UAAD,CAAa,GAAK6D,KAAK,CAACxB,QAAN,CAAeL,IAAf,CAAoBwB,OAApB,CAA4BjB,KAA9C,CAAqD,SAArD,CAAJ,CACD,CAFD,IAEO,CACLvC,IAAI,CAAC,UAAD,CAAa,wBAAb,CAAuC,SAAvC,CAAJ,CACD,CACDC,CAAC,CAAC,iBAAD,CAAD,CAAqB0D,UAArB,CAAgC,UAAhC,EAA4C3C,IAA5C,CAAiD,gBAAjD,EACD,CA9EH,EA+ED,CApJkB,OA0JnB8C,WA1JmB,CA0JL,SAACjD,CAAD,CAAO,CACnB,MAAKkD,WAAL,CAAiBC,KAAjB,GACD,CA5JkB,OA8JnBC,QA9JmB,CA8JR,SAACC,KAAD,CAAW,CACpB,MAAKb,QAAL,CAAc,CACZc,WAAW,CAAE,EADD,CAEZC,SAAS,CAAE,EAFC,CAGZ9C,IAAI,CAAE4C,KAAK,CAACG,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAHM,CAAd,EAKA,GAAMhD,CAAAA,IAAI,CAAG4C,KAAK,CAACG,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAb,CACA;AAEA,GAAIhD,IAAJ,CAAU,CACR,GAAIiD,CAAAA,MAAM,CAAG,GAAIC,CAAAA,UAAJ,EAAb,CACAD,MAAM,CAACE,aAAP,CAAqBP,KAAK,CAACG,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAArB,EACAC,MAAM,CAACG,MAAP,CAAgB,SAACR,KAAD,CAAW,CACzB,MAAKb,QAAL,CAAc,CACZc,WAAW,CAAED,KAAK,CAACG,MAAN,CAAaM,MADd,CAEZP,SAAS,CAAE9C,IAFC,CAAd,EAID,CALD,CAMD,CACF,CAjLkB,CAGjB,MAAKD,KAAL,CAAa,CACXc,KAAK,CAAEN,YAAY,CAAC,UAAD,CAAZ,CACHF,IAAI,CAACC,KAAL,CAAWC,YAAY,CAAC,UAAD,CAAvB,EAAqCC,IAArC,CAA0CK,KADvC,CAEH,EAHO,CAIXL,IAAI,CAAE,EAJK,CAKXqC,WAAW,CAAE,EALF,CAMX7C,IAAI,CAAE,IANK,CAOXsD,WAAW,CAAE,EAPF,CAQXC,SAAS,CAAE,EARA,CAAb,CAUA,MAAKZ,QAAL,CAAgB,MAAKA,QAAL,CAAca,IAAd,+BAAhB,CAbiB,aAclB,CAfH,iFAiBsB,CAClB;AACA,KAAKvB,OAAL,GACD,CApBH,yCAsBY,iBACRxD,KAAK,CACFgF,GADH,WAEOhF,KAAK,CAAC0B,QAAN,CAAeC,OAFtB,kBAGMC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAAC,UAAD,CAAvB,EAAqCC,IAArC,CAA0CC,EAHhD,EAKI,CACEE,OAAO,CAAE,CACPC,aAAa,kBAAY,KAAKb,KAAL,CAAWc,KAAvB,CADN,CADX,CALJ,EAWGC,IAXH,CAWQ,SAACC,QAAD,CAAc,CAClB;AACA,MAAOA,CAAAA,QAAP,CACD,CAdH,EAeGD,IAfH,CAeQ,SAACE,IAAD,CAAU,CACd,GAAIA,IAAI,CAACN,IAAL,CAAUsB,OAAd,CAAuB,CACrB,MAAI,CAACD,QAAL,CAAc,CAAEvB,IAAI,CAAEQ,IAAI,CAACN,IAAL,CAAUF,IAAV,CAAe,CAAf,CAAR,CAAd,EACA;AACD,CAHD,IAGO9B,CAAAA,IAAI,CAAC,OAAD,CAAU,oBAAV,CAAgC,OAAhC,CAAJ,CACR,CApBH,EAqBG4D,KArBH,CAqBS,SAACC,KAAD,CAAW,CAChBmB,OAAO,CAACnB,KAAR,6BAAmCA,KAAnC,GACD,CAvBH,EAwBD,CA/CH,uCAoLW,iBACP5D,CAAC,CAAC,cAAD,CAAD,CAAkBc,IAAlB,CAAuB,OAAvB,CAAgC,KAAKM,KAAL,CAAWS,IAAX,CAAgBS,KAAhD,EACAtC,CAAC,CAAC,cAAD,CAAD,CAAkBc,IAAlB,CAAuB,OAAvB,CAAgC,KAAKM,KAAL,CAAWS,IAAX,CAAgBU,KAAhD,EACAvC,CAAC,CAAC,cAAD,CAAD,CAAkBc,IAAlB,CAAuB,OAAvB,CAAgC,KAAKM,KAAL,CAAWS,IAAX,CAAgBW,KAAhD,EACAxC,CAAC,CAAC,cAAD,CAAD,CAAkBc,IAAlB,CAAuB,OAAvB,CAAgC,KAAKM,KAAL,CAAWS,IAAX,CAAgBY,KAAhD,EACAzC,CAAC,CAAC,gBAAD,CAAD,CAAoBc,IAApB,CAAyB,OAAzB,CAAkC,KAAKM,KAAL,CAAWS,IAAX,CAAgBa,OAAlD,EACA1C,CAAC,CAAC,gBAAD,CAAD,CAAoBc,IAApB,CAAyB,OAAzB,CAAkC,KAAKM,KAAL,CAAWS,IAAX,CAAgBc,OAAlD,EACA3C,CAAC,CAAC,YAAD,CAAD,CAAgBc,IAAhB,CAAqB,OAArB,CAA8B,KAAKM,KAAL,CAAWS,IAAX,CAAgBe,GAA9C,EAEA,GAAMoC,CAAAA,SAAS,CAAG,CAChB;AACAxC,KAAK,CAAE,KAAKpB,KAAL,CAAWS,IAAX,CAAgBW,KAFP,CAGhB;AACAyC,MAAM,CAAE,OAJQ,CAKhBC,QAAQ,CAAE,KALM,CAMhBC,SAAS,CAAE,kDACX;AAPgB,CAAlB,CAUA,GAAMC,CAAAA,iBAAiB,gCAClBJ,SADkB,MAErBK,IAAI,CAAE,kBAFe,CAGrBC,SAAS,CAAE,mBAAClD,QAAD,CAAc,CACvB;AAEA,MAAI,CAACgB,QAAL,CAAc,CACZuB,WAAW,CAAEvC,QAAQ,CAACmD,MADV,CAAd,EAIAzF,KAAK,CAAC,CACJwB,MAAM,CAAE,KADJ,CAEJC,GAAG,sDAAgD,MAAI,CAACH,KAAL,CAAWuD,WAA3D,CAFC,CAGJ3C,OAAO,CAAE,CACPC,aAAa,0DADN,CAEP,eAAgB,kBAFT,CAIT;AAPI,CAAD,CAAL,CASGE,IATH,CASQ,SAACC,QAAD,CAAc,CAClB;AACA,MAAOA,CAAAA,QAAP,CACD,CAZH,EAaGD,IAbH,CAaQ,SAACE,IAAD,CAAU,CACd,MAAI,CAACe,QAAL,CAAc,CACZwB,SAAS,CAAEvC,IAAI,CAACN,IAAL,CAAUA,IAAV,CAAeyD,aAAf,CAA6BC,kBAD5B,CAAd,EAIA1F,IAAI,CAAC,UAAD,CAAa,6BAAb,CAA4C,SAA5C,CAAuD,CACzDyD,MAAM,CAAE,KADiD,CAEzDC,KAAK,CAAE,IAFkD,CAAvD,CAAJ,CAKA,GAAIzC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAf,CACAD,QAAQ,CAACE,MAAT,CAAgB,WAAhB,CAA6B,MAAI,CAACE,KAAL,CAAWwD,SAAxC,EACA5D,QAAQ,CAACE,MAAT,CACE,SADF,CAEEQ,IAAI,CAACC,KAAL,CAAWC,YAAY,CAAC,UAAD,CAAvB,EAAqCC,IAArC,CAA0CC,EAF5C,EAKAhC,KAAK,CAAC,CACJwB,MAAM,CAAE,MADJ,CAEJC,GAAG,WAAKzB,KAAK,CAAC0B,QAAN,CAAeC,OAApB,qBAFC,CAGJM,IAAI,CAAEf,QAHF,CAIJgB,OAAO,CAAE,CACPC,aAAa,kBACXP,IAAI,CAACC,KAAL,CAAWC,YAAY,CAAC,UAAD,CAAvB,EAAqCC,IAArC,CAA0CK,KAD/B,CADN,CAIP,eAAgB,qBAJT,CAJL,CAAD,CAAL,CAWGC,IAXH,CAWQ,SAACC,QAAD,CAAc,CAClB;AACA,MAAOA,CAAAA,QAAP,CACD,CAdH,EAeGD,IAfH,CAeQ,SAACE,IAAD,CAAU,CACd,GAAIA,IAAI,CAACN,IAAL,CAAUsB,OAAd,CAAuB,CACrB;AACA;AACA;AACA;AACA;AACA,MAAI,CAAC3C,KAAL,CAAWgF,OAAX,CAAmBC,IAAnB,CAAwB,aAAxB,EACD,CAPD,IAOO,CACL5F,IAAI,CAAC,QAAD,CAAW,GAAKsC,IAAI,CAACN,IAAL,CAAUwB,OAA1B,CAAmC,OAAnC,CAAJ,CACD,CACF,CA1BH,EA2BGI,KA3BH,CA2BS,SAACC,KAAD,CAAW,CAChB;AACA,GAAIgC,CAAAA,GAAG,CAAG,kBAAV,CACA7F,IAAI,CAAC,QAAD,CAAW,GAAK6F,GAAhB,CAAqB,OAArB,CAA8B,CAChCpC,MAAM,CAAE,KACR;AAFgC,CAA9B,CAAJ,CAIA;AACD,CAnCH,EAoCD,CAlEH,EAmED,CA7EoB,CA8ErBqC,OAAO,CAAE,yBAAM,KAAN,EA9EY,EAAvB,CAiFA,mBACE,4BAAM,SAAS,CAAC,oCAAhB,eACE,oBAAC,MAAD,MADF,cAEE,+BACE,EAAE,CAAC,iBADL,CAEE,SAAS,CAAC,oCAFZ,CAGE,yBAAuB,iBAHzB,CAIE,6CAA2C,cAJ7C,eAME,2BACE,SAAS,CAAC,uBADZ,CAEE,sBAAoB,WAFtB,eAIE,2BAAK,SAAS,CAAC,2CAAf,eACE,2BAAK,SAAS,CAAC,EAAf,CAAkB,YAAU,GAA5B,eACE,yBAAG,SAAS,CAAC,oDAAb,wBADF,cAIE,2BAAK,SAAS,CAAC,eAAf,eACE,2BACE,GAAG,CACD,KAAKzE,KAAL,CAAW8C,WAAX,CACI,KAAK9C,KAAL,CAAW8C,WADf,CAEI,KAAK9C,KAAL,CAAWS,IAAX,CAAgBiE,KAAhB,CACA,KAAK1E,KAAL,CAAWS,IAAX,CAAgBiE,KADhB,CAEA7F,MANR,CAQE,EAAE,CAAC,WARL,CASE,SAAS,CAAC,aATZ,EADF,cAYE,yBACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAE,KAAK4D,WAFhB,CAGE,KAAK,CAAE,CACLkC,MAAM,CAAE,SADH,CAHT,iBAZF,CAJF,cA0BE,8BA1BF,cA2BE,4BACE,EAAE,CAAC,KADL,CAEE,MAAM,CAAC,EAFT,CAGE,QAAQ,CAAE,KAAKpF,YAHjB,CAIE,MAAM,CAAC,MAJT,eAME,6BACE,GAAG,CAAE,aAACqF,KAAD,QAAY,CAAA,MAAI,CAAClC,WAAL,CAAmBkC,KAA/B,EADP,CAEE,QAAQ,CAAE,KAAKhC,QAFjB,CAGE,YAAY,CAAC,KAHf,CAIE,EAAE,CAAC,aAJL,CAKE,IAAI,CAAC,OALP,CAME,IAAI,CAAC,MANP,CAOE,MAAM,KAPR,EANF,cAeE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,6BAAO,GAAG,CAAC,WAAX,CAAuB,SAAS,CAAC,SAAjC,cADF,cAIE,8BAJF,cAKE,6BACE,GAAG,CAAE,aAACgC,KAAD,QAAY9F,CAAAA,MAAM,CAAG8F,KAArB,EADP,CAEE,IAAI,CAAC,WAFP,CAGE,IAAI,CAAC,WAHP,CAIE,EAAE,CAAC,aAJL,CAKE,SAAS,CAAC,0BALZ,CAME,WAAW,CAAC,WANd,EALF,CADF,cAeE,2BAAK,SAAS,CAAC,gBAAf,eACE,6BAAO,GAAG,CAAC,UAAX,CAAsB,SAAS,CAAC,SAAhC,aADF,cAIE,8BAJF,cAKE,6BACE,GAAG,CAAE,aAACA,KAAD,QAAY7F,CAAAA,MAAM,CAAG6F,KAArB,EADP,CAEE,IAAI,CAAC,UAFP,CAGE,IAAI,CAAC,UAHP,CAIE,EAAE,CAAC,aAJL,CAKE,SAAS,CAAC,0BALZ,CAME,WAAW,CAAC,UANd,EALF,CAfF,CAfF,cA6CE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,6BAAO,GAAG,CAAC,SAAX,CAAqB,SAAS,CAAC,SAA/B,YADF,cAIE,8BAJF,cAKE,6BACE,GAAG,CAAE,aAACA,KAAD,QAAY1F,CAAAA,QAAQ,CAAG0F,KAAvB,EADP,CAEE,IAAI,CAAC,SAFP,CAGE,IAAI,CAAC,SAHP,CAIE,EAAE,CAAC,eAJL,CAKE,SAAS,CAAC,0BALZ,CAME,WAAW,CAAC,SANd,EALF,CADF,cAeE,2BAAK,SAAS,CAAC,gBAAf,eACE,6BAAO,GAAG,CAAC,WAAX,CAAuB,SAAS,CAAC,SAAjC,cADF,cAIE,8BAJF,cAKE,6BACE,GAAG,CAAE,aAACA,KAAD,QAAY5F,CAAAA,MAAM,CAAG4F,KAArB,EADP,CAEE,IAAI,CAAC,WAFP,CAGE,IAAI,CAAC,WAHP,CAIE,EAAE,CAAC,aAJL,CAKE,SAAS,CAAC,0BALZ,CAME,WAAW,CAAC,WANd,EALF,CAfF,CA7CF,cA2EE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,6BAAO,GAAG,CAAC,KAAX,CAAiB,SAAS,CAAC,SAA3B,aADF,cAIE,8BAJF,cAKE,6BACE,GAAG,CAAE,aAACA,KAAD,QAAYzF,CAAAA,IAAI,CAAGyF,KAAnB,EADP,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,KAHP,CAIE,EAAE,CAAC,WAJL,CAKE,SAAS,CAAC,0BALZ,CAME,WAAW,CAAC,UANd,EALF,CADF,cAeE,2BAAK,SAAS,CAAC,gBAAf,eACE,6BAAO,GAAG,CAAC,SAAX,CAAqB,SAAS,CAAC,SAA/B,WADF,cAIE,8BAJF,cAKE,8BACE,GAAG,CAAE,aAACA,KAAD,QAAY3F,CAAAA,QAAQ,CAAG2F,KAAvB,EADP,CAEE,IAAI,CAAC,WAFP,CAGE,EAAE,CAAC,eAHL,CAIE,SAAS,CAAC,0BAJZ,eAME,8BAAQ,KAAK,CAAC,QAAd,WANF,cAOE,8BAAQ,KAAK,CAAC,SAAd,YAPF,cAQE,8BAAQ,KAAK,CAAC,SAAd,YARF,cASE,8BAAQ,KAAK,CAAC,UAAd,aATF,CALF,CAfF,CA3EF,cA4GE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,6BAAO,GAAG,CAAC,OAAX,CAAmB,SAAS,CAAC,SAA7B,UADF,cAIE,8BAJF,cAKE,6BACE,IAAI,CAAC,OADP,CAEE,IAAI,CAAC,OAFP,CAGE,EAAE,CAAC,aAHL,CAIE,SAAS,CAAC,0BAJZ,CAKE,WAAW,CAAC,eALd,CAME,QAAQ,KANV,EALF,CADF,cAeE,2BAAK,SAAS,CAAC,gBAAf,eACE,6BAAO,GAAG,CAAC,UAAX,CAAsB,SAAS,CAAC,SAAhC,aADF,cAIE,8BAJF,cAKE,6BACE,GAAG,CAAE,aAACA,KAAD,QAAYxF,CAAAA,SAAS,CAAGwF,KAAxB,EADP,CAEE,IAAI,CAAC,UAFP,CAGE,IAAI,CAAC,UAHP,CAIE,EAAE,CAAC,UAJL,CAKE,SAAS,CAAC,0BALZ,CAME,WAAW,CAAC,WANd,EALF,CAfF,CA5GF,cA0IE,8BACE,EAAE,CAAC,gBADL,CAEE,IAAI,CAAC,QAFP,CAGE,SAAS,CAAC,eAHZ,CAIE,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAb,CAJT,mBA1IF,CA3BF,CADF,CAJF,CANF,CAFF,cAmOE,oBAAC,MAAD,MAnOF,cAqOE,oBAAC,SAAD,EACE,IAAI,CAAC,iBADP,CAEE,GAAG,CAAC,uBAFN,EArOF,CADF,CA4OD,CApgBH,qBAA6B7G,SAA7B,EAsgBA,cAAeqB,CAAAA,OAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, Redirect, Route } from \"react-router-dom\";\n\nimport Header from \"./common/Header\";\nimport Footer from \"./common/Footer\";\n\nimport ScriptTag from \"react-script-tag\";\nimport NumberFormat from \"react-number-format\";\nimport { PaystackConsumer } from \"react-paystack\";\n\nimport AOS from \"aos\";\nimport axios from \"axios\";\nimport swal from \"sweetalert\";\nimport $ from \"jquery\";\n\nimport Avatar from \"./assets/img/default-user-avatar.png\";\n\nvar _fname, _lname, _phone, _mstatus, _address, _dob, _password;\n\nexport class Profile extends Component {\n  constructor(props) {\n    super(props);\n    // let { user } = this.props.appstate;\n    this.state = {\n      token: localStorage[\"appState\"]\n        ? JSON.parse(localStorage[\"appState\"]).user.token\n        : \"\",\n      user: [],\n      imageSource: \"\",\n      file: null,\n      payment_ref: \"\",\n      auth_code: \"\",\n    };\n    this.onChange = this.onChange.bind(this);\n  }\n\n  componentDidMount() {\n    // //console.log(id);\n    this.getUser();\n  }\n\n  getUser() {\n    axios\n      .get(\n        `${axios.defaults.baseURL}/user/${\n          JSON.parse(localStorage[\"appState\"]).user.id\n        }`,\n        {\n          headers: {\n            Authorization: `Bearer ${this.state.token}`,\n          },\n        }\n      )\n      .then((response) => {\n        //console.log(response);\n        return response;\n      })\n      .then((json) => {\n        if (json.data.success) {\n          this.setState({ user: json.data.user[0] });\n          // } else alert(\"Cannot Fetch Data!\");\n        } else swal(\"Oops!\", \"Cannot Fetch Data!\", \"error\");\n      })\n      .catch((error) => {\n        console.error(`An Error Occured! ${error}`);\n      });\n  }\n\n  handleUpdate = (e) => {\n    e.preventDefault();\n\n    $(\"#update-profile\")\n      .attr(\"disabled\", \"disabled\")\n      .html(\n        '<i class=\"fa fa-spinner fa-spin fa-1x fa-fw\"></i><span class=\"sr-only\">Loading...</span>'\n      );\n\n    var formData = new FormData();\n    formData.append(\"fname\", _fname.value);\n    formData.append(\"lname\", _lname.value);\n    formData.append(\"phone\", _phone.value);\n    formData.append(\"image\", this.state.file);\n    formData.append(\"password\", _password.value);\n    formData.append(\"mstatus\", _mstatus.value);\n    formData.append(\"address\", _address.value);\n    formData.append(\"dob\", _dob.value);\n\n    //console.log(formData);\n\n    axios({\n      method: \"post\",\n      url: `${axios.defaults.baseURL}/user/${\n        JSON.parse(localStorage[\"appState\"]).user.id\n      }`,\n      data: formData,\n      headers: {\n        Authorization: `Bearer ${this.state.token}`,\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    })\n      .then((response) => {\n        //console.log(response);\n        return response;\n      })\n      .then((json) => {\n        const {\n          id,\n          fname,\n          lname,\n          email,\n          phone,\n          mstatus,\n          address,\n          dob,\n        } = json.data.user;\n        const { token } = json.data.token;\n        let userData = {\n          id,\n          fname,\n          lname,\n          email,\n          phone,\n          mstatus,\n          address,\n          dob,\n          token,\n          timestamp: new Date().toString(),\n        };\n        let appState = {\n          isLoggedIn: true,\n          user: userData,\n        };\n        // save app state with user date in local storage\n        localStorage[\"appState\"] = JSON.stringify(appState);\n        this.setState({\n          isLoggedIn: appState.isLoggedIn,\n          user: appState.user,\n          token: appState.token,\n        });\n\n        if (json.data.success === true) {\n          \n          this.getUser();\n          \n          swal(\"Updated!\", \"\" + json.data.message, \"success\", {\n            button: false,\n            timer: 1500,\n          });\n\n          $(\"#update-profile\").removeAttr(\"disabled\").html(\"Update Profile\");\n          // redirect home\n          // this.props.history.push(\"/my-account\");\n        } else {\n          // alert(json.data.message);\n          swal(\"Alert!\", \"\" + json.data.message, \"warning\");\n          $(\"#update-profile\").removeAttr(\"disabled\").html(\"Update Profile\");\n        }\n      })\n      .catch((error) => {\n        // alert(\"An Error Occured!\" + error);\n        //console.log(error.response.data);\n        if (error.response.data.message.fname === \"\") {\n          swal(\"Warning!\", \"\" + error.response.data.message.fname, \"warning\");\n        } else {\n          swal(\"Warning!\", \"Please fill all fields\", \"warning\");\n        }\n        $(\"#update-profile\").removeAttr(\"disabled\").html(\"Update Profile\");\n      });\n  };\n\n  // onChange(e) {\n  //   this.setState({file:e.target.files[0]});\n  // }\n\n  uploadPhoto = (e) => {\n    this.photoUpload.click();\n  };\n\n  onChange = (event) => {\n    this.setState({\n      imageSource: \"\",\n      imageData: \"\",\n      file: event.target.files[0],\n    });\n    const file = event.target.files[0];\n    //console.log(file);\n\n    if (file) {\n      let reader = new FileReader();\n      reader.readAsDataURL(event.target.files[0]);\n      reader.onload = (event) => {\n        this.setState({\n          imageSource: event.target.result,\n          imageData: file,\n        });\n      };\n    }\n  };\n\n  render() {\n    $(\"#fname-input\").attr(\"value\", this.state.user.fname);\n    $(\"#lname-input\").attr(\"value\", this.state.user.lname);\n    $(\"#email-input\").attr(\"value\", this.state.user.email);\n    $(\"#phone-input\").attr(\"value\", this.state.user.phone);\n    $(\"#mstatus-input\").attr(\"value\", this.state.user.mstatus);\n    $(\"#address-input\").attr(\"value\", this.state.user.address);\n    $(\"#dob-input\").attr(\"value\", this.state.user.dob);\n\n    const configNGN = {\n      // reference: (new Date()).getTime(),\n      email: this.state.user.email,\n      // plan: this.state.plan,\n      amount: \"10000\",\n      currency: \"NGN\",\n      publicKey: \"pk_live_68d2b6e9edacd11392f5548db9047ffb4911b39d\",\n      // publicKey: \"pk_test_3a1c9194d014f2629abda6e0c3f22cb931141cf4\",\n    };\n\n    const componentPropsNGN = {\n      ...configNGN,\n      text: \"Bank Card Update\",\n      onSuccess: (response) => {\n        // console.log(response);\n\n        this.setState({\n          payment_ref: response.trxref,\n        });\n\n        axios({\n          method: \"get\",\n          url: `https://api.paystack.co/transaction/verify/${this.state.payment_ref}`,\n          headers: {\n            Authorization: `Bearer sk_live_5299c2d2e25663425657490251d1cec7d8c206aa`,\n            \"Content-Type\": \"application/json\",\n          },\n          // headers: {'Authorization': `Bearer sk_test_2e3a16e2c572cbcfd59cbc761105f58b7a34e90d`, 'Content-Type': 'application/json' }\n        })\n          .then((response) => {\n            //console.log(response);\n            return response;\n          })\n          .then((json) => {\n            this.setState({\n              auth_code: json.data.data.authorization.authorization_code,\n            });\n\n            swal(\"Success!\", \"Card Update was Successful!\", \"success\", {\n              button: false,\n              timer: 1500,\n            });\n\n            var formData = new FormData();\n            formData.append(\"auth_code\", this.state.auth_code);\n            formData.append(\n              \"user_id\",\n              JSON.parse(localStorage[\"appState\"]).user.id\n            );\n\n            axios({\n              method: \"post\",\n              url: `${axios.defaults.baseURL}/update-user-card`,\n              data: formData,\n              headers: {\n                Authorization: `Bearer ${\n                  JSON.parse(localStorage[\"appState\"]).user.token\n                }`,\n                \"Content-Type\": \"multipart/form-data\",\n              },\n            })\n              .then((response) => {\n                //console.log(response);\n                return response;\n              })\n              .then((json) => {\n                if (json.data.success) {\n                  // swal(\"Success!\", \"\" + json.data.message, \"success\", {\n                  //   button: false,\n                  //   timer: 1500,\n                  // });\n                  // redirect to plans\n                  this.props.history.push(\"/my-account\");\n                } else {\n                  swal(\"Failed\", \"\" + json.data.message, \"error\");\n                }\n              })\n              .catch((error) => {\n                // alert(\"An Error Occured!\" + error);\n                let res = \"An Error Occured\";\n                swal(\"Error!\", \"\" + res, \"error\", {\n                  button: false,\n                  // timer: 1500\n                });\n                //console.log(`${formData} ${error}`);\n              });\n          });\n      },\n      onClose: () => null,\n    };\n\n    return (\n      <body className=\"page-overview  ac-gn-current-music\">\n        <Header />\n        <section\n          id=\"section-battery\"\n          className=\"section section-battery theme-dark\"\n          data-anim-scroll-group=\"section-battery\"\n          data-analytics-fallback-section-engagement=\"name:battery\"\n        >\n          <div\n            className=\"copy-scroll-container\"\n            data-component-list=\"CopyMagic\"\n          >\n            <div className=\"sticky-copy-lockup flex-copy-lockup intro\">\n              <div className=\"\" data-copy=\"0\">\n                <p className=\"typography-section-eyebrow align-text default-text\">\n                  Your Sapio Profile!\n                </p>\n                <div className=\"avatar-center\">\n                  <img\n                    src={\n                      this.state.imageSource\n                        ? this.state.imageSource\n                        : this.state.user.image\n                        ? this.state.user.image\n                        : Avatar\n                    }\n                    id=\"user-logo\"\n                    className=\"user-avatar\"\n                  />\n                  <p\n                    role=\"button\"\n                    onClick={this.uploadPhoto}\n                    style={{\n                      cursor: \"pointer\",\n                    }}\n                  >\n                    Change Photo\n                  </p>\n                </div>\n                <br />\n                <form\n                  id=\"reg\"\n                  action=\"\"\n                  onSubmit={this.handleUpdate}\n                  method=\"post\"\n                >\n                  <input\n                    ref={(input) => (this.photoUpload = input)}\n                    onChange={this.onChange}\n                    autoComplete=\"off\"\n                    id=\"image-input\"\n                    name=\"image\"\n                    type=\"file\"\n                    hidden\n                  />\n                  <div className=\"row\">\n                    <div className=\"form-group col\">\n                      <label for=\"firstname\" className=\"sr-only\">\n                        Firstname\n                      </label>\n                      <br />\n                      <input\n                        ref={(input) => (_fname = input)}\n                        type=\"firstname\"\n                        name=\"firstname\"\n                        id=\"fname-input\"\n                        className=\"form-control input-field\"\n                        placeholder=\"Firstname\"\n                      />\n                    </div>\n                    <div className=\"form-group col\">\n                      <label for=\"lastname\" className=\"sr-only\">\n                        Lastname\n                      </label>\n                      <br />\n                      <input\n                        ref={(input) => (_lname = input)}\n                        type=\"lastname\"\n                        name=\"lastname\"\n                        id=\"lname-input\"\n                        className=\"form-control input-field\"\n                        placeholder=\"Lastname\"\n                      />\n                    </div>\n                  </div>\n                  <div className=\"row\">\n                    <div className=\"form-group col\">\n                      <label for=\"address\" className=\"sr-only\">\n                        Address\n                      </label>\n                      <br />\n                      <input\n                        ref={(input) => (_address = input)}\n                        type=\"address\"\n                        name=\"address\"\n                        id=\"address-input\"\n                        className=\"form-control input-field\"\n                        placeholder=\"Address\"\n                      />\n                    </div>\n                    <div className=\"form-group col\">\n                      <label for=\"telephone\" className=\"sr-only\">\n                        Telephone\n                      </label>\n                      <br />\n                      <input\n                        ref={(input) => (_phone = input)}\n                        type=\"telephone\"\n                        name=\"telephone\"\n                        id=\"phone-input\"\n                        className=\"form-control input-field\"\n                        placeholder=\"Telephone\"\n                      />\n                    </div>\n                  </div>\n                  <div className=\"row\">\n                    <div className=\"form-group col\">\n                      <label for=\"dob\" className=\"sr-only\">\n                        Birthday\n                      </label>\n                      <br />\n                      <input\n                        ref={(input) => (_dob = input)}\n                        type=\"date\"\n                        name=\"dob\"\n                        id=\"dob-input\"\n                        className=\"form-control input-field\"\n                        placeholder=\"Birthday\"\n                      />\n                    </div>\n                    <div className=\"form-group col\">\n                      <label for=\"mstatus\" className=\"sr-only\">\n                        Status\n                      </label>\n                      <br />\n                      <select\n                        ref={(input) => (_mstatus = input)}\n                        name=\"telephone\"\n                        id=\"mstatus-input\"\n                        className=\"form-control input-field\"\n                      >\n                        <option value=\"Single\">Single</option>\n                        <option value=\"Engaged\">Engaged</option>\n                        <option value=\"Married\">Married</option>\n                        <option value=\"Divorced\">Divorced</option>\n                      </select>\n                    </div>\n                  </div>\n                  <div className=\"row\">\n                    <div className=\"form-group col\">\n                      <label for=\"email\" className=\"sr-only\">\n                        Email\n                      </label>\n                      <br />\n                      <input\n                        type=\"email\"\n                        name=\"email\"\n                        id=\"email-input\"\n                        className=\"form-control input-field\"\n                        placeholder=\"Email Address\"\n                        disabled\n                      />\n                    </div>\n                    <div className=\"form-group col\">\n                      <label for=\"password\" className=\"sr-only\">\n                        Password\n                      </label>\n                      <br />\n                      <input\n                        ref={(input) => (_password = input)}\n                        type=\"password\"\n                        name=\"password\"\n                        id=\"password\"\n                        className=\"form-control input-field\"\n                        placeholder=\"*********\"\n                      />\n                    </div>\n                  </div>\n                  <button\n                    id=\"update-profile\"\n                    type=\"submit\"\n                    className=\"submit-button\"\n                    style={{ marginTop: \"32px\" }}\n                  >\n                    Update Profile\n                  </button>\n                  {/* <PaystackConsumer {...componentPropsNGN}>\n                      {({ initializePayment }) => (\n                        <button\n                          type=\"button\"\n                          onClick={() =>\n                            swal(\n                              \"You will be required to pay a membership fee of ₦100,000\",\n                              {\n                                buttons: {\n                                  cancel: \"No, Cancel\",\n                                  catch: {\n                                    text: \"Yes, Continue\",\n                                    value: \"catch\",\n                                  },\n                                },\n                              }\n                            ).then((value) => {\n                              switch (value) {\n                                case \"catch\":\n                                  initializePayment();\n                                  break;\n\n                                default:\n                              }\n                            })\n                          }\n                          id=\"reg-button\"\n                          name=\"register-button\"\n                          className=\"submit-button\"\n                          style={{ marginTop: \"32px\" }}\n                        >\n                          Update Profile\n                        </button>\n                      )}\n                    </PaystackConsumer> */}\n                </form>\n              </div>\n            </div>\n          </div>\n        </section>\n        {/*/main*/}\n        <Footer />\n        {/* Template Main JS File */}\n        <ScriptTag\n          type=\"text/javascript\"\n          src=\"../assets/js/built.js\"\n        />\n      </body>\n    );\n  }\n}\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}