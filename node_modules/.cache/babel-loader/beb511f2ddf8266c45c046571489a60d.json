{"ast":null,"code":"var _jsxFileName = \"/Users/hipheckt/codes/sapio/src/Edit.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport $ from \"jquery\";\nimport swal from 'sweetalert';\nconst styles = {\n  input: {\n    backgroundColor: \"white\",\n    border: \"1px solid #cccccc\",\n    padding: 15,\n    float: \"left\",\n    clear: \"right\",\n    width: \"80%\",\n    margin: 15\n  },\n  button: {\n    height: 44,\n    boxShadow: \"0px 8px 15px rgba(0, 0, 0, 0.1)\",\n    border: \"none\",\n    backgroundColor: \"red\",\n    margin: 15,\n    float: \"left\",\n    clear: \"both\",\n    width: \"85%\",\n    color: \"white\",\n    padding: 15\n  },\n  link: {\n    width: \"100%\",\n    float: \"left\",\n    clear: \"both\",\n    textAlign: \"center\"\n  }\n};\n\nvar _fname, _lname, _email, _phone, _password;\n\nvar id = window.location.href.split('/')[window.location.href.split('/').length - 1];\n\nclass Edit extends React.Component {\n  constructor(props) {\n    super(props); // let { user } = this.props.appstate;\n\n    this.handleLogin = e => {\n      e.preventDefault();\n      $(\"#email-login-btn\").attr(\"disabled\", \"disabled\").html('<i class=\"fa fa-spinner fa-spin fa-1x fa-fw\"></i><span class=\"sr-only\">Loading...</span>');\n      var formData = new FormData();\n      formData.append(\"fname\", _fname.value);\n      formData.append(\"lname\", _lname.value);\n      formData.append(\"email\", _email.value);\n      formData.append(\"phone\", _phone.value);\n      formData.append(\"image\", this.state.file);\n      formData.append(\"password\", _password.value);\n      console.log(formData);\n      axios({\n        method: 'post',\n        url: `http://localhost:8000/api/v1/user/${id}`,\n        data: formData,\n        headers: {\n          'Authorization': `Bearer ${this.state.token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(response => {\n        console.log(response);\n        return response;\n      }).then(json => {\n        const {\n          id,\n          fname,\n          lname,\n          email,\n          phone\n        } = json.data.user;\n        const {\n          token\n        } = json.data.token;\n        let userData = {\n          id,\n          fname,\n          lname,\n          email,\n          phone,\n          token,\n          timestamp: new Date().toString()\n        };\n        let appState = {\n          isLoggedIn: true,\n          user: userData\n        }; // save app state with user date in local storage\n\n        localStorage[\"appState\"] = JSON.stringify(appState);\n        this.setState({\n          isLoggedIn: appState.isLoggedIn,\n          user: appState.user,\n          token: appState.token\n        });\n\n        if (json.data.success === true) {\n          swal(\"Updated!\", \"\" + json.data.message, \"success\"); // redirect home\n\n          this.props.history.push(\"/\");\n        } else {\n          // alert(json.data.message);\n          swal(\"Alert!\", \"\" + json.data.message, \"warning\");\n          $(\"#email-login-btn\").removeAttr(\"disabled\").html(\"Edit\");\n        }\n      }).catch(error => {\n        // alert(\"An Error Occured!\" + error);\n        console.log(error.response.data);\n        swal(\"Oops!\", \"\" + error.response, \"error\");\n        $(\"#email-login-btn\").removeAttr(\"disabled\").html(\"Edit\");\n      });\n    };\n\n    this.uploadPhoto = e => {\n      this.photoUpload.click();\n    };\n\n    this.onChange = event => {\n      this.setState({\n        imageSource: '',\n        imageData: '',\n        file: event.target.files[0]\n      });\n      const file = event.target.files[0];\n      console.log(file);\n\n      if (file) {\n        let reader = new FileReader();\n        reader.readAsDataURL(event.target.files[0]);\n\n        reader.onload = event => {\n          this.setState({\n            imageSource: event.target.result,\n            imageData: file\n          });\n        };\n      }\n    };\n\n    this.state = {\n      token: localStorage[\"appState\"] ? JSON.parse(localStorage[\"appState\"]).user.token : \"\",\n      user: [],\n      imageSource: '',\n      file: null\n    };\n    this.onChange = this.onChange.bind(this);\n  }\n\n  componentDidMount() {\n    // console.log(id);\n    var id = window.location.href.split('/')[window.location.href.split('/').length - 1];\n    axios.get(`http://localhost:8000/api/v1/user/${id}`, {\n      headers: {\n        'Authorization': `Bearer ${this.state.token}`\n      }\n    }).then(response => {\n      console.log(response);\n      return response;\n    }).then(json => {\n      if (json.data.success) {\n        this.setState({\n          user: json.data.user[0]\n        }); // } else alert(\"Cannot Fetch Data!\");\n      } else swal(\"Oops!\", \"Cannot Fetch Data!\", \"error\");\n\n      ;\n    }).catch(error => {\n      console.error(`An Error Occured! ${error}`);\n    }); // alert(id)\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: styles,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        padding: 15\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 7\n      }\n    }, \"Edit User\"), /*#__PURE__*/React.createElement(\"form\", {\n      id: \"login-form\",\n      action: \"\",\n      onSubmit: this.handleLogin,\n      method: \"post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      ref: input => _fname = input,\n      style: styles.input,\n      autoComplete: \"off\",\n      id: \"fname-input\",\n      name: \"fname\",\n      type: \"text\",\n      className: \"center-block\",\n      placeholder: this.state.user.fname,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      ref: input => _lname = input,\n      style: styles.input,\n      autoComplete: \"off\",\n      id: \"lname-input\",\n      name: \"lname\",\n      type: \"text\",\n      className: \"center-block\",\n      placeholder: this.state.user.lname,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      ref: input => _email = input,\n      style: styles.input,\n      autoComplete: \"off\",\n      id: \"email-input\",\n      name: \"email\",\n      type: \"text\",\n      placeholder: this.state.user.email,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      ref: input => _phone = input,\n      style: styles.input,\n      autoComplete: \"off\",\n      id: \"phone-input\",\n      name: \"phone\",\n      type: \"text\",\n      className: \"center-block\",\n      placeholder: this.state.user.phone,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: this.uploadPhoto,\n      className: \"uk-inline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"\",\n      src: this.state.imageSource ? this.state.imageSource : this.state.user.image ? this.state.user.image : null,\n      alt: \"Alt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      ref: input => this.photoUpload = input,\n      onChange: this.onChange,\n      style: styles.input,\n      autoComplete: \"off\",\n      id: \"image-input\",\n      name: \"image\",\n      type: \"file\",\n      className: \"center-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      ref: input => _password = input,\n      style: styles.input,\n      autoComplete: \"off\",\n      id: \"password-input\",\n      name: \"password\",\n      type: \"password\",\n      className: \"center-block\",\n      placeholder: \"Enter new password or leave blank to maintain old password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      style: styles.button,\n      className: \"landing-page-btn center-block text-center\",\n      id: \"email-login-btn\",\n      href: \"#facebook\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 13\n      }\n    }, \"Update\"), /*#__PURE__*/React.createElement(Link, {\n      style: styles.link,\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 13\n      }\n    }, \"Home\")));\n  }\n\n}\n\nexport default Edit;","map":{"version":3,"sources":["/Users/hipheckt/codes/sapio/src/Edit.js"],"names":["React","axios","Link","$","swal","styles","input","backgroundColor","border","padding","float","clear","width","margin","button","height","boxShadow","color","link","textAlign","_fname","_lname","_email","_phone","_password","id","window","location","href","split","length","Edit","Component","constructor","props","handleLogin","e","preventDefault","attr","html","formData","FormData","append","value","state","file","console","log","method","url","data","headers","token","then","response","json","fname","lname","email","phone","user","userData","timestamp","Date","toString","appState","isLoggedIn","localStorage","JSON","stringify","setState","success","message","history","push","removeAttr","catch","error","uploadPhoto","photoUpload","click","onChange","event","imageSource","imageData","target","files","reader","FileReader","readAsDataURL","onload","result","parse","bind","componentDidMount","get","render","image"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport $ from \"jquery\";\r\n\r\nimport swal from 'sweetalert';\r\n\r\nconst styles = {\r\n  input: {\r\n    backgroundColor: \"white\",\r\n    border: \"1px solid #cccccc\",\r\n    padding: 15,\r\n    float: \"left\",\r\n    clear: \"right\",\r\n    width: \"80%\",\r\n    margin: 15\r\n  },\r\n  button: {\r\n    height: 44,\r\n    boxShadow: \"0px 8px 15px rgba(0, 0, 0, 0.1)\",\r\n    border: \"none\",\r\n    backgroundColor: \"red\",\r\n    margin: 15,\r\n    float: \"left\",\r\n    clear: \"both\",\r\n    width: \"85%\",\r\n    color: \"white\",\r\n    padding: 15\r\n  },\r\n  link: {\r\n    width: \"100%\",\r\n    float: \"left\",\r\n    clear: \"both\",\r\n    textAlign: \"center\"\r\n  }\r\n};\r\n\r\nvar _fname, _lname, _email, _phone, _password;\r\n\r\nvar id = window.location.href.split('/')[window.location.href.split('/').length - 1];\r\n\r\n\r\nclass Edit extends React.Component{\r\n  constructor(props) {\r\n    super(props);\r\n    // let { user } = this.props.appstate;\r\n    this.state = {\r\n      token: localStorage[\"appState\"]\r\n        ? JSON.parse(localStorage[\"appState\"]).user.token\r\n        : \"\",\r\n      user: [],\r\n      imageSource: '',\r\n      file: null\r\n    };\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    // console.log(id);\r\n    var id = window.location.href.split('/')[window.location.href.split('/').length - 1];\r\n\r\n    axios\r\n      .get(`http://localhost:8000/api/v1/user/${id}`,\r\n      {\r\n        headers: {\r\n          'Authorization': `Bearer ${this.state.token}`\r\n        }\r\n      }\r\n      )\r\n      .then(response => {\r\n        console.log(response);\r\n        return response;\r\n      })\r\n      .then(json => {\r\n        if (json.data.success) {\r\n          this.setState({ user: json.data.user[0] });\r\n        // } else alert(\"Cannot Fetch Data!\");\r\n        } else swal(\"Oops!\", \"Cannot Fetch Data!\", \"error\");;\r\n      })\r\n      .catch(error => {\r\n        console.error(`An Error Occured! ${error}`);\r\n      });\r\n      // alert(id)\r\n  };\r\n\r\n  handleLogin = e => {\r\n    e.preventDefault();\r\n\r\n    $(\"#email-login-btn\")\r\n    .attr(\"disabled\", \"disabled\")\r\n    .html(\r\n      '<i class=\"fa fa-spinner fa-spin fa-1x fa-fw\"></i><span class=\"sr-only\">Loading...</span>'\r\n    );\r\n\r\n    var formData = new FormData();\r\n    formData.append(\"fname\", _fname.value);\r\n    formData.append(\"lname\", _lname.value);\r\n    formData.append(\"email\", _email.value);\r\n    formData.append(\"phone\", _phone.value);\r\n    formData.append(\"image\", this.state.file);\r\n    formData.append(\"password\", _password.value);\r\n\r\n    console.log(formData);\r\n\r\n  axios({\r\n      method: 'post',\r\n      url: `http://localhost:8000/api/v1/user/${id}`,\r\n      data: formData,\r\n      headers: {'Authorization': `Bearer ${this.state.token}`, 'Content-Type': 'multipart/form-data' }\r\n      })\r\n    .then(response => {\r\n      console.log(response);\r\n      return response;\r\n    })\r\n    .then(json => {\r\n      const { id, fname, lname, email, phone } = json.data.user;\r\n      const { token } = json.data.token;\r\n      let userData = {\r\n        id,\r\n        fname,\r\n        lname,\r\n        email,\r\n        phone,\r\n        token,\r\n        timestamp: new Date().toString()\r\n      };\r\n      let appState = {\r\n        isLoggedIn: true,\r\n        user: userData\r\n      };\r\n      // save app state with user date in local storage\r\n      localStorage[\"appState\"] = JSON.stringify(appState);\r\n      this.setState({\r\n        isLoggedIn: appState.isLoggedIn,\r\n        user: appState.user,\r\n        token: appState.token\r\n      });\r\n\r\n      if (json.data.success === true) {\r\n        swal(\"Updated!\", \"\" + json.data.message, \"success\");\r\n        // redirect home\r\n        this.props.history.push(\"/\");\r\n      } else {\r\n        // alert(json.data.message);\r\n        swal(\"Alert!\", \"\" + json.data.message, \"warning\");\r\n        $(\"#email-login-btn\")\r\n          .removeAttr(\"disabled\")\r\n          .html(\"Edit\");\r\n      }\r\n\r\n    })\r\n    .catch(error => {\r\n      // alert(\"An Error Occured!\" + error);\r\n      console.log(error.response.data);\r\n      swal(\"Oops!\", \"\" + error.response, \"error\");\r\n      $(\"#email-login-btn\")\r\n        .removeAttr(\"disabled\")\r\n        .html(\"Edit\");\r\n    });\r\n\r\n  };\r\n\r\n  // onChange(e) {\r\n  //   this.setState({file:e.target.files[0]});\r\n  // }\r\n\r\n  uploadPhoto = e => {\r\n    this.photoUpload.click();\r\n  };\r\n\r\n  onChange = event => {\r\n    this.setState({ imageSource: '', imageData: '', file:event.target.files[0] });\r\n    const file = event.target.files[0];\r\n    console.log(file);\r\n\r\n    if (file) {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(event.target.files[0]);\r\n      reader.onload = event => {\r\n        this.setState({\r\n          imageSource: event.target.result,\r\n          imageData: file\r\n        });\r\n      };\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div style={styles}>\r\n      <h3 style={{ padding: 15 }}>Edit User</h3>\r\n            <form id=\"login-form\" action=\"\" onSubmit={this.handleLogin} method=\"post\">\r\n            <input\r\n              ref={input => (_fname = input)}\r\n              style={styles.input}\r\n              autoComplete=\"off\"\r\n              id=\"fname-input\"\r\n              name=\"fname\"\r\n              type=\"text\"\r\n              className=\"center-block\"\r\n              placeholder={this.state.user.fname}\r\n            />\r\n            <input\r\n              ref={input => (_lname = input)}\r\n              style={styles.input}\r\n              autoComplete=\"off\"\r\n              id=\"lname-input\"\r\n              name=\"lname\"\r\n              type=\"text\"\r\n              className=\"center-block\"\r\n              placeholder={this.state.user.lname}\r\n            />\r\n            <input\r\n              ref={input => (_email = input)}\r\n              style={styles.input}\r\n              autoComplete=\"off\"\r\n              id=\"email-input\"\r\n              name=\"email\"\r\n              type=\"text\"\r\n              placeholder={this.state.user.email}\r\n            />\r\n            <input\r\n              ref={input => (_phone = input)}\r\n              style={styles.input}\r\n              autoComplete=\"off\"\r\n              id=\"phone-input\"\r\n              name=\"phone\"\r\n              type=\"text\"\r\n              className=\"center-block\"\r\n              placeholder={this.state.user.phone}\r\n            />\r\n            <div onClick={this.uploadPhoto} className=\"uk-inline\">\r\n                <img\r\n                  className=\"\"\r\n                  src={\r\n                    this.state.imageSource\r\n                      ? this.state.imageSource :\r\n                      this.state.user.image ?\r\n                      this.state.user.image\r\n                      : null\r\n                  }\r\n                  alt=\"Alt\"\r\n                />\r\n            </div>\r\n            <input\r\n              ref={input => (this.photoUpload = input)}\r\n              onChange= {this.onChange}\r\n              style={styles.input}\r\n              autoComplete=\"off\"\r\n              id=\"image-input\"\r\n              name=\"image\"\r\n              type=\"file\"\r\n              className=\"center-block\"\r\n            />\r\n            <input\r\n              ref={input => (_password = input)}\r\n              style={styles.input}\r\n              autoComplete=\"off\"\r\n              id=\"password-input\"\r\n              name=\"password\"\r\n              type=\"password\"\r\n              className=\"center-block\"\r\n              placeholder=\"Enter new password or leave blank to maintain old password\"\r\n            />\r\n            <button\r\n              type=\"submit\"\r\n              style={styles.button}\r\n              className=\"landing-page-btn center-block text-center\"\r\n              id=\"email-login-btn\"\r\n              href=\"#facebook\"\r\n            >\r\n              Update\r\n            </button>\r\n            <Link style={styles.link} to=\"/\">\r\n              Home\r\n            </Link>\r\n          </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Edit;\r\n"]},"metadata":{},"sourceType":"module"}