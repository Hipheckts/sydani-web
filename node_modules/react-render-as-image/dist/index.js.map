{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport './styles.scss';\r\nimport htmlToImage from 'html-to-image';\r\n\r\nexport type IRenderAsImageProps = {\r\n  children: React.ReactNode,\r\n  width?: number | string,\r\n  height?: number | string,\r\n  alt?: string,\r\n  format?: string\r\n}\r\n\r\nconst initialState = { imageDataUrl: '' };\r\ntype State = Readonly<typeof initialState>;\r\n\r\nclass RenderAsImage extends React.Component<IRenderAsImageProps> {\r\n    private myDiv: HTMLDivElement | null;\r\n    readonly state: State = initialState;\r\n\r\n    componentDidMount = () => {\r\n      let format : string | undefined  = this.props.format;\r\n\r\n      if (this.myDiv) {\r\n        switch (format) {\r\n          case \"png\": \r\n            htmlToImage.toPng(ReactDOM.findDOMNode(this.myDiv.firstElementChild) as HTMLElement)\r\n            .then(\r\n              (dataUrl) => {\r\n                this.setState({...this.state, imageDataUrl: dataUrl });\r\n              }\r\n            );\r\n            break;\r\n          case \"jpeg\":\r\n          default:\r\n            htmlToImage.toJpeg(ReactDOM.findDOMNode(this.myDiv.firstElementChild) as HTMLElement)\r\n            .then(\r\n              (dataUrl) => {\r\n                this.setState({...this.state, imageDataUrl: dataUrl });\r\n              }\r\n            );\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    render = () => {\r\n      \r\n      return (this.state.imageDataUrl !== '')\r\n                ?  <img src={this.state.imageDataUrl} height={this.props.height} width={this.props.height} alt={this.props.alt}/> \r\n                : <div ref={c => this.myDiv = c} ><div>{this.props.children}</div></div>;\r\n    }\r\n  };\r\n\r\nexport default RenderAsImage;"],"names":["ReactDOM.findDOMNode","React.createElement","React.Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAaA,IAAM,YAAY,GAAG,EAAE,YAAY,EAAE,EAAE,EAAE,CAAC;;IAGd,iCAAoC;IAAhE;QAAA,qEAoCG;QAlCU,WAAK,GAAU,YAAY,CAAC;QAErC,uBAAiB,GAAG;YAClB,IAAI,MAAM,GAAyB,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC;YAErD,IAAI,KAAI,CAAC,KAAK,EAAE;gBACd,QAAQ,MAAM;oBACZ,KAAK,KAAK;wBACR,WAAW,CAAC,KAAK,CAACA,oBAAoB,CAAC,KAAI,CAAC,KAAK,CAAC,iBAAiB,CAAgB,CAAC;6BACnF,IAAI,CACH,UAAC,OAAO;4BACN,KAAI,CAAC,QAAQ,uBAAK,KAAI,CAAC,KAAK,KAAE,YAAY,EAAE,OAAO,IAAG,CAAC;yBACxD,CACF,CAAC;wBACF,MAAM;oBACR,KAAK,MAAM,CAAC;oBACZ;wBACE,WAAW,CAAC,MAAM,CAACA,oBAAoB,CAAC,KAAI,CAAC,KAAK,CAAC,iBAAiB,CAAgB,CAAC;6BACpF,IAAI,CACH,UAAC,OAAO;4BACN,KAAI,CAAC,QAAQ,uBAAK,KAAI,CAAC,KAAK,KAAE,YAAY,EAAE,OAAO,IAAG,CAAC;yBACxD,CACF,CAAC;wBACF,MAAM;iBACT;aACF;SACF,CAAA;QAED,YAAM,GAAG;YAEP,OAAO,CAAC,KAAI,CAAC,KAAK,CAAC,YAAY,KAAK,EAAE;kBACzBC,6BAAK,GAAG,EAAE,KAAI,CAAC,KAAK,CAAC,YAAY,EAAE,MAAM,EAAE,KAAI,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,EAAE,KAAI,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,EAAE,KAAI,CAAC,KAAK,CAAC,GAAG,GAAG;kBAC/GA,6BAAK,GAAG,EAAE,UAAA,CAAC,IAAI,OAAA,KAAI,CAAC,KAAK,GAAG,CAAC,GAAA;oBAAGA,iCAAM,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAO,CAAM,CAAC;SACpF,CAAA;;KACF;IAAD,oBAAC;AAAD,CAAC,CApCyBC,eAAe;;;;"}