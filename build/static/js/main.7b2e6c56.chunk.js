(this.webpackJsonpsapioservice=this.webpackJsonpsapioservice||[]).push([[0],{19:function(e,t,a){},37:function(e,t,a){e.exports=a(64)},58:function(e,t,a){e.exports=a.p+"static/media/h-post.72f2628e.png"},64:function(e,t,a){"use strict";a.r(t);var n,r,o,l,c,s,i,u,m,p,d,h,f=a(8),g=a(9),b=a(11),E=a(10),k=a(0),v=a.n(k),w=a(35),y=a(1),S=a(14),O=a(2),N=a.n(O),C=(a(19),function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return v.a.createElement("div",{className:"top-nav"},v.a.createElement("span",{className:"site-name"},"Sydani Assesment",v.a.createElement("span",{className:"dot"})))}}]),a}(v.a.Component)),x=(a(58),a(5)),B=a.n(x),j=a(13),A=a.n(j),_=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var u;return Object(f.a)(this,a),(u=t.call(this,e)).getBookByName=function(e){e.preventDefault(),u.setState({query:e.target.value}),N.a.get("".concat(N.a.defaults.baseURL,"/external-book?name=").concat(u.state.query)).then((function(e){return console.log(e),e})).then((function(e){200==e.data.status_code?(console.log(e.data),u.setState({bookfireice:e.data})):alert("Cannot Fetch Books!")})).catch((function(e){console.error("An Error Occured! ".concat(e))}))},u.createBook=function(e){e.preventDefault();var t=new FormData;t.append("name",n.value),t.append("isbn",r.value),t.append("authors",o.value),t.append("country",l.value),t.append("number_of_pages",c.value),t.append("publisher",s.value),t.append("release_date",i.value),console.log(t),N()({method:"post",url:"".concat(N.a.defaults.baseURL,"/v1/books"),data:t}).then((function(e){return console.log(e),e})).then((function(e){201==e.data.status_code?(B()("Book Created!","success",{button:!1,timer:1500}),u.setState({newbook:e.data})):B()("Alert!","warning")})).catch((function(e){B()("Warning!","An Error Occured","warning")}))},u.state={newbook:[],books:[],bookfireice:[],query:"",bookName:"A game of thrones"},u}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.getBookFireIce(),this.getBooks()}},{key:"getBookFireIce",value:function(){var e=this;N.a.get("".concat(N.a.defaults.baseURL,"/external-book?name=").concat(this.state.bookName)).then((function(e){return e})).then((function(t){200==t.data.status_code?(console.log(t.data),e.setState({bookfireice:t.data})):alert("Cannot Fetch Books!")})).catch((function(e){console.error("An Error Occured! ".concat(e))}))}},{key:"getBooks",value:function(){var e=this;N.a.get("".concat(N.a.defaults.baseURL,"/v1/books")).then((function(e){return e})).then((function(t){200==t.data.status_code?(console.log(t.data.books),e.setState({books:t.data.books})):alert("Cannot Fetch Books!")})).catch((function(e){console.error("An Error Occured! ".concat(e))}))}},{key:"render",value:function(){return v.a.createElement("div",null,v.a.createElement(C,null),v.a.createElement("div",{className:"vertical-book-cards"},v.a.createElement("div",{className:"v-scrolling-wrapper-flexbox"},v.a.createElement("h1",null,"Requirement 1"),v.a.createElement("div",{className:""},"Enter Name of Book",v.a.createElement("br",null),v.a.createElement("input",{name:"query",onChange:this.getBookByName}),v.a.createElement("pre",null,v.a.createElement("code",null,JSON.stringify(this.state.bookfireice,null,3))))),v.a.createElement("br",null),v.a.createElement("br",null),v.a.createElement("br",null),v.a.createElement("div",{className:"v-scrolling-wrapper-flexbox"},v.a.createElement("h1",null,"Requirement 2"),v.a.createElement("h3",null,"1. Create Book"),v.a.createElement("div",{className:""},v.a.createElement("form",{onSubmit:this.createBook,method:"post"},"Enter Name of Book",v.a.createElement("br",null),v.a.createElement("input",{ref:function(e){return n=e},name:"name"}),v.a.createElement("br",null),"Enter ISBN",v.a.createElement("br",null),v.a.createElement("input",{ref:function(e){return r=e},name:"isbn"}),v.a.createElement("br",null),"Enter Authors",v.a.createElement("br",null),v.a.createElement("input",{ref:function(e){return o=e},name:"authors"}),v.a.createElement("br",null),"Enter Country",v.a.createElement("br",null),v.a.createElement("input",{ref:function(e){return l=e},name:"country"}),v.a.createElement("br",null),"Enter Number of Pages",v.a.createElement("br",null),v.a.createElement("input",{ref:function(e){return c=e},name:"number_of_pages"}),v.a.createElement("br",null),"Enter Publisher",v.a.createElement("br",null),v.a.createElement("input",{ref:function(e){return s=e},name:"publisher"}),v.a.createElement("br",null),"Enter Release Date",v.a.createElement("br",null),v.a.createElement("input",{ref:function(e){return i=e},name:"release_date"}),v.a.createElement("br",null),v.a.createElement("button",{type:"submit",class:"btn btn-primary float-right"},"Create Book"),v.a.createElement("br",null),v.a.createElement("br",null)),v.a.createElement("pre",null,v.a.createElement("code",null,JSON.stringify(this.state.newbook,null,3)))),v.a.createElement("br",null),v.a.createElement("br",null),v.a.createElement("h3",null,"2. All Books"),v.a.createElement("div",{className:""},v.a.createElement("pre",null,v.a.createElement("code",null,JSON.stringify(this.state.books,null,3)))))))}}]),a}(v.a.Component),U={fontFamily:"sans-serif",textAlign:"center"},D=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={token:localStorage.appState?JSON.parse(localStorage.appState).user.token:"",user:[]},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split("/")[window.location.href.split("/").length-1];N.a.get("http://localhost:8000/api/v1/user/".concat(t),{headers:{Authorization:"Bearer ".concat(this.state.token)}}).then((function(e){return console.log(e),e})).then((function(t){t.data.success?e.setState({user:t.data.user}):alert("Cannot Fetch Data!")})).catch((function(e){console.error("An Error Occuredd! ".concat(e))}))}},{key:"render",value:function(){return v.a.createElement("div",{style:U},v.a.createElement("h2",null,"View User ","\u2728"),v.a.createElement("ul",null,this.state.user.map((function(e){return v.a.createElement("ol",{style:{padding:15,border:"1px solid #cccccc",width:250,textAlign:"left",marginBottom:15,marginLeft:"auto",marginRight:"auto"},key:e.id},v.a.createElement("p",null,"Name: ",e.fname),v.a.createElement("p",null,"Email: ",e.email),v.a.createElement("img",{src:e.avatar,alt:"User"}))}))),v.a.createElement("button",{style:{padding:10,backgroundColor:"red",color:"white"},onClick:this.props.logoutUser},"Logout"," "))}}]),a}(v.a.Component),P=a(17),L={input:{backgroundColor:"white",border:"1px solid #cccccc",padding:15,float:"left",clear:"right",width:"80%",margin:15},button:{height:44,boxShadow:"0px 8px 15px rgba(0, 0, 0, 0.1)",border:"none",backgroundColor:"red",margin:15,float:"left",clear:"both",width:"85%",color:"white",padding:15},link:{width:"100%",float:"left",clear:"both",textAlign:"center"}},F=window.location.href.split("/")[window.location.href.split("/").length-1],R=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).handleLogin=function(e){e.preventDefault(),A()("#email-login-btn").attr("disabled","disabled").html('<i class="fa fa-spinner fa-spin fa-1x fa-fw"></i><span class="sr-only">Loading...</span>');var t=new FormData;t.append("fname",u.value),t.append("lname",m.value),t.append("email",p.value),t.append("phone",d.value),t.append("avatar",n.state.file),t.append("password",h.value),console.log(t),N()({method:"post",url:"http://localhost:8000/api/v1/user/".concat(F),data:t,headers:{Authorization:"Bearer ".concat(n.state.token),"Content-Type":"multipart/form-data"}}).then((function(e){return console.log(e),e})).then((function(e){var t=e.data.user,a={isLoggedIn:!0,user:{id:t.id,fname:t.fname,lname:t.lname,email:t.email,phone:t.phone,token:e.data.token.token,timestamp:(new Date).toString()}};localStorage.appState=JSON.stringify(a),n.setState({isLoggedIn:a.isLoggedIn,user:a.user,token:a.token}),!0===e.data.success?(B()("Updated!",""+e.data.message,"success"),n.props.history.push("/")):(B()("Alert!",""+e.data.message,"warning"),A()("#email-login-btn").removeAttr("disabled").html("Update"))})).catch((function(e){console.log(e.response.data),""===e.response.data.message.fname?B()("Warning!",""+e.response.data.message.fname,"warning"):B()("Warning!","Please fill all fields","warning"),A()("#email-login-btn").removeAttr("disabled").html("Update")}))},n.uploadPhoto=function(e){n.photoUpload.click()},n.onChange=function(e){n.setState({imageSource:"",imageData:"",file:e.target.files[0]});var t=e.target.files[0];if(console.log(t),t){var a=new FileReader;a.readAsDataURL(e.target.files[0]),a.onload=function(e){n.setState({imageSource:e.target.result,imageData:t})}}},n.state={token:localStorage.appState?JSON.parse(localStorage.appState).user.token:"",user:[],imageSource:"",file:null},n.onChange=n.onChange.bind(Object(P.a)(n)),n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split("/")[window.location.href.split("/").length-1];N.a.get("http://localhost:8000/api/v1/user/".concat(t),{headers:{Authorization:"Bearer ".concat(this.state.token)}}).then((function(e){return console.log(e),e})).then((function(t){t.data.success?e.setState({user:t.data.user[0]}):B()("Oops!","Cannot Fetch Data!","error")})).catch((function(e){console.error("An Error Occured! ".concat(e))}))}},{key:"render",value:function(){var e=this;return A()("#fname-input").attr("value",this.state.user.fname),A()("#lname-input").attr("value",this.state.user.lname),A()("#email-input").attr("value",this.state.user.email),A()("#phone-input").attr("value",this.state.user.phone),A()("#avatar-input").attr("value",this.state.user.password),v.a.createElement("div",{style:L},v.a.createElement("h3",{style:{padding:15}},"Edit User"),v.a.createElement("form",{id:"login-form",action:"",onSubmit:this.handleLogin,method:"post"},v.a.createElement("input",{ref:function(e){return u=e},style:L.input,autoComplete:"off",id:"fname-input",name:"fname",type:"text",className:"center-block"}),v.a.createElement("input",{ref:function(e){return m=e},style:L.input,autoComplete:"off",id:"lname-input",name:"lname",type:"text",className:"center-block",placeholder:this.state.user.lname}),v.a.createElement("input",{ref:function(e){return p=e},style:L.input,autoComplete:"off",id:"email-input",name:"email",type:"text",placeholder:this.state.user.email}),v.a.createElement("input",{ref:function(e){return d=e},style:L.input,autoComplete:"off",id:"phone-input",name:"phone",type:"text",className:"center-block",placeholder:this.state.user.phone}),v.a.createElement("div",{onClick:this.uploadPhoto,className:"uk-inline"},v.a.createElement("img",{className:"",src:this.state.imageSource?this.state.imageSource:this.state.user.avatar?this.state.user.avatar:null,alt:"Alt"})),v.a.createElement("input",{ref:function(t){return e.photoUpload=t},onChange:this.onChange,style:L.input,autoComplete:"off",id:"avatar-input",name:"avatar",type:"file",className:"center-block"}),v.a.createElement("input",{ref:function(e){return h=e},style:L.input,autoComplete:"off",id:"password-input",name:"password",type:"password",className:"center-block",placeholder:"Enter new password or leave blank to maintain old password"}),v.a.createElement("button",{type:"submit",style:L.button,className:"landing-page-btn center-block text-center",id:"email-login-btn",href:"#facebook"},"Update"),v.a.createElement(S.b,{style:L.link,to:"/"},"Home")))}}]),a}(v.a.Component),J=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).likePost=function(){var e=window.location.href.split("/")[window.location.href.split("/").length-1];N.a.get("http://localhost:8000/api/v1/like/".concat(e),{headers:{Authorization:"Bearer ".concat(n.state.token)}}).then((function(e){return console.log(e),e})).then((function(e){e.data.success?n.setState({likes:e.data.like[0]}):alert("Error liking post!")})).catch((function(e){console.error("An Error Occured! ".concat(e))})),B()("","You liked this post","success",{button:!1,timer:1500})},n.state={token:localStorage.appState?JSON.parse(localStorage.appState).user.token:"",post:[],likes:0},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split("/")[window.location.href.split("/").length-1];N.a.get("http://localhost:8000/api/v1/post/".concat(t),{headers:{Authorization:"Bearer ".concat(this.state.token)}}).then((function(e){return console.log(e),e})).then((function(t){t.data.success?e.setState({post:t.data.post,likes:t.data.post[0].likes}):alert("Cannot Fetch Data!")})).catch((function(e){console.error("An Error Occuredd! ".concat(e))}))}},{key:"render",value:function(){var e=this;return v.a.createElement("div",null,v.a.createElement(C,null),v.a.createElement(S.b,{to:"/"},v.a.createElement("span",{className:"back"},v.a.createElement("svg",{className:"back-button",xmlns:"http://www.w3.org/2000/svg",width:"21.544",height:"19.267",viewBox:"0 0 21.544 19.267"},v.a.createElement("g",{id:"Group_73","data-name":"Group 73",transform:"translate(-317.057 -53.551)"},v.a.createElement("path",{id:"Path_21","data-name":"Path 21",d:"M-4149.31,54.965l-8.22,8.22,8.22,8.22",transform:"translate(4476)",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-width":"2"}),v.a.createElement("path",{id:"Path_22","data-name":"Path 22",d:"M-4157.529,61.315h19.13",transform:"translate(4476 1.87)",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-width":"2"})))," back")),this.state.post.map((function(t){return v.a.createElement("div",{className:"p-card",key:t.id},v.a.createElement("img",{src:t.image,alt:"",onClick:e.likePost,className:"p-card-img"}),v.a.createElement("div",{className:"post-action"},v.a.createElement("span",null,v.a.createElement(S.b,{onClick:e.likePost},v.a.createElement("span",{className:"action"},v.a.createElement("svg",{className:"action-icon",xmlns:"http://www.w3.org/2000/svg",width:"21.581",height:"18.76",viewBox:"0 0 21.581 18.76"},v.a.createElement("g",{id:"_17","data-name":"17",transform:"translate(0 0)"},v.a.createElement("g",{id:"Group_17","data-name":"Group 17",transform:"translate(0)"},v.a.createElement("path",{id:"Path_4","data-name":"Path 4",d:"M35.965,32.1l-1.16,1.16-1.16-1.16a5.632,5.632,0,0,0-7.983,0h0a5.681,5.681,0,0,0,0,7.983L34.806,49.2l9.142-9.142a5.632,5.632,0,0,0,0-7.983h0A5.656,5.656,0,0,0,35.965,32.1Z",transform:"translate(-24.025 -30.437)",fill:"#7a8fa6"})))))," ",v.a.createElement("span",{className:"action-text"},e.state.likes))),v.a.createElement("span",null,v.a.createElement(S.b,{onClick:e.likePost},v.a.createElement("span",{className:"action"},v.a.createElement("svg",{className:"action-icon",id:"Group_16","data-name":"Group 16",xmlns:"http://www.w3.org/2000/svg",width:"19.376",height:"18.913",viewBox:"0 0 19.376 18.913"},v.a.createElement("g",{id:"Group_15","data-name":"Group 15"},v.a.createElement("path",{id:"Path_3","data-name":"Path 3",d:"M9.688,0C4.319,0,0,3.807,0,8.492A8.205,8.205,0,0,0,3.593,15.13L3.743,18.3c.028.592.436.785.909.432l2.613-1.947a9.8,9.8,0,0,0,2.422.244c5.369,0,9.688-3.807,9.688-8.492S15.057,0,9.688,0Z",fill:"#7a8fa6"}))))," ",v.a.createElement("span",{className:"action-text"},e.state.likes)))))})))}}]),a}(v.a.Component);N.a.defaults.baseURL="https://sydani.evest.ng/app/api";var M=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){return Object(f.a)(this,a),t.call(this,e)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.appState;if(e)JSON.parse(e)}},{key:"render",value:function(){var e=this;return v.a.createElement(y.c,{data:"data"},v.a.createElement("div",{id:"main"},v.a.createElement(y.a,{exact:!0,path:"/",render:function(e){return v.a.createElement(_,e)}}),v.a.createElement(y.a,{path:"/view",render:function(t){return v.a.createElement(D,Object.assign({},t,{logoutUser:e._logoutUser}))}}),v.a.createElement(y.a,{path:"/view-post",render:function(t){return v.a.createElement(J,Object.assign({},t,{logoutUser:e._logoutUser}))}}),v.a.createElement(y.a,{path:"/edit",render:function(e){return v.a.createElement(R,e)}})))}}]),a}(v.a.Component),G=Object(y.f)((function(e){return v.a.createElement(M,e)}));Object(w.render)(v.a.createElement(S.a,null,v.a.createElement(G,null)),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.7b2e6c56.chunk.js.map